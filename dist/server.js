/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "/";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/server/server.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./src/server/schemas/model.bitacora.js":
/*!**********************************************!*\
  !*** ./src/server/schemas/model.bitacora.js ***!
  \**********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var _require = __webpack_require__(/*! mongoose */ \"mongoose\"),\n    Schema = _require.Schema,\n    model = _require.model;\n\nvar mongoosePaginate = __webpack_require__(/*! mongoose-paginate-v2 */ \"mongoose-paginate-v2\");\n\nvar bitacoraSchema = new Schema({\n  tipoOperacion: String,\n  fechaOperacion: String,\n  usuario: String,\n  numeroRegistros: Number,\n  sistema: String\n});\nbitacoraSchema.plugin(mongoosePaginate);\nvar Bitacora = model('Bitacora', bitacoraSchema, 'bitacora');\nmodule.exports = Bitacora;\n\n//# sourceURL=webpack:///./src/server/schemas/model.bitacora.js?");

/***/ }),

/***/ "./src/server/schemas/model.catalog.js":
/*!*********************************************!*\
  !*** ./src/server/schemas/model.catalog.js ***!
  \*********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var _require = __webpack_require__(/*! mongoose */ \"mongoose\"),\n    Schema = _require.Schema,\n    model = _require.model;\n\nvar mongoosePaginate = __webpack_require__(/*! mongoose-paginate-v2 */ \"mongoose-paginate-v2\");\n\nvar catalogSchema = new Schema({\n  clave: String,\n  valor: String,\n  siglas: String,\n  nombre: String,\n  doctype: String\n});\ncatalogSchema.plugin(mongoosePaginate);\nvar Catalog = model('Catalogos', catalogSchema, 'catalogos');\nmodule.exports = Catalog;\n\n//# sourceURL=webpack:///./src/server/schemas/model.catalog.js?");

/***/ }),

/***/ "./src/server/schemas/model.proovedor.js":
/*!***********************************************!*\
  !*** ./src/server/schemas/model.proovedor.js ***!
  \***********************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var _require = __webpack_require__(/*! mongoose */ \"mongoose\"),\n    Schema = _require.Schema,\n    model = _require.model;\n\nvar mongoosePaginate = __webpack_require__(/*! mongoose-paginate-v2 */ \"mongoose-paginate-v2\");\n\nvar providerSchema = new Schema({\n  dependencia: String,\n  fechaAlta: String,\n  fechaBaja: String,\n  fechaActualizacion: String,\n  estatus: Boolean,\n  sistemas: {\n    type: [],\n    default: void 0\n  }\n});\nproviderSchema.plugin(mongoosePaginate);\nvar Proovedor = model('Proovedores', providerSchema, 'proovedores');\nmodule.exports = Proovedor;\n\n//# sourceURL=webpack:///./src/server/schemas/model.proovedor.js?");

/***/ }),

/***/ "./src/server/schemas/model.s2.js":
/*!****************************************!*\
  !*** ./src/server/schemas/model.s2.js ***!
  \****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var _require = __webpack_require__(/*! mongoose */ \"mongoose\"),\n    Schema = _require.Schema;\n\nvar mongoosePaginate = __webpack_require__(/*! mongoose-paginate-v2 */ \"mongoose-paginate-v2\");\n\nvar spicSchema = new Schema({\n  fechaCaptura: String,\n  ejercicioFiscal: String,\n  ramo: {\n    clave: Number,\n    valor: String\n  },\n  rfc: String,\n  curp: String,\n  nombres: String,\n  primerApellido: String,\n  segundoApellido: String,\n  genero: {\n    clave: String,\n    valor: String\n  },\n  institucionDependencia: {\n    nombre: String,\n    clave: String,\n    siglas: String\n  },\n  puesto: {\n    nombre: String,\n    nivel: String\n  },\n  tipoArea: {\n    type: [],\n    default: void 0\n  },\n  tipoProcedimiento: {\n    type: [],\n    default: void 0\n  },\n  nivelResponsabilidad: {\n    type: [],\n    default: void 0\n  },\n  superiorInmediato: {\n    nombres: String,\n    primerApellido: String,\n    segundoApellido: String,\n    curp: String,\n    rfc: String,\n    puesto: {\n      nombre: String,\n      nivel: String\n    }\n  }\n});\nspicSchema.plugin(mongoosePaginate);\nmodule.exports = {\n  spicSchema: spicSchema\n};\n\n//# sourceURL=webpack:///./src/server/schemas/model.s2.js?");

/***/ }),

/***/ "./src/server/schemas/model.user.js":
/*!******************************************!*\
  !*** ./src/server/schemas/model.user.js ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var _require = __webpack_require__(/*! mongoose */ \"mongoose\"),\n    Schema = _require.Schema,\n    model = _require.model;\n\nvar mongoosePaginate = __webpack_require__(/*! mongoose-paginate-v2 */ \"mongoose-paginate-v2\");\n\nvar userSchema = new Schema({\n  nombre: String,\n  apellidoUno: String,\n  apellidoDos: String,\n  cargo: String,\n  correoElectronico: String,\n  telefono: String,\n  extension: String,\n  usuario: String,\n  constrasena: String,\n  sistemas: {\n    type: [],\n    default: void 0\n  },\n  fechaAlta: String,\n  fechaBaja: String,\n  estatus: Boolean,\n  vigenciaContrasena: String,\n  proveedorDatos: String\n});\nuserSchema.plugin(mongoosePaginate);\nvar User = model('Usuarios', userSchema, 'usuarios');\nmodule.exports = User;\n\n//# sourceURL=webpack:///./src/server/schemas/model.user.js?");

/***/ }),

/***/ "./src/server/server.js":
/*!******************************!*\
  !*** ./src/server/server.js ***!
  \******************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
<<<<<<< Updated upstream
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! express */ \"express\");\n/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(express__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var cors__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! cors */ \"cors\");\n/* harmony import */ var cors__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(cors__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var body_parser__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! body-parser */ \"body-parser\");\n/* harmony import */ var body_parser__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(body_parser__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var yup__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! yup */ \"yup\");\n/* harmony import */ var yup__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(yup__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _schemas_model_user__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./schemas/model.user */ \"./src/server/schemas/model.user.js\");\n/* harmony import */ var _schemas_model_user__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_schemas_model_user__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _schemas_model_s2__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./schemas/model.s2 */ \"./src/server/schemas/model.s2.js\");\n/* harmony import */ var _schemas_model_s2__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_schemas_model_s2__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _schemas_model_proovedor__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./schemas/model.proovedor */ \"./src/server/schemas/model.proovedor.js\");\n/* harmony import */ var _schemas_model_proovedor__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_schemas_model_proovedor__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var _schemas_model_catalog__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./schemas/model.catalog */ \"./src/server/schemas/model.catalog.js\");\n/* harmony import */ var _schemas_model_catalog__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_schemas_model_catalog__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var _schemas_model_bitacora__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./schemas/model.bitacora */ \"./src/server/schemas/model.bitacora.js\");\n/* harmony import */ var _schemas_model_bitacora__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(_schemas_model_bitacora__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! moment */ \"moment\");\n/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_10__);\n/* harmony import */ var regenerator_runtime__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! regenerator-runtime */ \"regenerator-runtime\");\n/* harmony import */ var regenerator_runtime__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(regenerator_runtime__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var console__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! console */ \"console\");\n/* harmony import */ var console__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(console__WEBPACK_IMPORTED_MODULE_12__);\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar mongoose = __webpack_require__(/*! mongoose */ \"mongoose\");\n\nvar yaml = __webpack_require__(/*! js-yaml */ \"js-yaml\");\n\nvar fs = __webpack_require__(/*! fs */ \"fs\");\n\nvar SwaggerClient = __webpack_require__(/*! swagger-client */ \"swagger-client\");\n\nvar Validator = __webpack_require__(/*! swagger-model-validator */ \"swagger-model-validator\");\n\nvar validator = new Validator(SwaggerClient);\n\nvar swaggerValidator = __webpack_require__(/*! swagger-object-validator */ \"swagger-object-validator\");\n\nvar _ = __webpack_require__(/*! underscore */ \"underscore\");\n\nvar jwt = __webpack_require__(/*! jsonwebtoken */ \"jsonwebtoken\");\n\n\n //connection mongo db\n\nconsole.log('mongodb://' + \"anmartinez\" + ':' + \"anmartinez\" + '@' + \"35.226.19.219:27017\" + '/' + \"administracionUsuarios\");\nvar db = mongoose.connect('mongodb://' + \"anmartinez\" + ':' + \"anmartinez\" + '@' + \"35.226.19.219:27017\" + '/' + \"administracionUsuarios\", {\n  useNewUrlParser: true,\n  useUnifiedTopology: true\n}).then(function () {\n  return console.log('Connect to MongoDB..');\n}).catch(function (err) {\n  return console.error('Could not connect to MongoDB..', err);\n});\nmongoose.set('useFindAndModify', false);\nvar S2 = mongoose.connection.useDb(\"S2\"); //let port = process.env.PORT || 7777;\n\nvar app = express__WEBPACK_IMPORTED_MODULE_0___default()();\napp.use(cors__WEBPACK_IMPORTED_MODULE_1___default()(), body_parser__WEBPACK_IMPORTED_MODULE_2___default.a.urlencoded({\n  extended: true\n}), body_parser__WEBPACK_IMPORTED_MODULE_2___default.a.json());\nvar server = app.listen(3004, function () {\n  var host = server.address().address;\n  var port = server.address().port;\n  console.log(' function cloud Server is listening at http://%s:%s', host, port);\n});\n\nfunction getArrayFormatTipoProcedimiento(array) {\n  _.each(array, function (p) {\n    p.clave = parseInt(p.clave);\n  });\n\n  return array;\n}\n\nvar validateToken = function validateToken(req) {\n  var inToken = null;\n  var auth = req.headers['authorization'];\n\n  if (auth && auth.toLowerCase().indexOf('bearer') == 0) {\n    inToken = auth.slice('bearer '.length);\n  } else if (req.body && req.body.access_token) {\n    inToken = req.body.access_token;\n  } else if (req.query && req.query.access_token) {\n    inToken = req.query.access_token;\n  } // invalid token - synchronous\n\n\n  try {\n    var decoded = jwt.verify(inToken, \"YTBGD9YjAUhkjQk9ZXcb\");\n    return {\n      code: 200,\n      message: decoded\n    };\n  } catch (err) {\n    // err\n    var error = \"\";\n\n    if (err.message === \"jwt must be provided\") {\n      error = \"Error el token de autenticación (JWT) es requerido en el header, favor de verificar\";\n    } else if (err.message === \"invalid signature\" || err.message.includes(\"Unexpected token\")) {\n      error = \"Error token inválido, el token probablemente ha sido modificado favor de verificar\";\n    } else if (err.message === \"jwt expired\") {\n      error = \"Error el token de autenticación (JWT) ha expirado, favor de enviar uno válido \";\n    } else {\n      error = err.message;\n    }\n\n    var obj = {\n      code: 401,\n      message: error\n    };\n    return obj;\n  }\n};\n\nvar esquemaS2 = yup__WEBPACK_IMPORTED_MODULE_4__[\"object\"]().shape({\n  ejercicioFiscal: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().matches(new RegExp('^[0-9]{4}$'), 'Debe tener 4 dígitos'),\n  ramo: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"](),\n  nombres: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().matches(new RegExp(\"^['A-zÀ-ú-\\. ]{1,25}$\"), 'no se permiten números, ni cadenas vacias ').required().trim(),\n  primerApellido: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().matches(new RegExp(\"^['A-zÀ-ú-\\. ]{1,25}$\"), 'no se permiten números, ni cadenas vacias ').required().trim(),\n  segundoApellido: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().matches(new RegExp(\"^['A-zÀ-ú-\\. ]{1,25}$\"), 'no se permiten números, ni cadenas vacias ').trim(),\n  genero: yup__WEBPACK_IMPORTED_MODULE_4__[\"object\"](),\n  idnombre: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().matches(new RegExp('^[A-zÀ-ú-0-9_\\.\\' ]{1,50}$'), 'no se permiten cadenas vacias , max 50 caracteres ').required().trim(),\n  idsiglas: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().matches(new RegExp('^[A-zÀ-ú-0-9_\\.\\' ]{1,50}$'), 'no se permiten cadenas vacias , max 50 caracteres ').trim(),\n  idclave: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().matches(new RegExp('^[A-zÀ-ú-0-9_\\.\\' ]{1,50}$'), 'no se permiten cadenas vacias , max 50 caracteres ').trim(),\n  puestoNombre: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().matches(new RegExp(\"^['A-zÀ-ú-\\. ]{1,25}$\"), 'no se permiten números, ni cadenas vacias ').trim().when('puestoNivel', function (puestoNivel) {\n    if (!puestoNivel) return yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().matches(new RegExp(\"^['A-zÀ-ú-\\. ]{1,25}$\"), 'no se permiten números, ni cadenas vacias, max 25 caracteres ').trim().required(\"Al menos un campo seccion Puesto, es requerido \");\n  }),\n  puestoNivel: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().matches(new RegExp(\"^[a-zA-Z0-9 ]{1,25}$\"), 'no se permiten números, ni cadenas vacias ').trim(),\n  tipoArea: yup__WEBPACK_IMPORTED_MODULE_4__[\"array\"](),\n  nivelResponsabilidad: yup__WEBPACK_IMPORTED_MODULE_4__[\"array\"](),\n  tipoProcedimiento: yup__WEBPACK_IMPORTED_MODULE_4__[\"array\"]().min(1).required(),\n  sinombres: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().matches(new RegExp(\"^['A-zÀ-ú-\\. ]{1,25}$\"), 'no se permiten números, ni cadenas vacias, max 25 caracteres ').trim(),\n  siPrimerApellido: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().matches(new RegExp(\"^['A-zÀ-ú-\\. ]{1,25}$\"), 'no se permiten números, ni cadenas vacias, max 25 caracteres ').trim(),\n  siSegundoApellido: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().matches(new RegExp(\"^['A-zÀ-ú-\\. ]{1,25}$\"), 'no se permiten números, ni cadenas vacias, max 25 caracteres ').trim(),\n  siPuestoNombre: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().matches(new RegExp(\"^['A-zÀ-ú-\\. ]{1,25}$\"), 'no se permiten números, ni cadenas vacias, max 25 caracteres ').trim(),\n  siPuestoNivel: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().matches(new RegExp(\"^[a-zA-Z0-9 ]{1,25}$\"), 'no se permiten números, ni cadenas vacias ').trim()\n});\nvar schemaUserCreate = yup__WEBPACK_IMPORTED_MODULE_4__[\"object\"]().shape({\n  vigenciaContrasena: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().required(),\n  fechaAlta: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().required()\n});\nvar schemaUser = yup__WEBPACK_IMPORTED_MODULE_4__[\"object\"]().shape({\n  nombre: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().matches(new RegExp(\"^['A-zÀ-ú ]*$\"), 'no se permiten números, ni cadenas vacias').required().trim(),\n  apellidoUno: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().matches(new RegExp('^[\\'A-zÀ-ú ]*$'), 'no se permiten números, ni cadenas vacias').required().trim(),\n  apellidoDos: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().matches(new RegExp('^[\\'A-zÀ-ú ]*$'), 'no se permiten números, ni cadenas vacias').trim(),\n  cargo: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().matches(new RegExp('^[\\'A-zÀ-ú ]*$'), 'no se permiten números, ni cadenas vacias').required().trim(),\n  correoElectronico: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().required().email(),\n  telefono: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().matches(new RegExp('^[0-9]{10}$'), 'Inserta un número de teléfono valido, 10 caracteres').required().trim(),\n  extension: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().matches(new RegExp('^[0-9]{0,10}$'), 'Inserta un número de extensión valido , maximo 10 caracteres').trim(),\n  usuario: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().matches(new RegExp('^[a-zA-Z0-9]{8,}$'), 'Inserta al menos 8 caracteres, no se permiten caracteres especiales').required().trim(),\n  constrasena: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().matches(new RegExp('^(?=.*[0-9])(?=.*[!@#$%^&*()_+,.\\\\\\\\\\\\/;\\':\"-]).{8,}$'), 'Inserta al menos 8 caracteres, al menos un número, almenos un caracter especial ').required().trim(),\n  sistemas: yup__WEBPACK_IMPORTED_MODULE_4__[\"array\"]().min(1).required(),\n  proveedorDatos: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().required(),\n  estatus: yup__WEBPACK_IMPORTED_MODULE_4__[\"boolean\"]().required()\n});\nvar schemaProvider = yup__WEBPACK_IMPORTED_MODULE_4__[\"object\"]().shape({\n  dependencia: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().required().matches(new RegExp('^[ñáéíóúáéíóúÁÉÍÓÚa-zA-Z ]*$'), 'Inserta solamente caracteres'),\n  sistemas: yup__WEBPACK_IMPORTED_MODULE_4__[\"array\"]().min(1).required(),\n  estatus: yup__WEBPACK_IMPORTED_MODULE_4__[\"boolean\"]().required(),\n  fechaAlta: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]()\n});\n\nfunction registroBitacora(_x) {\n  return _registroBitacora.apply(this, arguments);\n}\n\nfunction _registroBitacora() {\n  _registroBitacora = _asyncToGenerator( /*#__PURE__*/regenerator_runtime__WEBPACK_IMPORTED_MODULE_11___default.a.mark(function _callee19(data) {\n    var response, nuevaBitacora;\n    return regenerator_runtime__WEBPACK_IMPORTED_MODULE_11___default.a.wrap(function _callee19$(_context19) {\n      while (1) {\n        switch (_context19.prev = _context19.next) {\n          case 0:\n            nuevaBitacora = new _schemas_model_bitacora__WEBPACK_IMPORTED_MODULE_9___default.a(data);\n            _context19.next = 3;\n            return nuevaBitacora.save();\n\n          case 3:\n            response = _context19.sent;\n\n          case 4:\n          case \"end\":\n            return _context19.stop();\n        }\n      }\n    }, _callee19);\n  }));\n  return _registroBitacora.apply(this, arguments);\n}\n\nfunction validateSchema(_x2, _x3, _x4) {\n  return _validateSchema.apply(this, arguments);\n}\n\nfunction _validateSchema() {\n  _validateSchema = _asyncToGenerator( /*#__PURE__*/regenerator_runtime__WEBPACK_IMPORTED_MODULE_11___default.a.mark(function _callee20(doc, schema, validacion) {\n    var result, objError, arrayErrors, textErrors, errors, _iterator2, _step2, error, obj, _path, _iterator3, _step3, ruta;\n\n    return regenerator_runtime__WEBPACK_IMPORTED_MODULE_11___default.a.wrap(function _callee20$(_context20) {\n      while (1) {\n        switch (_context20.prev = _context20.next) {\n          case 0:\n            _context20.next = 2;\n            return validacion.validateModel(doc, schema);\n\n          case 2:\n            result = _context20.sent;\n\n            if (!result) {\n              _context20.next = 15;\n              break;\n            }\n\n            objError = {};\n            arrayErrors = result.errorsWithStringTypes();\n            objError[\"docId\"] = doc[0].id;\n            objError[\"valid\"] = arrayErrors.length === 0 ? true : false;\n            objError[\"errorCount\"] = arrayErrors.length;\n            errors = [];\n            _iterator2 = _createForOfIteratorHelper(arrayErrors);\n\n            try {\n              for (_iterator2.s(); !(_step2 = _iterator2.n()).done;) {\n                error = _step2.value;\n                obj = {};\n                obj[\"typeError\"] = error.errorType;\n                _path = \"\";\n                _iterator3 = _createForOfIteratorHelper(error.trace);\n\n                try {\n                  for (_iterator3.s(); !(_step3 = _iterator3.n()).done;) {\n                    ruta = _step3.value;\n                    _path = _path + ruta.stepName + \"/\";\n                  }\n                } catch (err) {\n                  _iterator3.e(err);\n                } finally {\n                  _iterator3.f();\n                }\n\n                obj[\"pathError\"] = _path;\n                errors.push(obj);\n              }\n            } catch (err) {\n              _iterator2.e(err);\n            } finally {\n              _iterator2.f();\n            }\n\n            objError[\"errors\"] = errors;\n            objError[\"errorsHumanReadable\"] = result.humanReadable();\n            return _context20.abrupt(\"return\", objError);\n\n          case 15:\n          case \"end\":\n            return _context20.stop();\n        }\n      }\n    }, _callee20);\n  }));\n  return _validateSchema.apply(this, arguments);\n}\n\napp.post('/validateSchemaS2', /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/regenerator_runtime__WEBPACK_IMPORTED_MODULE_11___default.a.mark(function _callee(req, res) {\n    var code, usuario, fileContents, data, schemaS2, validacion, newdocument, respuesta, arrayDocuments, ids, c1, _iterator, _step, doc, wasInvalid, _i, _respuesta, val, Spic, response, detailObject, bitacora;\n\n    return regenerator_runtime__WEBPACK_IMPORTED_MODULE_11___default.a.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            code = validateToken(req);\n            code = validateToken(req);\n            usuario = req.headers.usuario;\n\n            if (!(code.code == 401)) {\n              _context.next = 8;\n              break;\n            }\n\n            res.status(401).json({\n              code: '401',\n              message: code.message\n            });\n            _context.next = 78;\n            break;\n\n          case 8:\n            if (!(code.code == 200)) {\n              _context.next = 78;\n              break;\n            }\n\n            fileContents = fs.readFileSync(path__WEBPACK_IMPORTED_MODULE_3___default.a.resolve(__dirname, '../src/resource/openapis2.yaml'), 'utf8');\n            data = yaml.safeLoad(fileContents);\n            schemaS2 = data.components.schemas.respSpic;\n            validacion = new swaggerValidator.Handler();\n            newdocument = req.body;\n            respuesta = [];\n            arrayDocuments = [];\n            ids = [];\n            c1 = 1;\n\n            if (!Array.isArray(newdocument)) {\n              _context.next = 45;\n              break;\n            }\n\n            _iterator = _createForOfIteratorHelper(newdocument);\n            _context.prev = 20;\n\n            _iterator.s();\n\n          case 22:\n            if ((_step = _iterator.n()).done) {\n              _context.next = 35;\n              break;\n            }\n\n            doc = _step.value;\n            doc[\"id\"] = c1.toString();\n            c1++;\n            _context.t0 = respuesta;\n            _context.next = 29;\n            return validateSchema([doc], schemaS2, validacion);\n\n          case 29:\n            _context.t1 = _context.sent;\n\n            _context.t0.push.call(_context.t0, _context.t1);\n\n            ids.push(doc.id);\n            arrayDocuments.push(doc);\n\n          case 33:\n            _context.next = 22;\n            break;\n\n          case 35:\n            _context.next = 40;\n            break;\n\n          case 37:\n            _context.prev = 37;\n            _context.t2 = _context[\"catch\"](20);\n\n            _iterator.e(_context.t2);\n\n          case 40:\n            _context.prev = 40;\n\n            _iterator.f();\n\n            return _context.finish(40);\n\n          case 43:\n            _context.next = 53;\n            break;\n\n          case 45:\n            newdocument[\"id\"] = c1.toString();\n            c1++;\n            _context.t3 = respuesta;\n            _context.next = 50;\n            return validateSchema([newdocument], schemaS2, validacion);\n\n          case 50:\n            _context.t4 = _context.sent;\n\n            _context.t3.push.call(_context.t3, _context.t4);\n\n            arrayDocuments.push(newdocument);\n\n          case 53:\n            for (_i = 0, _respuesta = respuesta; _i < _respuesta.length; _i++) {\n              val = _respuesta[_i];\n\n              if (!val.valid) {\n                wasInvalid = true;\n              }\n            }\n\n            if (!wasInvalid) {\n              _context.next = 58;\n              break;\n            }\n\n            res.status(200).json({\n              message: \"Error : La validación no fue exitosa\",\n              Status: 500,\n              response: respuesta\n            });\n            _context.next = 78;\n            break;\n\n          case 58:\n            _context.prev = 58;\n            Spic = S2.model('Spic', _schemas_model_s2__WEBPACK_IMPORTED_MODULE_6__[\"spicSchema\"], 'spic');\n            _context.next = 62;\n            return Spic.insertMany(arrayDocuments);\n\n          case 62:\n            response = _context.sent;\n            detailObject = {};\n            detailObject[\"numeroRegistros\"] = arrayDocuments.length;\n            bitacora = [];\n            bitacora[\"tipoOperacion\"] = \"CREATE\";\n            bitacora[\"fechaOperacion\"] = moment__WEBPACK_IMPORTED_MODULE_10___default()().format();\n            bitacora[\"usuario\"] = usuario;\n            bitacora[\"numeroRegistros\"] = arrayDocuments.length;\n            bitacora[\"sistema\"] = \"S2\";\n            registroBitacora(bitacora);\n            res.status(200).json({\n              message: \"Se realizarón las inserciones correctamente\",\n              Status: 200,\n              response: response,\n              detail: detailObject\n            });\n            _context.next = 78;\n            break;\n\n          case 75:\n            _context.prev = 75;\n            _context.t5 = _context[\"catch\"](58);\n            console.log(_context.t5);\n\n          case 78:\n            _context.next = 83;\n            break;\n\n          case 80:\n            _context.prev = 80;\n            _context.t6 = _context[\"catch\"](0);\n            console.log(_context.t6);\n\n          case 83:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[0, 80], [20, 37, 40, 43], [58, 75]]);\n  }));\n\n  return function (_x5, _x6) {\n    return _ref.apply(this, arguments);\n  };\n}());\napp.delete('/deleteUser', /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/regenerator_runtime__WEBPACK_IMPORTED_MODULE_11___default.a.mark(function _callee2(req, res) {\n    var code, data, fechabaja, response;\n    return regenerator_runtime__WEBPACK_IMPORTED_MODULE_11___default.a.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.prev = 0;\n            code = validateToken(req);\n\n            if (!(code.code == 401)) {\n              _context2.next = 6;\n              break;\n            }\n\n            res.status(401).json({\n              code: '401',\n              message: code.message\n            });\n            _context2.next = 17;\n            break;\n\n          case 6:\n            if (!(code.code == 200)) {\n              _context2.next = 17;\n              break;\n            }\n\n            if (!req.body.request._id) {\n              _context2.next = 16;\n              break;\n            }\n\n            data = [];\n            fechabaja = moment__WEBPACK_IMPORTED_MODULE_10___default()().format();\n            _context2.next = 12;\n            return _schemas_model_user__WEBPACK_IMPORTED_MODULE_5___default.a.findByIdAndUpdate(req.body.request._id, {\n              $set: {\n                fechaBaja: fechabaja\n              }\n            }).exec();\n\n          case 12:\n            response = _context2.sent;\n            res.status(200).json({\n              message: \"OK\",\n              Status: 200,\n              response: response\n            });\n            _context2.next = 17;\n            break;\n\n          case 16:\n            res.status(500).json([{\n              \"Error\": \"Datos incompletos\"\n            }]);\n\n          case 17:\n            _context2.next = 22;\n            break;\n\n          case 19:\n            _context2.prev = 19;\n            _context2.t0 = _context2[\"catch\"](0);\n            console.log(_context2.t0);\n\n          case 22:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2, null, [[0, 19]]);\n  }));\n\n  return function (_x7, _x8) {\n    return _ref2.apply(this, arguments);\n  };\n}());\napp.delete('/deleteProvider', /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator( /*#__PURE__*/regenerator_runtime__WEBPACK_IMPORTED_MODULE_11___default.a.mark(function _callee3(req, res) {\n    var code, fechabaja, response;\n    return regenerator_runtime__WEBPACK_IMPORTED_MODULE_11___default.a.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.prev = 0;\n            code = validateToken(req);\n\n            if (!(code.code == 401)) {\n              _context3.next = 6;\n              break;\n            }\n\n            res.status(401).json({\n              code: '401',\n              message: code.message\n            });\n            _context3.next = 13;\n            break;\n\n          case 6:\n            if (!(code.code == 200)) {\n              _context3.next = 13;\n              break;\n            }\n\n            if (!req.body.request._id) {\n              _context3.next = 13;\n              break;\n            }\n\n            fechabaja = moment__WEBPACK_IMPORTED_MODULE_10___default()().format();\n            _context3.next = 11;\n            return _schemas_model_proovedor__WEBPACK_IMPORTED_MODULE_7___default.a.findByIdAndUpdate(req.body.request._id, {\n              $set: {\n                fechaBaja: fechabaja\n              }\n            }).exec();\n\n          case 11:\n            response = _context3.sent;\n            res.status(200).json({\n              message: \"OK\",\n              Status: 200,\n              response: response\n            });\n\n          case 13:\n            _context3.next = 18;\n            break;\n\n          case 15:\n            _context3.prev = 15;\n            _context3.t0 = _context3[\"catch\"](0);\n            console.log(_context3.t0);\n\n          case 18:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3, null, [[0, 15]]);\n  }));\n\n  return function (_x9, _x10) {\n    return _ref3.apply(this, arguments);\n  };\n}());\napp.post('/create/provider', /*#__PURE__*/function () {\n  var _ref4 = _asyncToGenerator( /*#__PURE__*/regenerator_runtime__WEBPACK_IMPORTED_MODULE_11___default.a.mark(function _callee4(req, res) {\n    var code, nuevoProovedor, responce, errorMessage;\n    return regenerator_runtime__WEBPACK_IMPORTED_MODULE_11___default.a.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            _context4.prev = 0;\n            code = validateToken(req);\n\n            if (!(code.code == 401)) {\n              _context4.next = 6;\n              break;\n            }\n\n            res.status(401).json({\n              code: '401',\n              message: code.message\n            });\n            _context4.next = 25;\n            break;\n\n          case 6:\n            if (!(code.code == 200)) {\n              _context4.next = 25;\n              break;\n            }\n\n            _context4.prev = 7;\n            _context4.next = 10;\n            return schemaProvider.validate({\n              dependencia: req.body.dependencia,\n              sistemas: req.body.sistemas,\n              estatus: req.body.estatus,\n              fechaAlta: req.body.fechaAlta\n            });\n\n          case 10:\n            nuevoProovedor = new _schemas_model_proovedor__WEBPACK_IMPORTED_MODULE_7___default.a(req.body);\n            _context4.next = 13;\n            return nuevoProovedor.save();\n\n          case 13:\n            responce = _context4.sent;\n            res.status(200).json(responce);\n            _context4.next = 25;\n            break;\n\n          case 17:\n            _context4.prev = 17;\n            _context4.t0 = _context4[\"catch\"](7);\n            errorMessage = {};\n            errorMessage[\"errores\"] = _context4.t0.errors;\n            errorMessage[\"campo\"] = _context4.t0.path;\n            errorMessage[\"tipoError\"] = _context4.t0.type;\n            errorMessage[\"mensaje\"] = _context4.t0.message;\n            res.status(400).json(errorMessage);\n\n          case 25:\n            _context4.next = 30;\n            break;\n\n          case 27:\n            _context4.prev = 27;\n            _context4.t1 = _context4[\"catch\"](0);\n            console.log(_context4.t1);\n\n          case 30:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4, null, [[0, 27], [7, 17]]);\n  }));\n\n  return function (_x11, _x12) {\n    return _ref4.apply(this, arguments);\n  };\n}());\napp.put('/edit/provider', /*#__PURE__*/function () {\n  var _ref5 = _asyncToGenerator( /*#__PURE__*/regenerator_runtime__WEBPACK_IMPORTED_MODULE_11___default.a.mark(function _callee5(req, res) {\n    var code, nuevoProovedor, responce, errorMessage;\n    return regenerator_runtime__WEBPACK_IMPORTED_MODULE_11___default.a.wrap(function _callee5$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            _context5.prev = 0;\n            code = validateToken(req);\n\n            if (!(code.code == 401)) {\n              _context5.next = 6;\n              break;\n            }\n\n            res.status(401).json({\n              code: '401',\n              message: code.message\n            });\n            _context5.next = 29;\n            break;\n\n          case 6:\n            if (!(code.code == 200)) {\n              _context5.next = 29;\n              break;\n            }\n\n            _context5.prev = 7;\n            _context5.next = 10;\n            return yup__WEBPACK_IMPORTED_MODULE_4__[\"object\"]().shape({\n              fechaActualizacion: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().required()\n            }).concat(schemaProvider).validate({\n              dependencia: req.body.dependencia,\n              sistemas: req.body.sistemas,\n              estatus: req.body.estatus,\n              fechaAlta: req.body.fechaAlta,\n              fechaActualizacion: req.body.fechaActualizacion\n            });\n\n          case 10:\n            nuevoProovedor = new _schemas_model_proovedor__WEBPACK_IMPORTED_MODULE_7___default.a(req.body);\n\n            if (!req.body._id) {\n              _context5.next = 18;\n              break;\n            }\n\n            _context5.next = 14;\n            return _schemas_model_proovedor__WEBPACK_IMPORTED_MODULE_7___default.a.findByIdAndUpdate(req.body._id, nuevoProovedor).exec();\n\n          case 14:\n            responce = _context5.sent;\n            res.status(200).json(responce);\n            _context5.next = 19;\n            break;\n\n          case 18:\n            res.status(500).json({\n              message: \"Error : Datos incompletos\",\n              Status: 500\n            });\n\n          case 19:\n            _context5.next = 29;\n            break;\n\n          case 21:\n            _context5.prev = 21;\n            _context5.t0 = _context5[\"catch\"](7);\n            errorMessage = {};\n            errorMessage[\"errores\"] = _context5.t0.errors;\n            errorMessage[\"campo\"] = _context5.t0.path;\n            errorMessage[\"tipoError\"] = _context5.t0.type;\n            errorMessage[\"mensaje\"] = _context5.t0.message;\n            res.status(400).json(errorMessage);\n\n          case 29:\n            _context5.next = 34;\n            break;\n\n          case 31:\n            _context5.prev = 31;\n            _context5.t1 = _context5[\"catch\"](0);\n            console.log(_context5.t1);\n\n          case 34:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    }, _callee5, null, [[0, 31], [7, 21]]);\n  }));\n\n  return function (_x13, _x14) {\n    return _ref5.apply(this, arguments);\n  };\n}());\napp.post('/create/user', /*#__PURE__*/function () {\n  var _ref6 = _asyncToGenerator( /*#__PURE__*/regenerator_runtime__WEBPACK_IMPORTED_MODULE_11___default.a.mark(function _callee6(req, res) {\n    var code, fechaActual, newBody, nuevoUsuario, response, errorMessage;\n    return regenerator_runtime__WEBPACK_IMPORTED_MODULE_11___default.a.wrap(function _callee6$(_context6) {\n      while (1) {\n        switch (_context6.prev = _context6.next) {\n          case 0:\n            _context6.prev = 0;\n            code = validateToken(req);\n\n            if (!(code.code == 401)) {\n              _context6.next = 6;\n              break;\n            }\n\n            res.status(401).json({\n              code: '401',\n              message: code.message\n            });\n            _context6.next = 28;\n            break;\n\n          case 6:\n            if (!(code.code == 200)) {\n              _context6.next = 28;\n              break;\n            }\n\n            _context6.prev = 7;\n            fechaActual = moment__WEBPACK_IMPORTED_MODULE_10___default()();\n            newBody = _objectSpread(_objectSpread({}, req.body), {}, {\n              fechaAlta: fechaActual.format(),\n              vigenciaContrasena: fechaActual.add(3, 'months').format().toString(),\n              estatus: true\n            });\n            _context6.next = 12;\n            return schemaUserCreate.concat(schemaUser).validate({\n              nombre: newBody.nombre,\n              apellidoUno: newBody.apellidoUno,\n              apellidoDos: newBody.apellidoDos,\n              cargo: newBody.cargo,\n              correoElectronico: newBody.correoElectronico,\n              telefono: newBody.telefono,\n              extension: newBody.extension,\n              usuario: newBody.usuario,\n              constrasena: newBody.constrasena,\n              sistemas: newBody.sistemas,\n              proveedorDatos: newBody.proveedorDatos,\n              estatus: newBody.estatus,\n              fechaAlta: newBody.fechaAlta,\n              vigenciaContrasena: newBody.vigenciaContrasena\n            });\n\n          case 12:\n            if (newBody.passwordConfirmation) {\n              delete newBody.passwordConfirmation;\n            }\n\n            nuevoUsuario = new _schemas_model_user__WEBPACK_IMPORTED_MODULE_5___default.a(newBody);\n            _context6.next = 16;\n            return nuevoUsuario.save();\n\n          case 16:\n            response = _context6.sent;\n            res.status(200).json(response);\n            _context6.next = 28;\n            break;\n\n          case 20:\n            _context6.prev = 20;\n            _context6.t0 = _context6[\"catch\"](7);\n            errorMessage = {};\n            errorMessage[\"errores\"] = _context6.t0.errors;\n            errorMessage[\"campo\"] = _context6.t0.path;\n            errorMessage[\"tipoError\"] = _context6.t0.type;\n            errorMessage[\"mensaje\"] = _context6.t0.message;\n            res.status(400).json(errorMessage);\n\n          case 28:\n            _context6.next = 33;\n            break;\n\n          case 30:\n            _context6.prev = 30;\n            _context6.t1 = _context6[\"catch\"](0);\n            console.log(_context6.t1);\n\n          case 33:\n          case \"end\":\n            return _context6.stop();\n        }\n      }\n    }, _callee6, null, [[0, 30], [7, 20]]);\n  }));\n\n  return function (_x15, _x16) {\n    return _ref6.apply(this, arguments);\n  };\n}());\napp.put('/edit/user', /*#__PURE__*/function () {\n  var _ref7 = _asyncToGenerator( /*#__PURE__*/regenerator_runtime__WEBPACK_IMPORTED_MODULE_11___default.a.mark(function _callee7(req, res) {\n    var code, nuevoUsuario, response, errorMessage;\n    return regenerator_runtime__WEBPACK_IMPORTED_MODULE_11___default.a.wrap(function _callee7$(_context7) {\n      while (1) {\n        switch (_context7.prev = _context7.next) {\n          case 0:\n            _context7.prev = 0;\n            code = validateToken(req);\n\n            if (!(code.code == 401)) {\n              _context7.next = 6;\n              break;\n            }\n\n            res.status(401).json({\n              code: '401',\n              message: code.message\n            });\n            _context7.next = 29;\n            break;\n\n          case 6:\n            if (!(code.code == 200)) {\n              _context7.next = 29;\n              break;\n            }\n\n            _context7.prev = 7;\n            _context7.next = 10;\n            return schemaUser.validate({\n              nombre: req.body.nombre,\n              apellidoUno: req.body.apellidoUno,\n              apellidoDos: req.body.apellidoDos,\n              cargo: req.body.cargo,\n              correoElectronico: req.body.correoElectronico,\n              telefono: req.body.telefono,\n              extension: req.body.extension,\n              usuario: req.body.usuario,\n              constrasena: req.body.constrasena,\n              sistemas: req.body.sistemas,\n              proveedorDatos: req.body.proveedorDatos,\n              estatus: req.body.estatus\n            });\n\n          case 10:\n            nuevoUsuario = new _schemas_model_user__WEBPACK_IMPORTED_MODULE_5___default.a(req.body);\n\n            if (!req.body._id) {\n              _context7.next = 18;\n              break;\n            }\n\n            _context7.next = 14;\n            return _schemas_model_user__WEBPACK_IMPORTED_MODULE_5___default.a.findByIdAndUpdate(req.body._id, nuevoUsuario).exec();\n\n          case 14:\n            response = _context7.sent;\n            res.status(200).json(response);\n            _context7.next = 19;\n            break;\n\n          case 18:\n            res.status(500).json({\n              message: \"Error : Datos incompletos\",\n              Status: 500\n            });\n\n          case 19:\n            _context7.next = 29;\n            break;\n\n          case 21:\n            _context7.prev = 21;\n            _context7.t0 = _context7[\"catch\"](7);\n            errorMessage = {};\n            errorMessage[\"errores\"] = _context7.t0.errors;\n            errorMessage[\"campo\"] = _context7.t0.path;\n            errorMessage[\"tipoError\"] = _context7.t0.type;\n            errorMessage[\"mensaje\"] = _context7.t0.message;\n            res.status(400).json(errorMessage);\n\n          case 29:\n            _context7.next = 34;\n            break;\n\n          case 31:\n            _context7.prev = 31;\n            _context7.t1 = _context7[\"catch\"](0);\n            console.log(_context7.t1);\n\n          case 34:\n          case \"end\":\n            return _context7.stop();\n        }\n      }\n    }, _callee7, null, [[0, 31], [7, 21]]);\n  }));\n\n  return function (_x17, _x18) {\n    return _ref7.apply(this, arguments);\n  };\n}());\napp.post('/getUsers', /*#__PURE__*/function () {\n  var _ref8 = _asyncToGenerator( /*#__PURE__*/regenerator_runtime__WEBPACK_IMPORTED_MODULE_11___default.a.mark(function _callee8(req, res) {\n    var code, sortObj, page, pageSize, query, paginationResult, objpagination, objresults, objResponse;\n    return regenerator_runtime__WEBPACK_IMPORTED_MODULE_11___default.a.wrap(function _callee8$(_context8) {\n      while (1) {\n        switch (_context8.prev = _context8.next) {\n          case 0:\n            _context8.prev = 0;\n            code = validateToken(req);\n\n            if (!(code.code == 401)) {\n              _context8.next = 6;\n              break;\n            }\n\n            res.status(401).json({\n              code: '401',\n              message: code.message\n            });\n            _context8.next = 20;\n            break;\n\n          case 6:\n            if (!(code.code == 200)) {\n              _context8.next = 20;\n              break;\n            }\n\n            sortObj = req.body.sort === undefined ? {} : req.body.sort;\n            page = req.body.page === undefined ? 1 : req.body.page; //numero de pagina a mostrar\n\n            pageSize = req.body.pageSize === undefined ? 10 : req.body.pageSize;\n            query = req.body.query === undefined ? {} : req.body.query;\n            _context8.next = 13;\n            return _schemas_model_user__WEBPACK_IMPORTED_MODULE_5___default.a.paginate(query, {\n              page: page,\n              limit: pageSize,\n              sort: sortObj\n            }).then();\n\n          case 13:\n            paginationResult = _context8.sent;\n            objpagination = {\n              hasNextPage: paginationResult.hasNextPage,\n              page: paginationResult.page,\n              pageSize: paginationResult.limit,\n              totalRows: paginationResult.totalDocs\n            };\n            objresults = paginationResult.docs;\n            objResponse = {};\n            objResponse[\"pagination\"] = objpagination;\n            objResponse[\"results\"] = objresults;\n            res.status(200).json(objResponse);\n\n          case 20:\n            _context8.next = 25;\n            break;\n\n          case 22:\n            _context8.prev = 22;\n            _context8.t0 = _context8[\"catch\"](0);\n            console.log(_context8.t0);\n\n          case 25:\n          case \"end\":\n            return _context8.stop();\n        }\n      }\n    }, _callee8, null, [[0, 22]]);\n  }));\n\n  return function (_x19, _x20) {\n    return _ref8.apply(this, arguments);\n  };\n}());\napp.post('/getUsersFull', /*#__PURE__*/function () {\n  var _ref9 = _asyncToGenerator( /*#__PURE__*/regenerator_runtime__WEBPACK_IMPORTED_MODULE_11___default.a.mark(function _callee9(req, res) {\n    var code, result, objResponse;\n    return regenerator_runtime__WEBPACK_IMPORTED_MODULE_11___default.a.wrap(function _callee9$(_context9) {\n      while (1) {\n        switch (_context9.prev = _context9.next) {\n          case 0:\n            _context9.prev = 0;\n            code = validateToken(req);\n\n            if (!(code.code == 401)) {\n              _context9.next = 6;\n              break;\n            }\n\n            res.status(401).json({\n              code: '401',\n              message: code.message\n            });\n            _context9.next = 13;\n            break;\n\n          case 6:\n            if (!(code.code == 200)) {\n              _context9.next = 13;\n              break;\n            }\n\n            _context9.next = 9;\n            return _schemas_model_user__WEBPACK_IMPORTED_MODULE_5___default.a.find({\n              fechaBaja: null\n            }).then();\n\n          case 9:\n            result = _context9.sent;\n            objResponse = {};\n            objResponse[\"results\"] = result;\n            res.status(200).json(objResponse);\n\n          case 13:\n            _context9.next = 18;\n            break;\n\n          case 15:\n            _context9.prev = 15;\n            _context9.t0 = _context9[\"catch\"](0);\n            console.log(_context9.t0);\n\n          case 18:\n          case \"end\":\n            return _context9.stop();\n        }\n      }\n    }, _callee9, null, [[0, 15]]);\n  }));\n\n  return function (_x21, _x22) {\n    return _ref9.apply(this, arguments);\n  };\n}()); /////////////////////////////////////////////////////////SHEMA S2///////////////////////////////////////////\n\napp.post('/insertS2Schema', /*#__PURE__*/function () {\n  var _ref10 = _asyncToGenerator( /*#__PURE__*/regenerator_runtime__WEBPACK_IMPORTED_MODULE_11___default.a.mark(function _callee10(req, res) {\n    var code, usuario, fileContents, data, schemaS2, validacion, newdocument, respuesta, Spic, esquema, result, objResponse, bitacora;\n    return regenerator_runtime__WEBPACK_IMPORTED_MODULE_11___default.a.wrap(function _callee10$(_context10) {\n      while (1) {\n        switch (_context10.prev = _context10.next) {\n          case 0:\n            _context10.prev = 0;\n            code = validateToken(req);\n            usuario = req.body.usuario;\n            delete req.body.usuario;\n\n            if (!(code.code == 401)) {\n              _context10.next = 8;\n              break;\n            }\n\n            res.status(401).json({\n              code: '401',\n              message: code.message\n            });\n            _context10.next = 43;\n            break;\n\n          case 8:\n            if (!(code.code == 200)) {\n              _context10.next = 43;\n              break;\n            }\n\n            fileContents = fs.readFileSync(path__WEBPACK_IMPORTED_MODULE_3___default.a.resolve(__dirname, '../src/resource/openapis2.yaml'), 'utf8');\n            data = yaml.safeLoad(fileContents);\n            schemaS2 = data.components.schemas.respSpic;\n            validacion = new swaggerValidator.Handler();\n            newdocument = req.body;\n            _context10.next = 16;\n            return validateSchema([newdocument], schemaS2, validacion);\n\n          case 16:\n            respuesta = _context10.sent;\n\n            if (!respuesta.valid) {\n              _context10.next = 42;\n              break;\n            }\n\n            _context10.prev = 18;\n            Spic = S2.model('Spic', _schemas_model_s2__WEBPACK_IMPORTED_MODULE_6__[\"spicSchema\"], 'spic');\n            delete req.body.id;\n            esquema = new Spic(req.body);\n            _context10.next = 24;\n            return esquema.save();\n\n          case 24:\n            result = _context10.sent;\n            objResponse = {};\n            objResponse[\"results\"] = result;\n            bitacora = [];\n            bitacora[\"tipoOperacion\"] = \"CREATE\";\n            bitacora[\"fechaOperacion\"] = moment__WEBPACK_IMPORTED_MODULE_10___default()().format();\n            bitacora[\"usuario\"] = usuario;\n            bitacora[\"numeroRegistros\"] = 1;\n            bitacora[\"sistema\"] = \"S2\";\n            registroBitacora(bitacora);\n            res.status(200).json(objResponse);\n            _context10.next = 40;\n            break;\n\n          case 37:\n            _context10.prev = 37;\n            _context10.t0 = _context10[\"catch\"](18);\n            console.log(_context10.t0);\n\n          case 40:\n            _context10.next = 43;\n            break;\n\n          case 42:\n            res.status(400).json({\n              message: \"Error in validation\",\n              Status: 400,\n              response: respuesta\n            });\n\n          case 43:\n            _context10.next = 48;\n            break;\n\n          case 45:\n            _context10.prev = 45;\n            _context10.t1 = _context10[\"catch\"](0);\n            console.log(_context10.t1);\n\n          case 48:\n          case \"end\":\n            return _context10.stop();\n        }\n      }\n    }, _callee10, null, [[0, 45], [18, 37]]);\n  }));\n\n  return function (_x23, _x24) {\n    return _ref10.apply(this, arguments);\n  };\n}());\napp.post('/listSchemaS2', /*#__PURE__*/function () {\n  var _ref11 = _asyncToGenerator( /*#__PURE__*/regenerator_runtime__WEBPACK_IMPORTED_MODULE_11___default.a.mark(function _callee11(req, res) {\n    var code, Spic, sortObj, page, pageSize, query, paginationResult, objpagination, objresults, objResponse;\n    return regenerator_runtime__WEBPACK_IMPORTED_MODULE_11___default.a.wrap(function _callee11$(_context11) {\n      while (1) {\n        switch (_context11.prev = _context11.next) {\n          case 0:\n            _context11.prev = 0;\n            code = validateToken(req);\n\n            if (!(code.code == 401)) {\n              _context11.next = 6;\n              break;\n            }\n\n            res.status(401).json({\n              code: '401',\n              message: code.message\n            });\n            _context11.next = 22;\n            break;\n\n          case 6:\n            if (!(code.code == 200)) {\n              _context11.next = 22;\n              break;\n            }\n\n            Spic = S2.model('Spic', _schemas_model_s2__WEBPACK_IMPORTED_MODULE_6__[\"spicSchema\"], 'spic');\n            sortObj = req.body.sort === undefined ? {} : req.body.sort;\n            page = req.body.page === undefined ? 1 : req.body.page; //numero de pagina a mostrar\n\n            pageSize = req.body.pageSize === undefined ? 10 : req.body.pageSize;\n            query = req.body.query === undefined ? {} : req.body.query;\n            console.log({\n              page: page,\n              limit: pageSize,\n              sort: sortObj,\n              query: query\n            });\n            _context11.next = 15;\n            return Spic.paginate(query, {\n              page: page,\n              limit: pageSize,\n              sort: sortObj\n            }).then();\n\n          case 15:\n            paginationResult = _context11.sent;\n            objpagination = {\n              hasNextPage: paginationResult.hasNextPage,\n              page: paginationResult.page,\n              pageSize: paginationResult.limit,\n              totalRows: paginationResult.totalDocs\n            };\n            objresults = paginationResult.docs;\n            objResponse = {};\n            objResponse[\"pagination\"] = objpagination;\n            objResponse[\"results\"] = objresults;\n            res.status(200).json(objResponse);\n\n          case 22:\n            _context11.next = 26;\n            break;\n\n          case 24:\n            _context11.prev = 24;\n            _context11.t0 = _context11[\"catch\"](0);\n\n          case 26:\n          case \"end\":\n            return _context11.stop();\n        }\n      }\n    }, _callee11, null, [[0, 24]]);\n  }));\n\n  return function (_x25, _x26) {\n    return _ref11.apply(this, arguments);\n  };\n}());\napp.delete('/deleteRecordS2', /*#__PURE__*/function () {\n  var _ref12 = _asyncToGenerator( /*#__PURE__*/regenerator_runtime__WEBPACK_IMPORTED_MODULE_11___default.a.mark(function _callee12(req, res) {\n    var code, bitacora, Spic, deletedRecord;\n    return regenerator_runtime__WEBPACK_IMPORTED_MODULE_11___default.a.wrap(function _callee12$(_context12) {\n      while (1) {\n        switch (_context12.prev = _context12.next) {\n          case 0:\n            _context12.prev = 0;\n            code = validateToken(req);\n            bitacora = [];\n\n            if (!(code.code == 401)) {\n              _context12.next = 7;\n              break;\n            }\n\n            res.status(401).json({\n              code: '401',\n              message: code.message\n            });\n            _context12.next = 23;\n            break;\n\n          case 7:\n            if (!(code.code == 200)) {\n              _context12.next = 23;\n              break;\n            }\n\n            if (!req.body.request._id) {\n              _context12.next = 22;\n              break;\n            }\n\n            Spic = S2.model('Spic', _schemas_model_s2__WEBPACK_IMPORTED_MODULE_6__[\"spicSchema\"], 'spic');\n            _context12.next = 12;\n            return Spic.findByIdAndDelete(req.body.request._id).catch(function (err) {\n              return res.status(400).json({\n                message: err.message,\n                code: '400'\n              });\n            }).then();\n\n          case 12:\n            deletedRecord = _context12.sent;\n            bitacora[\"tipoOperacion\"] = \"DELETE\";\n            bitacora[\"fechaOperacion\"] = moment__WEBPACK_IMPORTED_MODULE_10___default()().format();\n            bitacora[\"usuario\"] = req.body.request.usuario;\n            bitacora[\"numeroRegistros\"] = 1;\n            bitacora[\"sistema\"] = \"S2\";\n            registroBitacora(bitacora);\n            res.status(200).json({\n              message: \"OK\",\n              Status: 200,\n              response: deletedRecord\n            });\n            _context12.next = 23;\n            break;\n\n          case 22:\n            res.status(500).json({\n              message: \"Datos incompletos\",\n              code: '500'\n            });\n\n          case 23:\n            _context12.next = 28;\n            break;\n\n          case 25:\n            _context12.prev = 25;\n            _context12.t0 = _context12[\"catch\"](0);\n            console.log(_context12.t0);\n\n          case 28:\n          case \"end\":\n            return _context12.stop();\n        }\n      }\n    }, _callee12, null, [[0, 25]]);\n  }));\n\n  return function (_x27, _x28) {\n    return _ref12.apply(this, arguments);\n  };\n}());\napp.post('/updateS2Schema', /*#__PURE__*/function () {\n  var _ref13 = _asyncToGenerator( /*#__PURE__*/regenerator_runtime__WEBPACK_IMPORTED_MODULE_11___default.a.mark(function _callee13(req, res) {\n    var code, docSend, values, errorMessage, ramoObj, ObjInstitucionDepe, objPuesto, ObjTipoProcedimiento, objSuperiorInmediato, puestoObj, fileContents, data, schemaS2, validacion, newdocument, respuesta, Spic, esquema, response, bitacora;\n    return regenerator_runtime__WEBPACK_IMPORTED_MODULE_11___default.a.wrap(function _callee13$(_context13) {\n      while (1) {\n        switch (_context13.prev = _context13.next) {\n          case 0:\n            _context13.prev = 0;\n            code = validateToken(req);\n\n            if (!(code.code == 401)) {\n              _context13.next = 6;\n              break;\n            }\n\n            res.status(401).json({\n              code: '401',\n              message: code.message\n            });\n            _context13.next = 92;\n            break;\n\n          case 6:\n            if (!(code.code == 200)) {\n              _context13.next = 92;\n              break;\n            }\n\n            docSend = {};\n            values = req.body; //validaciones\n\n            console.log(\"estamos en las validaciones \");\n            _context13.prev = 10;\n            _context13.next = 13;\n            return esquemaS2.validate(values);\n\n          case 13:\n            _context13.next = 23;\n            break;\n\n          case 15:\n            _context13.prev = 15;\n            _context13.t0 = _context13[\"catch\"](10);\n            errorMessage = {};\n            errorMessage[\"errores\"] = _context13.t0.errors;\n            errorMessage[\"campo\"] = _context13.t0.path;\n            errorMessage[\"tipoError\"] = _context13.t0.type;\n            errorMessage[\"mensaje\"] = _context13.t0.message;\n            res.status(400).json(errorMessage);\n\n          case 23:\n            docSend[\"id\"] = values._id;\n\n            if (values.fechaCaptura) {\n              docSend[\"fechaCaptura\"] = values.fechaCaptura;\n            }\n\n            if (values.ejercicioFiscal) {\n              docSend[\"ejercicioFiscal\"] = values.ejercicioFiscal;\n            }\n\n            if (values.ramo) {\n              ramoObj = JSON.parse(values.ramo);\n              docSend[\"ramo\"] = {\n                clave: parseInt(ramoObj.clave),\n                valor: ramoObj.valor\n              };\n            }\n\n            if (values.nombres) {\n              docSend[\"nombres\"] = values.nombres;\n            }\n\n            if (values.primerApellido) {\n              docSend[\"primerApellido\"] = values.primerApellido;\n            }\n\n            if (values.segundoApellido) {\n              docSend[\"segundoApellido\"] = values.segundoApellido;\n            }\n\n            if (values.genero) {\n              docSend[\"genero\"] = JSON.parse(values.genero);\n            }\n\n            ObjInstitucionDepe = {};\n\n            if (values.idnombre) {\n              ObjInstitucionDepe = _objectSpread(_objectSpread({}, ObjInstitucionDepe), {}, {\n                nombre: values.idnombre\n              });\n            }\n\n            if (values.idclave) {\n              ObjInstitucionDepe = _objectSpread(_objectSpread({}, ObjInstitucionDepe), {}, {\n                clave: values.idclave\n              });\n            }\n\n            if (values.idsiglas) {\n              ObjInstitucionDepe = _objectSpread(_objectSpread({}, ObjInstitucionDepe), {}, {\n                siglas: values.idsiglas\n              });\n            }\n\n            docSend[\"institucionDependencia\"] = ObjInstitucionDepe;\n            objPuesto = {};\n\n            if (values.puestoNombre) {\n              objPuesto = _objectSpread(_objectSpread({}, objPuesto), {}, {\n                nombre: values.puestoNombre\n              });\n            }\n\n            if (values.puestoNivel) {\n              objPuesto = _objectSpread(_objectSpread({}, objPuesto), {}, {\n                nivel: values.puestoNivel\n              });\n            }\n\n            docSend[\"puesto\"] = objPuesto;\n\n            if (values.tipoArea && values.tipoArea.length > 0) {\n              docSend[\"tipoArea\"] = JSON.parse(\"[\" + values.tipoArea + \"]\");\n            }\n\n            if (values.tipoProcedimiento && values.tipoProcedimiento.length > 0) {\n              ObjTipoProcedimiento = JSON.parse(\"[\" + values.tipoProcedimiento + \"]\");\n              docSend[\"tipoProcedimiento\"] = getArrayFormatTipoProcedimiento(ObjTipoProcedimiento);\n            }\n\n            if (values.nivelResponsabilidad && values.nivelResponsabilidad.length > 0) {\n              docSend[\"nivelResponsabilidad\"] = JSON.parse(\"[\" + values.nivelResponsabilidad + \"]\");\n            }\n\n            objSuperiorInmediato = {};\n\n            if (values.sinombres) {\n              objSuperiorInmediato = _objectSpread(_objectSpread({}, objSuperiorInmediato), {}, {\n                nombres: values.sinombres\n              });\n            }\n\n            if (values.siPrimerApellido) {\n              objSuperiorInmediato = _objectSpread(_objectSpread({}, objSuperiorInmediato), {}, {\n                primerApellido: values.siPrimerApellido\n              });\n            }\n\n            if (values.siSegundoApellido) {\n              objSuperiorInmediato = _objectSpread(_objectSpread({}, objSuperiorInmediato), {}, {\n                segundoApellido: values.siSegundoApellido\n              });\n            }\n\n            puestoObj = {};\n\n            if (values.siPuestoNombre) {\n              puestoObj = _objectSpread(_objectSpread({}, puestoObj), {}, {\n                nombre: values.siPuestoNombre\n              });\n            }\n\n            if (values.siPuestoNivel) {\n              puestoObj = _objectSpread(_objectSpread({}, puestoObj), {}, {\n                nivel: values.siPuestoNivel\n              });\n            }\n\n            if (values.siPuestoNombre || values.siPuestoNivel) {\n              objSuperiorInmediato = _objectSpread(_objectSpread({}, objSuperiorInmediato), {}, {\n                puesto: puestoObj\n              });\n            }\n\n            docSend[\"superiorInmediato\"] = objSuperiorInmediato;\n            console.log(\"ya paso la validacion  \" + JSON.stringify(docSend));\n            fileContents = fs.readFileSync(path__WEBPACK_IMPORTED_MODULE_3___default.a.resolve(__dirname, '../src/resource/openapis2.yaml'), 'utf8');\n            data = yaml.safeLoad(fileContents);\n            schemaS2 = data.components.schemas.respSpic;\n            validacion = new swaggerValidator.Handler();\n            newdocument = docSend;\n            _context13.next = 60;\n            return validateSchema([newdocument], schemaS2, validacion);\n\n          case 60:\n            respuesta = _context13.sent;\n\n            if (!respuesta.valid) {\n              _context13.next = 90;\n              break;\n            }\n\n            _context13.prev = 62;\n            docSend[\"_id\"] = values._id;\n            Spic = S2.model('Spic', _schemas_model_s2__WEBPACK_IMPORTED_MODULE_6__[\"spicSchema\"], 'spic');\n            esquema = new Spic(docSend);\n\n            if (!req.body._id) {\n              _context13.next = 82;\n              break;\n            }\n\n            _context13.next = 69;\n            return Spic.findByIdAndDelete(values._id);\n\n          case 69:\n            _context13.next = 71;\n            return Spic.findByIdAndUpdate(values._id, esquema, {\n              upsert: true,\n              new: true\n            }).exec();\n\n          case 71:\n            response = _context13.sent;\n            bitacora = [];\n            bitacora[\"tipoOperacion\"] = \"UPDATE\";\n            bitacora[\"fechaOperacion\"] = moment__WEBPACK_IMPORTED_MODULE_10___default()().format();\n            bitacora[\"usuario\"] = req.body.usuario;\n            bitacora[\"numeroRegistros\"] = 1;\n            bitacora[\"sistema\"] = \"S2\";\n            registroBitacora(bitacora);\n            res.status(200).json(response);\n            _context13.next = 83;\n            break;\n\n          case 82:\n            res.status(500).json({\n              message: \"Error : Datos incompletos\",\n              Status: 500\n            });\n\n          case 83:\n            _context13.next = 88;\n            break;\n\n          case 85:\n            _context13.prev = 85;\n            _context13.t1 = _context13[\"catch\"](62);\n            console.log(_context13.t1);\n\n          case 88:\n            _context13.next = 92;\n            break;\n\n          case 90:\n            console.log(respuesta);\n            res.status(400).json({\n              message: \"Error in validation openApi\",\n              Status: 400,\n              response: respuesta\n            });\n\n          case 92:\n            _context13.next = 97;\n            break;\n\n          case 94:\n            _context13.prev = 94;\n            _context13.t2 = _context13[\"catch\"](0);\n            console.log(_context13.t2);\n\n          case 97:\n          case \"end\":\n            return _context13.stop();\n        }\n      }\n    }, _callee13, null, [[0, 94], [10, 15], [62, 85]]);\n  }));\n\n  return function (_x29, _x30) {\n    return _ref13.apply(this, arguments);\n  };\n}());\napp.post('/getProviders', /*#__PURE__*/function () {\n  var _ref14 = _asyncToGenerator( /*#__PURE__*/regenerator_runtime__WEBPACK_IMPORTED_MODULE_11___default.a.mark(function _callee14(req, res) {\n    var code, sortObj, page, pageSize, query, paginationResult, objpagination, objresults, objResponse;\n    return regenerator_runtime__WEBPACK_IMPORTED_MODULE_11___default.a.wrap(function _callee14$(_context14) {\n      while (1) {\n        switch (_context14.prev = _context14.next) {\n          case 0:\n            _context14.prev = 0;\n            code = validateToken(req);\n\n            if (!(code.code == 401)) {\n              _context14.next = 6;\n              break;\n            }\n\n            res.status(401).json({\n              code: '401',\n              message: code.message\n            });\n            _context14.next = 21;\n            break;\n\n          case 6:\n            if (!(code.code == 200)) {\n              _context14.next = 21;\n              break;\n            }\n\n            sortObj = req.body.sort === undefined ? {} : req.body.sort;\n            page = req.body.page === undefined ? 1 : req.body.page; //numero de pagina a mostrar\n\n            pageSize = req.body.pageSize === undefined ? 10 : req.body.pageSize;\n            query = req.body.query === undefined ? {} : req.body.query;\n            console.log({\n              page: page,\n              limit: pageSize,\n              sort: sortObj\n            });\n            _context14.next = 14;\n            return _schemas_model_proovedor__WEBPACK_IMPORTED_MODULE_7___default.a.paginate(query, {\n              page: page,\n              limit: pageSize,\n              sort: sortObj\n            }).then();\n\n          case 14:\n            paginationResult = _context14.sent;\n            objpagination = {\n              hasNextPage: paginationResult.hasNextPage,\n              page: paginationResult.page,\n              pageSize: paginationResult.limit,\n              totalRows: paginationResult.totalDocs\n            };\n            objresults = paginationResult.docs;\n            objResponse = {};\n            objResponse[\"pagination\"] = objpagination;\n            objResponse[\"results\"] = objresults;\n            res.status(200).json(objResponse);\n\n          case 21:\n            _context14.next = 26;\n            break;\n\n          case 23:\n            _context14.prev = 23;\n            _context14.t0 = _context14[\"catch\"](0);\n            console.log(_context14.t0);\n\n          case 26:\n          case \"end\":\n            return _context14.stop();\n        }\n      }\n    }, _callee14, null, [[0, 23]]);\n  }));\n\n  return function (_x31, _x32) {\n    return _ref14.apply(this, arguments);\n  };\n}());\napp.post('/getProvidersFull', /*#__PURE__*/function () {\n  var _ref15 = _asyncToGenerator( /*#__PURE__*/regenerator_runtime__WEBPACK_IMPORTED_MODULE_11___default.a.mark(function _callee15(req, res) {\n    var code, result, objResponse, strippedRows;\n    return regenerator_runtime__WEBPACK_IMPORTED_MODULE_11___default.a.wrap(function _callee15$(_context15) {\n      while (1) {\n        switch (_context15.prev = _context15.next) {\n          case 0:\n            _context15.prev = 0;\n            code = validateToken(req);\n\n            if (!(code.code == 401)) {\n              _context15.next = 6;\n              break;\n            }\n\n            res.status(401).json({\n              code: '401',\n              message: code.message\n            });\n            _context15.next = 15;\n            break;\n\n          case 6:\n            if (!(code.code == 200)) {\n              _context15.next = 15;\n              break;\n            }\n\n            _context15.next = 9;\n            return _schemas_model_proovedor__WEBPACK_IMPORTED_MODULE_7___default.a.find({\n              fechaBaja: null\n            }).then();\n\n          case 9:\n            result = _context15.sent;\n            objResponse = {};\n\n            try {\n              strippedRows = _.map(result, function (row) {\n                var rowExtend = _.extend({\n                  label: row.dependencia,\n                  value: row._id\n                }, row.toObject());\n\n                return rowExtend;\n              });\n            } catch (e) {\n              console.log(e);\n            }\n\n            console.log({\n              page: \"pages\",\n              limit: \"pageSize\",\n              sort: \"sortObj\"\n            });\n            objResponse[\"results\"] = strippedRows;\n            res.status(200).json(objResponse);\n\n          case 15:\n            _context15.next = 20;\n            break;\n\n          case 17:\n            _context15.prev = 17;\n            _context15.t0 = _context15[\"catch\"](0);\n            console.log(_context15.t0);\n\n          case 20:\n          case \"end\":\n            return _context15.stop();\n        }\n      }\n    }, _callee15, null, [[0, 17]]);\n  }));\n\n  return function (_x33, _x34) {\n    return _ref15.apply(this, arguments);\n  };\n}());\napp.post('/getUsersAll', /*#__PURE__*/function () {\n  var _ref16 = _asyncToGenerator( /*#__PURE__*/regenerator_runtime__WEBPACK_IMPORTED_MODULE_11___default.a.mark(function _callee16(req, res) {\n    var code, result, objResponse, strippedRows;\n    return regenerator_runtime__WEBPACK_IMPORTED_MODULE_11___default.a.wrap(function _callee16$(_context16) {\n      while (1) {\n        switch (_context16.prev = _context16.next) {\n          case 0:\n            _context16.prev = 0;\n            code = validateToken(req);\n\n            if (!(code.code == 401)) {\n              _context16.next = 6;\n              break;\n            }\n\n            res.status(401).json({\n              code: '401',\n              message: code.message\n            });\n            _context16.next = 14;\n            break;\n\n          case 6:\n            if (!(code.code == 200)) {\n              _context16.next = 14;\n              break;\n            }\n\n            _context16.next = 9;\n            return _schemas_model_user__WEBPACK_IMPORTED_MODULE_5___default.a.find();\n\n          case 9:\n            result = _context16.sent;\n            objResponse = {};\n\n            try {\n              strippedRows = _.map(result, function (row) {\n                var rowExtend = _.extend({\n                  label: row.nombre + \" \" + row.apellidoUno + \" \" + row.apellidoDos,\n                  value: row._id\n                }, row.toObject());\n\n                return rowExtend;\n              });\n            } catch (e) {\n              console.log(e);\n            }\n\n            objResponse[\"results\"] = strippedRows;\n            res.status(200).json(objResponse);\n\n          case 14:\n            _context16.next = 19;\n            break;\n\n          case 16:\n            _context16.prev = 16;\n            _context16.t0 = _context16[\"catch\"](0);\n            console.log(_context16.t0);\n\n          case 19:\n          case \"end\":\n            return _context16.stop();\n        }\n      }\n    }, _callee16, null, [[0, 16]]);\n  }));\n\n  return function (_x35, _x36) {\n    return _ref16.apply(this, arguments);\n  };\n}());\napp.post('/getCatalogs', /*#__PURE__*/function () {\n  var _ref17 = _asyncToGenerator( /*#__PURE__*/regenerator_runtime__WEBPACK_IMPORTED_MODULE_11___default.a.mark(function _callee17(req, res) {\n    var code, docType, result, objResponse, strippedRows;\n    return regenerator_runtime__WEBPACK_IMPORTED_MODULE_11___default.a.wrap(function _callee17$(_context17) {\n      while (1) {\n        switch (_context17.prev = _context17.next) {\n          case 0:\n            _context17.prev = 0;\n            code = validateToken(req);\n            docType = req.body.docType;\n\n            if (!(code.code == 401)) {\n              _context17.next = 7;\n              break;\n            }\n\n            res.status(401).json({\n              code: '401',\n              message: code.message\n            });\n            _context17.next = 15;\n            break;\n\n          case 7:\n            if (!(code.code == 200)) {\n              _context17.next = 15;\n              break;\n            }\n\n            _context17.next = 10;\n            return _schemas_model_catalog__WEBPACK_IMPORTED_MODULE_8___default.a.find({\n              docType: docType\n            }).then();\n\n          case 10:\n            result = _context17.sent;\n            objResponse = {};\n\n            if (docType === \"genero\" || docType === \"ramo\" || docType === \"tipoArea\" || docType === \"nivelResponsabilidad\" || docType === \"tipoProcedimiento\") {\n              try {\n                strippedRows = _.map(result, function (row) {\n                  var rowExtend = _.extend({\n                    label: row.valor,\n                    value: JSON.stringify({\n                      clave: row.clave,\n                      valor: row.valor\n                    })\n                  }, row.toObject());\n\n                  return rowExtend;\n                });\n              } catch (e) {\n                console.log(e);\n              }\n            } else if (docType === \"puesto\") {\n              try {\n                strippedRows = _.map(result, function (row) {\n                  var rowExtend = _.extend({\n                    label: row.nombre,\n                    value: row.nivel\n                  }, row.toObject());\n\n                  return rowExtend;\n                });\n              } catch (e) {\n                console.log(e);\n              }\n            }\n\n            objResponse[\"results\"] = strippedRows;\n            res.status(200).json(objResponse);\n\n          case 15:\n            _context17.next = 20;\n            break;\n\n          case 17:\n            _context17.prev = 17;\n            _context17.t0 = _context17[\"catch\"](0);\n            console.log(_context17.t0);\n\n          case 20:\n          case \"end\":\n            return _context17.stop();\n        }\n      }\n    }, _callee17, null, [[0, 17]]);\n  }));\n\n  return function (_x37, _x38) {\n    return _ref17.apply(this, arguments);\n  };\n}());\napp.post('/getBitacora', /*#__PURE__*/function () {\n  var _ref18 = _asyncToGenerator( /*#__PURE__*/regenerator_runtime__WEBPACK_IMPORTED_MODULE_11___default.a.mark(function _callee18(req, res) {\n    var horaActual, fechaInicial, fechaFinal, objResponse, strippedRows, code, sortObj, page, pageSize, query, paginationResult, objpagination, objresults, _objResponse;\n\n    return regenerator_runtime__WEBPACK_IMPORTED_MODULE_11___default.a.wrap(function _callee18$(_context18) {\n      while (1) {\n        switch (_context18.prev = _context18.next) {\n          case 0:\n            _context18.prev = 0;\n\n            horaActual = function horaActual(horaAct) {\n              var zona = new Date().getTimezoneOffset() * 60000; //offset in milliseconds\n\n              var hora = new Date(horaAct - zona).toISOString().slice(0, -5);\n              return hora;\n            };\n\n            fechaInicial = horaActual(new Date(req.body.fechaInicial));\n            fechaFinal = horaActual(new Date(req.body.fechaFinal));\n            objResponse = {};\n            code = validateToken(req);\n\n            if (!(code.code == 401)) {\n              _context18.next = 10;\n              break;\n            }\n\n            res.status(401).json({\n              code: '401',\n              message: code.message\n            });\n            _context18.next = 46;\n            break;\n\n          case 10:\n            if (!(code.code == 200)) {\n              _context18.next = 46;\n              break;\n            }\n\n            sortObj = req.body.sort === undefined ? {} : req.body.sort;\n            page = req.body.page === undefined ? 1 : req.body.page; //numero de pagina a mostrar\n\n            pageSize = req.body.pageSize === undefined ? 10 : req.body.pageSize;\n            query = req.body.query === undefined ? {} : req.body.query;\n            console.log({\n              page: page,\n              limit: pageSize,\n              sort: sortObj\n            });\n\n            if (!(typeof req.body.sistema != \"undefined\" && typeof req.body.usuarioBitacora != \"undefined\")) {\n              _context18.next = 22;\n              break;\n            }\n\n            _context18.next = 19;\n            return _schemas_model_bitacora__WEBPACK_IMPORTED_MODULE_9___default.a.find({\n              fechaOperacion: {\n                $gte: fechaInicial,\n                $lte: fechaFinal\n              },\n              usuario: {\n                $eq: req.body.usuarioBitacora\n              },\n              sistema: {\n                $in: req.body.sistema\n              }\n            });\n\n          case 19:\n            paginationResult = _context18.sent;\n            _context18.next = 40;\n            break;\n\n          case 22:\n            if (!(typeof req.body.sistema != \"undefined\")) {\n              _context18.next = 28;\n              break;\n            }\n\n            _context18.next = 25;\n            return _schemas_model_bitacora__WEBPACK_IMPORTED_MODULE_9___default.a.find({\n              fechaOperacion: {\n                $gte: fechaInicial,\n                $lte: fechaFinal\n              },\n              sistema: {\n                $in: req.body.sistema\n              }\n            });\n\n          case 25:\n            paginationResult = _context18.sent;\n            _context18.next = 40;\n            break;\n\n          case 28:\n            if (!(typeof req.body.usuarioBitacora != \"undefined\")) {\n              _context18.next = 34;\n              break;\n            }\n\n            _context18.next = 31;\n            return _schemas_model_bitacora__WEBPACK_IMPORTED_MODULE_9___default.a.find({\n              fechaOperacion: {\n                $gte: fechaInicial,\n                $lte: fechaFinal\n              },\n              usuario: req.body.usuarioBitacora\n            });\n\n          case 31:\n            paginationResult = _context18.sent;\n            _context18.next = 40;\n            break;\n\n          case 34:\n            _context18.next = 36;\n            return _schemas_model_bitacora__WEBPACK_IMPORTED_MODULE_9___default.a.find({\n              fechaOperacion: {\n                $gte: fechaInicial,\n                $lte: fechaFinal\n              }\n            });\n\n          case 36:\n            paginationResult = _context18.sent;\n            moment__WEBPACK_IMPORTED_MODULE_10___default.a.locale('es');\n            strippedRows = _.map(paginationResult, function (row) {\n              var fecha = moment__WEBPACK_IMPORTED_MODULE_10___default()(row.fechaOperacion).format('LLLL');\n              var sistema = row.sistema;\n              var sistema_label = \"\";\n              var tipoOperacion = row.tipoOperacion;\n              var tipo = \"\";\n\n              if (sistema == \"S2\") {\n                sistema_label = \"Sistema de Servidores Públicos que Intervienen en Procedimientos de Contratación.\";\n              }\n\n              if (sistema == \"S3S\") {\n                sistema_label = \"Sistema de los Servidores Públicos Sancionados.\";\n              }\n\n              if (sistema == \"S3P\") {\n                sistema_label = \"Sistema de los Particulares Sancionados.\";\n              }\n\n              if (tipoOperacion == \"CREATE\") {\n                tipo = \"Alta\";\n              }\n\n              if (tipoOperacion == \"DELETE\") {\n                tipo = \"Eliminación\";\n              }\n\n              if (tipoOperacion == \"UPDATE\") {\n                tipo = \"Actualización\";\n              }\n\n              if (tipoOperacion == \"READ\") {\n                tipo = \"Consulta\";\n              }\n\n              var rowExtend = _.extend({\n                fecha: fecha,\n                tipo: tipo,\n                sistema_label: sistema_label\n              }, row.toObject());\n\n              return rowExtend;\n            });\n            paginationResult[\"resultado\"] = strippedRows;\n\n          case 40:\n            objpagination = {\n              hasNextPage: paginationResult.hasNextPage,\n              page: paginationResult.page,\n              pageSize: paginationResult.limit,\n              totalRows: paginationResult.totalDocs\n            };\n            objresults = paginationResult;\n            _objResponse = {};\n            _objResponse[\"pagination\"] = objpagination;\n            _objResponse[\"results\"] = paginationResult[\"resultado\"];\n            res.status(200).json(_objResponse);\n\n          case 46:\n            _context18.next = 51;\n            break;\n\n          case 48:\n            _context18.prev = 48;\n            _context18.t0 = _context18[\"catch\"](0);\n            console.log(_context18.t0);\n\n          case 51:\n          case \"end\":\n            return _context18.stop();\n        }\n      }\n    }, _callee18, null, [[0, 48]]);\n  }));\n\n  return function (_x39, _x40) {\n    return _ref18.apply(this, arguments);\n  };\n}());\n\n//# sourceURL=webpack:///./src/server/server.js?");
=======
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! express */ \"express\");\n/* harmony import */ var express__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(express__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var cors__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! cors */ \"cors\");\n/* harmony import */ var cors__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(cors__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var body_parser__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! body-parser */ \"body-parser\");\n/* harmony import */ var body_parser__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(body_parser__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! path */ \"path\");\n/* harmony import */ var path__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(path__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var yup__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! yup */ \"yup\");\n/* harmony import */ var yup__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(yup__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _schemas_model_user__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./schemas/model.user */ \"./src/server/schemas/model.user.js\");\n/* harmony import */ var _schemas_model_user__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_schemas_model_user__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _schemas_model_s2__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./schemas/model.s2 */ \"./src/server/schemas/model.s2.js\");\n/* harmony import */ var _schemas_model_s2__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_schemas_model_s2__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _schemas_model_s3s__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./schemas/model.s3s */ \"./src/server/schemas/model.s3s.js\");\n/* harmony import */ var _schemas_model_s3s__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_schemas_model_s3s__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var _schemas_model_s3p__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./schemas/model.s3p */ \"./src/server/schemas/model.s3p.js\");\n/* harmony import */ var _schemas_model_s3p__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(_schemas_model_s3p__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var _schemas_model_proovedor__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./schemas/model.proovedor */ \"./src/server/schemas/model.proovedor.js\");\n/* harmony import */ var _schemas_model_proovedor__WEBPACK_IMPORTED_MODULE_9___default = /*#__PURE__*/__webpack_require__.n(_schemas_model_proovedor__WEBPACK_IMPORTED_MODULE_9__);\n/* harmony import */ var _schemas_model_catalog__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./schemas/model.catalog */ \"./src/server/schemas/model.catalog.js\");\n/* harmony import */ var _schemas_model_catalog__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(_schemas_model_catalog__WEBPACK_IMPORTED_MODULE_10__);\n/* harmony import */ var _schemas_model_bitacora__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./schemas/model.bitacora */ \"./src/server/schemas/model.bitacora.js\");\n/* harmony import */ var _schemas_model_bitacora__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(_schemas_model_bitacora__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! moment */ \"moment\");\n/* harmony import */ var moment__WEBPACK_IMPORTED_MODULE_12___default = /*#__PURE__*/__webpack_require__.n(moment__WEBPACK_IMPORTED_MODULE_12__);\n/* harmony import */ var regenerator_runtime__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! regenerator-runtime */ \"regenerator-runtime\");\n/* harmony import */ var regenerator_runtime__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(regenerator_runtime__WEBPACK_IMPORTED_MODULE_13__);\n/* harmony import */ var console__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! console */ \"console\");\n/* harmony import */ var console__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(console__WEBPACK_IMPORTED_MODULE_14__);\n/* harmony import */ var emailjs__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! emailjs */ \"emailjs\");\n/* harmony import */ var emailjs__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(emailjs__WEBPACK_IMPORTED_MODULE_15__);\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! underscore */ \"underscore\");\n/* harmony import */ var underscore__WEBPACK_IMPORTED_MODULE_16___default = /*#__PURE__*/__webpack_require__.n(underscore__WEBPACK_IMPORTED_MODULE_16__);\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it; if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = o[Symbol.iterator](); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\n\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nvar mongoose = __webpack_require__(/*! mongoose */ \"mongoose\");\n\nvar yaml = __webpack_require__(/*! js-yaml */ \"js-yaml\");\n\nvar fs = __webpack_require__(/*! fs */ \"fs\");\n\nvar SwaggerClient = __webpack_require__(/*! swagger-client */ \"swagger-client\");\n\nvar Validator = __webpack_require__(/*! swagger-model-validator */ \"swagger-model-validator\");\n\nvar validator = new Validator(SwaggerClient);\n\nvar swaggerValidator = __webpack_require__(/*! swagger-object-validator */ \"swagger-object-validator\");\n\nvar _ = __webpack_require__(/*! underscore */ \"underscore\");\n\nvar jwt = __webpack_require__(/*! jsonwebtoken */ \"jsonwebtoken\");\n\n\n\n\n //connection mongo db\n\nconsole.log('mongodb://' + \"anmartinez\" + ':' + \"anmartinez\" + '@' + \"35.226.19.219:27017\" + '/' + \"administracionUsuarios\");\nvar db = mongoose.connect('mongodb://' + \"anmartinez\" + ':' + \"anmartinez\" + '@' + \"35.226.19.219:27017\" + '/' + \"administracionUsuarios\", {\n  useNewUrlParser: true,\n  useUnifiedTopology: true\n}).then(function () {\n  return console.log('Connect to MongoDB..');\n}).catch(function (err) {\n  return console.error('Could not connect to MongoDB..', err);\n});\nmongoose.set('useFindAndModify', false);\nvar S2 = mongoose.connection.useDb(\"S2\");\nvar S3S = mongoose.connection.useDb(\"S3_Servidores\");\nvar S3P = mongoose.connection.useDb(\"S3_Particulares\"); //let port = process.env.PORT || 7777;\n\nvar app = express__WEBPACK_IMPORTED_MODULE_0___default()();\napp.use(cors__WEBPACK_IMPORTED_MODULE_1___default()(), body_parser__WEBPACK_IMPORTED_MODULE_2___default.a.urlencoded({\n  extended: true\n}), body_parser__WEBPACK_IMPORTED_MODULE_2___default.a.json());\nvar server = app.listen(3004, function () {\n  var host = server.address().address;\n  var port = server.address().port;\n  console.log(' function cloud Server is listening at http://%s:%s', host, port);\n});\n\nfunction getArrayFormatTipoProcedimiento(array) {\n  _.each(array, function (p) {\n    p.clave = parseInt(p.clave);\n  });\n\n  return array;\n}\n\nvar validateToken = function validateToken(req) {\n  var inToken = null;\n  var auth = req.headers['authorization'];\n\n  if (auth && auth.toLowerCase().indexOf('bearer') == 0) {\n    inToken = auth.slice('bearer '.length);\n  } else if (req.body && req.body.access_token) {\n    inToken = req.body.access_token;\n  } else if (req.query && req.query.access_token) {\n    inToken = req.query.access_token;\n  } // invalid token - synchronous\n\n\n  try {\n    var decoded = jwt.verify(inToken, \"YTBGD9YjAUhkjQk9ZXcb\");\n    return {\n      code: 200,\n      message: decoded\n    };\n  } catch (err) {\n    // err\n    var error = \"\";\n\n    if (err.message === \"jwt must be provided\") {\n      error = \"Error el token de autenticación (JWT) es requerido en el header, favor de verificar\";\n    } else if (err.message === \"invalid signature\" || err.message.includes(\"Unexpected token\")) {\n      error = \"Error token inválido, el token probablemente ha sido modificado favor de verificar\";\n    } else if (err.message === \"jwt expired\") {\n      error = \"Error el token de autenticación (JWT) ha expirado, favor de enviar uno válido \";\n    } else {\n      error = err.message;\n    }\n\n    var obj = {\n      code: 401,\n      message: error\n    };\n    return obj;\n  }\n};\n\nvar esquemaS3 = yup__WEBPACK_IMPORTED_MODULE_4__[\"object\"]().shape({\n  expediente: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().matches(new RegExp('^[A-zÀ-ú-0-9 ]{1,25}$'), 'No se permiten cadenas vacías, máximo 25 caracteres').trim(),\n  idnombre: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().matches(new RegExp('^[A-zÀ-ú-0-9_\\.\\' ]{1,50}$'), 'No se permiten cadenas vacías, máximo 50 caracteres').required(\"El campo Nombres de la sección Institución Dependencia es requerido\").trim(),\n  idsiglas: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().matches(new RegExp('^[A-zÀ-ú-0-9_\\.\\' ]{1,25}$'), 'No se permiten cadenas vacías, máximo 25 caracteres ').trim(),\n  idclave: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().matches(new RegExp('^[A-zÀ-ú-0-9_\\.\\' ]{1,25}$'), 'No se permiten cadenas vacías, máximo 25 caracteres').trim(),\n  SPSnombres: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().matches(new RegExp(\"^['A-zÀ-ú-\\. ]{1,25}$\"), 'No se permiten números, ni cadenas vacías máximo 25 caracteres ').required(\"El campo Nombres de Servidor público es requerido\").trim(),\n  SPSprimerApellido: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().matches(new RegExp(\"^['A-zÀ-ú-\\. ]{1,25}$\"), 'No se permiten números, ni cadenas vacías máximo 25 caracteres').required(\"El campo Primer apellido de Servidor público es requerido\").trim(),\n  SPSsegundoApellido: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().matches(new RegExp(\"^['A-zÀ-ú-\\. ]{1,25}$\"), 'No se permiten números, ni cadenas vacías máximo 25 caracteres').trim(),\n  SPSgenero: yup__WEBPACK_IMPORTED_MODULE_4__[\"object\"](),\n  SPSpuesto: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().matches(new RegExp(\"^['A-zÀ-ú-\\. ]{1,25}$\"), 'No se permiten números, ni cadenas vacías máximo 25 caracteres').required(\"El campo Puesto de Servidor público es requerido\").trim(),\n  SPSnivel: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().matches(new RegExp('^[A-zÀ-ú-0-9_\\.\\' ]{1,25}$'), 'No se cadenas vacías, máximo 25 caracteres').trim(),\n  autoridadSancionadora: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().matches(new RegExp(\"^['A-zÀ-ú-\\. ]{1,25}$\"), 'No se permiten números, ni cadenas vacías máximo 25 caracteres').trim(),\n  tipoFalta: yup__WEBPACK_IMPORTED_MODULE_4__[\"object\"](),\n  tpfdescripcion: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().matches(new RegExp('^[A-zÀ-ú-0-9 ]{1,50}$'), 'No se permiten cadenas vacías, máximo 50 caracteres').trim(),\n  tipoSancion: yup__WEBPACK_IMPORTED_MODULE_4__[\"array\"]().min(1).required(\"Se requiere seleccionar mínimo una opción del campo Tipo sanción\"),\n  tsdescripcion: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().matches(new RegExp('^[A-zÀ-ú-0-9 ]{1,50}$'), 'No se permiten cadenas vacías, máximo 50 caracteres').trim(),\n  causaMotivoHechos: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().matches(new RegExp('^[A-zÀ-ú-0-9 ]{1,500}$'), 'No se permiten cadenas vacías, máximo 500 caracteres').required(\"El campo Causa o motivo de la sanción es requerido\").trim(),\n  resolucionURL: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().matches(/((https?):\\/\\/)?(www.)?[a-z0-9]+(\\.[a-z]{2,}){1,3}(#?\\/?[a-zA-Z0-9#]+)*\\/?(\\?[a-zA-Z0-9-_]+=[a-zA-Z0-9-%]+&?)?$/, 'Introduce una direccion de internet valida'),\n  resolucionFecha: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().required(\"El campo Fecha de resolución es requerido\"),\n  multaMonto: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().matches(new RegExp(\"^([0-9]*[.])?[0-9]+$\"), 'Solo se permiten números enteros o decimales').required(\"El campo Monto es requerido\"),\n  multaMoneda: yup__WEBPACK_IMPORTED_MODULE_4__[\"object\"]().required(\"El campo Moneda es requerido\"),\n  inhabilitacionPlazo: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().matches(new RegExp('^[A-zÀ-ú-0-9 ]*$'), 'No se permiten cadenas vacías').trim(),\n  inhabilitacionFechaInicial: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().required(\"El campo Fecha inicial de la sección  es requerido\"),\n  inhabilitacionFechaFinal: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().required(\"El campo Fecha final de la sección  es requerido\"),\n  observaciones: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().matches(new RegExp('^[A-zÀ-ú-0-9 ]{1,500}$'), 'No se permiten cadenas vacías, máximo 500 caracteres').trim(),\n  documents: yup__WEBPACK_IMPORTED_MODULE_4__[\"array\"]().of(yup__WEBPACK_IMPORTED_MODULE_4__[\"object\"]().shape({\n    docId: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"](),\n    titulo: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().required('El campo Título de la sección Documentos es requerido ').max(50, 'Máximo 50 caracteres'),\n    descripcion: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().required('El campo Descripción de la sección Documentos es requerido ').max(200, 'Máximo 200 caracteres'),\n    url: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().matches(/((https?):\\/\\/)?(www.)?[a-z0-9]+(\\.[a-z]{2,}){1,3}(#?\\/?[a-zA-Z0-9#]+)*\\/?(\\?[a-zA-Z0-9-_]+=[a-zA-Z0-9-%]+&?)?$/, 'Introduce una direccion de internet valida').required('El campo URL de la sección Documentos es requerido'),\n    fecha: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().required(\"El campo Fecha de la sección Documentos es requerido\"),\n    tipoDoc: yup__WEBPACK_IMPORTED_MODULE_4__[\"object\"]()\n  }))\n});\nvar esquemaS2 = yup__WEBPACK_IMPORTED_MODULE_4__[\"object\"]().shape({\n  ejercicioFiscal: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().matches(new RegExp('^[0-9]{4}$'), 'Debe tener 4 dígitos'),\n  ramo: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"](),\n  nombres: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().matches(new RegExp(\"^['A-zÀ-ú-\\. ]{1,25}$\"), 'no se permiten números, ni cadenas vacias ').required().trim(),\n  primerApellido: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().matches(new RegExp(\"^['A-zÀ-ú-\\. ]{1,25}$\"), 'no se permiten números, ni cadenas vacias ').required().trim(),\n  segundoApellido: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().matches(new RegExp(\"^['A-zÀ-ú-\\. ]{1,25}$\"), 'no se permiten números, ni cadenas vacias ').trim(),\n  genero: yup__WEBPACK_IMPORTED_MODULE_4__[\"object\"](),\n  idnombre: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().matches(new RegExp('^[A-zÀ-ú-0-9_\\.\\' ]{1,50}$'), 'no se permiten cadenas vacias , max 50 caracteres ').required().trim(),\n  idsiglas: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().matches(new RegExp('^[A-zÀ-ú-0-9_\\.\\' ]{1,50}$'), 'no se permiten cadenas vacias , max 50 caracteres ').trim(),\n  idclave: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().matches(new RegExp('^[A-zÀ-ú-0-9_\\.\\' ]{1,50}$'), 'no se permiten cadenas vacias , max 50 caracteres ').trim(),\n  puestoNombre: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().matches(new RegExp(\"^['A-zÀ-ú-\\. ]{1,25}$\"), 'no se permiten números, ni cadenas vacias ').trim().when('puestoNivel', function (puestoNivel) {\n    if (!puestoNivel) return yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().matches(new RegExp(\"^['A-zÀ-ú-\\. ]{1,25}$\"), 'no se permiten números, ni cadenas vacias, max 25 caracteres ').trim().required(\"Al menos un campo seccion Puesto, es requerido \");\n  }),\n  puestoNivel: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().matches(new RegExp(\"^[a-zA-Z0-9 ]{1,25}$\"), 'no se permiten números, ni cadenas vacias ').trim(),\n  tipoArea: yup__WEBPACK_IMPORTED_MODULE_4__[\"array\"](),\n  nivelResponsabilidad: yup__WEBPACK_IMPORTED_MODULE_4__[\"array\"](),\n  tipoProcedimiento: yup__WEBPACK_IMPORTED_MODULE_4__[\"array\"]().min(1).required(),\n  sinombres: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().matches(new RegExp(\"^['A-zÀ-ú-\\. ]{1,25}$\"), 'no se permiten números, ni cadenas vacias, max 25 caracteres ').trim(),\n  siPrimerApellido: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().matches(new RegExp(\"^['A-zÀ-ú-\\. ]{1,25}$\"), 'no se permiten números, ni cadenas vacias, max 25 caracteres ').trim(),\n  siSegundoApellido: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().matches(new RegExp(\"^['A-zÀ-ú-\\. ]{1,25}$\"), 'no se permiten números, ni cadenas vacias, max 25 caracteres ').trim(),\n  siPuestoNombre: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().matches(new RegExp(\"^['A-zÀ-ú-\\. ]{1,25}$\"), 'no se permiten números, ni cadenas vacias, max 25 caracteres ').trim(),\n  siPuestoNivel: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().matches(new RegExp(\"^[a-zA-Z0-9 ]{1,25}$\"), 'no se permiten números, ni cadenas vacias ').trim()\n});\nvar schemaUserCreate = yup__WEBPACK_IMPORTED_MODULE_4__[\"object\"]().shape({\n  vigenciaContrasena: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().required(),\n  fechaAlta: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().required()\n});\nvar schemaUser = yup__WEBPACK_IMPORTED_MODULE_4__[\"object\"]().shape({\n  nombre: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().matches(new RegExp(\"^['A-zÀ-ú ]*$\"), 'no se permiten números, ni cadenas vacias').required(\"El campo nombre es requerido\").trim(),\n  apellidoUno: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().matches(new RegExp('^[\\'A-zÀ-ú ]*$'), 'no se permiten números, ni cadenas vacias').required(\"El campo Primer apellido es requerido\").trim(),\n  apellidoDos: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().matches(new RegExp('^[\\'A-zÀ-ú ]*$'), 'no se permiten números, ni cadenas vacias').trim(),\n  cargo: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().matches(new RegExp('^[\\'A-zÀ-ú ]*$'), 'no se permiten números, ni cadenas vacias').required(\"El campo Cargo es requerido\").trim(),\n  correoElectronico: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().required(\"El campo Correo electrónico es requerido\").email(),\n  telefono: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().matches(new RegExp('^[0-9]{10}$'), 'Inserta un número de teléfono valido, 10 caracteres').required(\"El campo Número de teléfono es requerido\").trim(),\n  extension: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().matches(new RegExp('^[0-9]{0,10}$'), 'Inserta un número de extensión valido , maximo 10 caracteres').trim(),\n  usuario: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().matches(new RegExp('^[a-zA-Z0-9]{8,}$'), 'Inserta al menos 8 caracteres, no se permiten caracteres especiales').required(\"El campo Nombre de usuario es requerido\").trim(),\n  constrasena: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().matches(new RegExp('^(?=.*[0-9])(?=.*[!@#$%^&*()_+,.\\\\\\\\\\\\/;\\':\"-]).{8,}$'), 'Inserta al menos 8 caracteres, al menos un número, almenos un caracter especial ').required(\"El campo Contraseña es requerido\").trim(),\n  sistemas: yup__WEBPACK_IMPORTED_MODULE_4__[\"array\"]().min(1).required(\"El campo Sistemas aplicables es requerido\"),\n  proveedorDatos: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().required(\"El campo Proveedor de datos es requerido\"),\n  estatus: yup__WEBPACK_IMPORTED_MODULE_4__[\"boolean\"]().required(\"El campo Estatus es requerido\")\n});\nvar schemaProvider = yup__WEBPACK_IMPORTED_MODULE_4__[\"object\"]().shape({\n  dependencia: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().required().matches(new RegExp('^[ñáéíóúáéíóúÁÉÍÓÚa-zA-Z ]*$'), 'Inserta solamente caracteres'),\n  sistemas: yup__WEBPACK_IMPORTED_MODULE_4__[\"array\"]().min(1).required(),\n  estatus: yup__WEBPACK_IMPORTED_MODULE_4__[\"boolean\"]().required(),\n  fechaAlta: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]()\n});\n\nfunction registroBitacora(_x) {\n  return _registroBitacora.apply(this, arguments);\n}\n\nfunction _registroBitacora() {\n  _registroBitacora = _asyncToGenerator( /*#__PURE__*/regenerator_runtime__WEBPACK_IMPORTED_MODULE_13___default.a.mark(function _callee31(data) {\n    var response, nuevaBitacora;\n    return regenerator_runtime__WEBPACK_IMPORTED_MODULE_13___default.a.wrap(function _callee31$(_context31) {\n      while (1) {\n        switch (_context31.prev = _context31.next) {\n          case 0:\n            nuevaBitacora = new _schemas_model_bitacora__WEBPACK_IMPORTED_MODULE_11___default.a(data);\n            _context31.next = 3;\n            return nuevaBitacora.save();\n\n          case 3:\n            response = _context31.sent;\n\n          case 4:\n          case \"end\":\n            return _context31.stop();\n        }\n      }\n    }, _callee31);\n  }));\n  return _registroBitacora.apply(this, arguments);\n}\n\nfunction validateSchema(_x2, _x3, _x4) {\n  return _validateSchema.apply(this, arguments);\n}\n\nfunction _validateSchema() {\n  _validateSchema = _asyncToGenerator( /*#__PURE__*/regenerator_runtime__WEBPACK_IMPORTED_MODULE_13___default.a.mark(function _callee32(doc, schema, validacion) {\n    var result, objError, arrayErrors, textErrors, errors, _iterator4, _step4, error, obj, _path, _iterator5, _step5, ruta;\n\n    return regenerator_runtime__WEBPACK_IMPORTED_MODULE_13___default.a.wrap(function _callee32$(_context32) {\n      while (1) {\n        switch (_context32.prev = _context32.next) {\n          case 0:\n            _context32.next = 2;\n            return validacion.validateModel(doc, schema);\n\n          case 2:\n            result = _context32.sent;\n\n            if (!result) {\n              _context32.next = 15;\n              break;\n            }\n\n            objError = {};\n            arrayErrors = result.errorsWithStringTypes();\n\n            if (Array.isArray(doc)) {\n              objError[\"docId\"] = doc[0].id;\n            } else {\n              console.log(\"validateSchema docId\", doc.id);\n              objError[\"docId\"] = doc.id;\n            }\n\n            objError[\"valid\"] = arrayErrors.length === 0 ? true : false;\n            objError[\"errorCount\"] = arrayErrors.length;\n            errors = [];\n            _iterator4 = _createForOfIteratorHelper(arrayErrors);\n\n            try {\n              for (_iterator4.s(); !(_step4 = _iterator4.n()).done;) {\n                error = _step4.value;\n                obj = {};\n                obj[\"typeError\"] = error.errorType;\n                _path = \"\";\n                _iterator5 = _createForOfIteratorHelper(error.trace);\n\n                try {\n                  for (_iterator5.s(); !(_step5 = _iterator5.n()).done;) {\n                    ruta = _step5.value;\n                    _path = _path + ruta.stepName + \"/\";\n                  }\n                } catch (err) {\n                  _iterator5.e(err);\n                } finally {\n                  _iterator5.f();\n                }\n\n                obj[\"pathError\"] = _path;\n                errors.push(obj);\n              }\n            } catch (err) {\n              _iterator4.e(err);\n            } finally {\n              _iterator4.f();\n            }\n\n            objError[\"errors\"] = errors;\n            objError[\"errorsHumanReadable\"] = result.humanReadable();\n            return _context32.abrupt(\"return\", objError);\n\n          case 15:\n          case \"end\":\n            return _context32.stop();\n        }\n      }\n    }, _callee32);\n  }));\n  return _validateSchema.apply(this, arguments);\n}\n\napp.post('/validateSchemaS2', /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/regenerator_runtime__WEBPACK_IMPORTED_MODULE_13___default.a.mark(function _callee(req, res) {\n    var code, usuario, fileContents, data, schemaS2, validacion, newdocument, respuesta, arrayDocuments, ids, c1, _iterator, _step, doc, wasInvalid, _i, _respuesta, val, Spic, response, detailObject, bitacora;\n\n    return regenerator_runtime__WEBPACK_IMPORTED_MODULE_13___default.a.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            code = validateToken(req);\n            usuario = req.headers.usuario;\n\n            if (!(code.code == 401)) {\n              _context.next = 7;\n              break;\n            }\n\n            res.status(401).json({\n              code: '401',\n              message: code.message\n            });\n            _context.next = 77;\n            break;\n\n          case 7:\n            if (!(code.code == 200)) {\n              _context.next = 77;\n              break;\n            }\n\n            fileContents = fs.readFileSync(path__WEBPACK_IMPORTED_MODULE_3___default.a.resolve(__dirname, '../src/resource/openapis2.yaml'), 'utf8');\n            data = yaml.safeLoad(fileContents);\n            schemaS2 = data.components.schemas.respSpic;\n            validacion = new swaggerValidator.Handler();\n            newdocument = req.body;\n            respuesta = [];\n            arrayDocuments = [];\n            ids = [];\n            c1 = 1;\n\n            if (!Array.isArray(newdocument)) {\n              _context.next = 44;\n              break;\n            }\n\n            _iterator = _createForOfIteratorHelper(newdocument);\n            _context.prev = 19;\n\n            _iterator.s();\n\n          case 21:\n            if ((_step = _iterator.n()).done) {\n              _context.next = 34;\n              break;\n            }\n\n            doc = _step.value;\n            doc[\"id\"] = c1.toString();\n            c1++;\n            _context.t0 = respuesta;\n            _context.next = 28;\n            return validateSchema([doc], schemaS2, validacion);\n\n          case 28:\n            _context.t1 = _context.sent;\n\n            _context.t0.push.call(_context.t0, _context.t1);\n\n            ids.push(doc.id);\n            arrayDocuments.push(doc);\n\n          case 32:\n            _context.next = 21;\n            break;\n\n          case 34:\n            _context.next = 39;\n            break;\n\n          case 36:\n            _context.prev = 36;\n            _context.t2 = _context[\"catch\"](19);\n\n            _iterator.e(_context.t2);\n\n          case 39:\n            _context.prev = 39;\n\n            _iterator.f();\n\n            return _context.finish(39);\n\n          case 42:\n            _context.next = 52;\n            break;\n\n          case 44:\n            newdocument[\"id\"] = c1.toString();\n            c1++;\n            _context.t3 = respuesta;\n            _context.next = 49;\n            return validateSchema([newdocument], schemaS2, validacion);\n\n          case 49:\n            _context.t4 = _context.sent;\n\n            _context.t3.push.call(_context.t3, _context.t4);\n\n            arrayDocuments.push(newdocument);\n\n          case 52:\n            for (_i = 0, _respuesta = respuesta; _i < _respuesta.length; _i++) {\n              val = _respuesta[_i];\n\n              if (!val.valid) {\n                wasInvalid = true;\n              }\n            }\n\n            if (!wasInvalid) {\n              _context.next = 57;\n              break;\n            }\n\n            res.status(200).json({\n              message: \"Error : La validación no fue exitosa\",\n              Status: 500,\n              response: respuesta\n            });\n            _context.next = 77;\n            break;\n\n          case 57:\n            _context.prev = 57;\n            Spic = S2.model('Spic', _schemas_model_s2__WEBPACK_IMPORTED_MODULE_6__[\"spicSchema\"], 'spic');\n            _context.next = 61;\n            return Spic.insertMany(arrayDocuments);\n\n          case 61:\n            response = _context.sent;\n            detailObject = {};\n            detailObject[\"numeroRegistros\"] = arrayDocuments.length;\n            bitacora = [];\n            bitacora[\"tipoOperacion\"] = \"CREATE\";\n            bitacora[\"fechaOperacion\"] = moment__WEBPACK_IMPORTED_MODULE_12___default()().format();\n            bitacora[\"usuario\"] = usuario;\n            bitacora[\"numeroRegistros\"] = arrayDocuments.length;\n            bitacora[\"sistema\"] = \"S2\";\n            registroBitacora(bitacora);\n            res.status(200).json({\n              message: \"Se realizarón las inserciones correctamente\",\n              Status: 200,\n              response: response,\n              detail: detailObject\n            });\n            _context.next = 77;\n            break;\n\n          case 74:\n            _context.prev = 74;\n            _context.t5 = _context[\"catch\"](57);\n            console.log(_context.t5);\n\n          case 77:\n            _context.next = 82;\n            break;\n\n          case 79:\n            _context.prev = 79;\n            _context.t6 = _context[\"catch\"](0);\n            console.log(_context.t6);\n\n          case 82:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[0, 79], [19, 36, 39, 42], [57, 74]]);\n  }));\n\n  return function (_x5, _x6) {\n    return _ref.apply(this, arguments);\n  };\n}());\napp.post('/validateSchemaS3S', /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/regenerator_runtime__WEBPACK_IMPORTED_MODULE_13___default.a.mark(function _callee2(req, res) {\n    var code, fileContents, data, schemaResults, schemaS3S, validacion, newdocument, respuesta, arrayDocuments, ids, c1, _iterator2, _step2, doc, wasInvalid, _i2, _respuesta2, val, sancionados, response, detailObject;\n\n    return regenerator_runtime__WEBPACK_IMPORTED_MODULE_13___default.a.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.prev = 0;\n            code = validateToken(req);\n\n            if (!(code.code == 401)) {\n              _context2.next = 6;\n              break;\n            }\n\n            res.status(401).json({\n              code: '401',\n              message: code.message\n            });\n            _context2.next = 72;\n            break;\n\n          case 6:\n            if (!(code.code == 200)) {\n              _context2.next = 72;\n              break;\n            }\n\n            fileContents = fs.readFileSync(path__WEBPACK_IMPORTED_MODULE_3___default.a.resolve(__dirname, '../src/resource/openapis3s.yaml'), 'utf8');\n            data = yaml.safeLoad(fileContents);\n            schemaResults = data.components.schemas.ssancionados.properties.results;\n            schemaResults.items.properties.tipoFalta = data.components.schemas.tipoFalta;\n            schemaResults.items.properties.tipoSancion = data.components.schemas.tipoSancion;\n            schemaS3S = schemaResults;\n            validacion = new swaggerValidator.Handler();\n            newdocument = req.body;\n            respuesta = [];\n            arrayDocuments = [];\n            ids = [];\n            c1 = 1;\n\n            if (!Array.isArray(newdocument)) {\n              _context2.next = 46;\n              break;\n            }\n\n            _iterator2 = _createForOfIteratorHelper(newdocument);\n            _context2.prev = 21;\n\n            _iterator2.s();\n\n          case 23:\n            if ((_step2 = _iterator2.n()).done) {\n              _context2.next = 36;\n              break;\n            }\n\n            doc = _step2.value;\n            doc[\"id\"] = c1.toString();\n            c1++;\n            _context2.t0 = respuesta;\n            _context2.next = 30;\n            return validateSchema([doc], schemaS3S, validacion);\n\n          case 30:\n            _context2.t1 = _context2.sent;\n\n            _context2.t0.push.call(_context2.t0, _context2.t1);\n\n            ids.push(doc.id);\n            arrayDocuments.push(doc);\n\n          case 34:\n            _context2.next = 23;\n            break;\n\n          case 36:\n            _context2.next = 41;\n            break;\n\n          case 38:\n            _context2.prev = 38;\n            _context2.t2 = _context2[\"catch\"](21);\n\n            _iterator2.e(_context2.t2);\n\n          case 41:\n            _context2.prev = 41;\n\n            _iterator2.f();\n\n            return _context2.finish(41);\n\n          case 44:\n            _context2.next = 54;\n            break;\n\n          case 46:\n            newdocument[\"id\"] = c1.toString();\n            c1++;\n            _context2.t3 = respuesta;\n            _context2.next = 51;\n            return validateSchema([newdocument], schemaS3S, validacion);\n\n          case 51:\n            _context2.t4 = _context2.sent;\n\n            _context2.t3.push.call(_context2.t3, _context2.t4);\n\n            arrayDocuments.push(newdocument);\n\n          case 54:\n            for (_i2 = 0, _respuesta2 = respuesta; _i2 < _respuesta2.length; _i2++) {\n              val = _respuesta2[_i2];\n\n              if (!val.valid) {\n                wasInvalid = true;\n              }\n            }\n\n            if (!wasInvalid) {\n              _context2.next = 59;\n              break;\n            }\n\n            res.status(200).json({\n              message: \"Error : La validación no fue exitosa\",\n              Status: 500,\n              response: respuesta\n            });\n            _context2.next = 72;\n            break;\n\n          case 59:\n            _context2.prev = 59;\n            sancionados = S3S.model('Ssancionados', _schemas_model_s3s__WEBPACK_IMPORTED_MODULE_7__[\"ssancionadosSchema\"], 'ssancionados');\n            _context2.next = 63;\n            return sancionados.insertMany(arrayDocuments);\n\n          case 63:\n            response = _context2.sent;\n            detailObject = {};\n            detailObject[\"numeroRegistros\"] = arrayDocuments.length;\n            res.status(200).json({\n              message: \"Se realizarón las inserciones correctamente\",\n              Status: 200,\n              response: response,\n              detail: detailObject\n            });\n            _context2.next = 72;\n            break;\n\n          case 69:\n            _context2.prev = 69;\n            _context2.t5 = _context2[\"catch\"](59);\n            console.log(_context2.t5);\n\n          case 72:\n            _context2.next = 77;\n            break;\n\n          case 74:\n            _context2.prev = 74;\n            _context2.t6 = _context2[\"catch\"](0);\n            console.log(_context2.t6);\n\n          case 77:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2, null, [[0, 74], [21, 38, 41, 44], [59, 69]]);\n  }));\n\n  return function (_x7, _x8) {\n    return _ref2.apply(this, arguments);\n  };\n}());\napp.post('/validateSchemaS3P', /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator( /*#__PURE__*/regenerator_runtime__WEBPACK_IMPORTED_MODULE_13___default.a.mark(function _callee3(req, res) {\n    var code, fileContents, data, schemaResults, schemaS3P, validacion, newdocument, respuesta, arrayDocuments, ids, c1, _iterator3, _step3, doc, wasInvalid, _i3, _respuesta3, val, psancionados, response, detailObject;\n\n    return regenerator_runtime__WEBPACK_IMPORTED_MODULE_13___default.a.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.prev = 0;\n            code = validateToken(req);\n\n            if (!(code.code == 401)) {\n              _context3.next = 6;\n              break;\n            }\n\n            res.status(401).json({\n              code: '401',\n              message: code.message\n            });\n            _context3.next = 75;\n            break;\n\n          case 6:\n            if (!(code.code == 200)) {\n              _context3.next = 75;\n              break;\n            }\n\n            fileContents = fs.readFileSync(path__WEBPACK_IMPORTED_MODULE_3___default.a.resolve(__dirname, '../src/resource/openapis3p.yaml'), 'utf8');\n            data = yaml.safeLoad(fileContents);\n            schemaResults = data.components.schemas.resParticularesSancionados.properties.results;\n            schemaResults.items.properties.particularSancionado.properties.domicilioExtranjero.properties.pais = data.components.schemas.pais;\n            schemaResults.items.properties.tipoSancion = data.components.schemas.tipoSancion;\n            schemaS3P = schemaResults;\n            validacion = new swaggerValidator.Handler();\n            newdocument = req.body;\n            respuesta = [];\n            arrayDocuments = [];\n            ids = [];\n            c1 = 1;\n\n            if (!Array.isArray(newdocument)) {\n              _context3.next = 47;\n              break;\n            }\n\n            _iterator3 = _createForOfIteratorHelper(newdocument);\n            _context3.prev = 21;\n\n            _iterator3.s();\n\n          case 23:\n            if ((_step3 = _iterator3.n()).done) {\n              _context3.next = 37;\n              break;\n            }\n\n            doc = _step3.value;\n            doc[\"id\"] = c1.toString();\n            doc[\"fechaCaptura\"] = moment__WEBPACK_IMPORTED_MODULE_12___default()().format();\n            c1++;\n            _context3.t0 = respuesta;\n            _context3.next = 31;\n            return validateSchema([doc], schemaS3P, validacion);\n\n          case 31:\n            _context3.t1 = _context3.sent;\n\n            _context3.t0.push.call(_context3.t0, _context3.t1);\n\n            ids.push(doc.id);\n            arrayDocuments.push(doc);\n\n          case 35:\n            _context3.next = 23;\n            break;\n\n          case 37:\n            _context3.next = 42;\n            break;\n\n          case 39:\n            _context3.prev = 39;\n            _context3.t2 = _context3[\"catch\"](21);\n\n            _iterator3.e(_context3.t2);\n\n          case 42:\n            _context3.prev = 42;\n\n            _iterator3.f();\n\n            return _context3.finish(42);\n\n          case 45:\n            _context3.next = 56;\n            break;\n\n          case 47:\n            newdocument[\"id\"] = c1.toString();\n            newdocument[\"fechaCaptura\"] = moment__WEBPACK_IMPORTED_MODULE_12___default()().format();\n            c1++;\n            _context3.t3 = respuesta;\n            _context3.next = 53;\n            return validateSchema([newdocument], schemaS3P, validacion);\n\n          case 53:\n            _context3.t4 = _context3.sent;\n\n            _context3.t3.push.call(_context3.t3, _context3.t4);\n\n            arrayDocuments.push(newdocument);\n\n          case 56:\n            for (_i3 = 0, _respuesta3 = respuesta; _i3 < _respuesta3.length; _i3++) {\n              val = _respuesta3[_i3];\n\n              if (!val.valid) {\n                wasInvalid = true;\n              }\n            }\n\n            if (!wasInvalid) {\n              _context3.next = 61;\n              break;\n            }\n\n            res.status(200).json({\n              message: \"Error : La validación no fue exitosa\",\n              Status: 500,\n              response: respuesta\n            });\n            _context3.next = 75;\n            break;\n\n          case 61:\n            //se insertan\n            console.log(\"paso la validacion\");\n            _context3.prev = 62;\n            psancionados = S3P.model('Psancionados', _schemas_model_s3p__WEBPACK_IMPORTED_MODULE_8__[\"psancionadosSchema\"], 'psancionados');\n            _context3.next = 66;\n            return psancionados.insertMany(arrayDocuments);\n\n          case 66:\n            response = _context3.sent;\n            detailObject = {};\n            detailObject[\"numeroRegistros\"] = arrayDocuments.length;\n            res.status(200).json({\n              message: \"Se realizarón las inserciones correctamente\",\n              Status: 200,\n              response: response,\n              detail: detailObject\n            });\n            _context3.next = 75;\n            break;\n\n          case 72:\n            _context3.prev = 72;\n            _context3.t5 = _context3[\"catch\"](62);\n            console.log(_context3.t5);\n\n          case 75:\n            _context3.next = 80;\n            break;\n\n          case 77:\n            _context3.prev = 77;\n            _context3.t6 = _context3[\"catch\"](0);\n            console.log(_context3.t6);\n\n          case 80:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3, null, [[0, 77], [21, 39, 42, 45], [62, 72]]);\n  }));\n\n  return function (_x9, _x10) {\n    return _ref3.apply(this, arguments);\n  };\n}());\napp.delete('/deleteUser', /*#__PURE__*/function () {\n  var _ref4 = _asyncToGenerator( /*#__PURE__*/regenerator_runtime__WEBPACK_IMPORTED_MODULE_13___default.a.mark(function _callee4(req, res) {\n    var code, data, fechabaja, response;\n    return regenerator_runtime__WEBPACK_IMPORTED_MODULE_13___default.a.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            _context4.prev = 0;\n            code = validateToken(req);\n\n            if (!(code.code == 401)) {\n              _context4.next = 6;\n              break;\n            }\n\n            res.status(401).json({\n              code: '401',\n              message: code.message\n            });\n            _context4.next = 17;\n            break;\n\n          case 6:\n            if (!(code.code == 200)) {\n              _context4.next = 17;\n              break;\n            }\n\n            if (!req.body.request._id) {\n              _context4.next = 16;\n              break;\n            }\n\n            data = [];\n            fechabaja = moment__WEBPACK_IMPORTED_MODULE_12___default()().format();\n            _context4.next = 12;\n            return _schemas_model_user__WEBPACK_IMPORTED_MODULE_5___default.a.findByIdAndUpdate(req.body.request._id, {\n              $set: {\n                fechaBaja: fechabaja\n              }\n            }).exec();\n\n          case 12:\n            response = _context4.sent;\n            res.status(200).json({\n              message: \"OK\",\n              Status: 200,\n              response: response\n            });\n            _context4.next = 17;\n            break;\n\n          case 16:\n            res.status(500).json([{\n              \"Error\": \"Datos incompletos\"\n            }]);\n\n          case 17:\n            _context4.next = 22;\n            break;\n\n          case 19:\n            _context4.prev = 19;\n            _context4.t0 = _context4[\"catch\"](0);\n            console.log(_context4.t0);\n\n          case 22:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4, null, [[0, 19]]);\n  }));\n\n  return function (_x11, _x12) {\n    return _ref4.apply(this, arguments);\n  };\n}());\napp.delete('/deleteProvider', /*#__PURE__*/function () {\n  var _ref5 = _asyncToGenerator( /*#__PURE__*/regenerator_runtime__WEBPACK_IMPORTED_MODULE_13___default.a.mark(function _callee5(req, res) {\n    var code, fechabaja, response;\n    return regenerator_runtime__WEBPACK_IMPORTED_MODULE_13___default.a.wrap(function _callee5$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            _context5.prev = 0;\n            code = validateToken(req);\n\n            if (!(code.code == 401)) {\n              _context5.next = 6;\n              break;\n            }\n\n            res.status(401).json({\n              code: '401',\n              message: code.message\n            });\n            _context5.next = 16;\n            break;\n\n          case 6:\n            if (!(code.code == 200)) {\n              _context5.next = 16;\n              break;\n            }\n\n            if (!req.body.request._id) {\n              _context5.next = 15;\n              break;\n            }\n\n            fechabaja = moment__WEBPACK_IMPORTED_MODULE_12___default()().format();\n            _context5.next = 11;\n            return _schemas_model_proovedor__WEBPACK_IMPORTED_MODULE_9___default.a.findByIdAndUpdate(req.body.request._id, {\n              $set: {\n                fechaBaja: fechabaja\n              }\n            }).exec();\n\n          case 11:\n            response = _context5.sent;\n            res.status(200).json({\n              message: \"OK\",\n              Status: 200,\n              response: response\n            });\n            _context5.next = 16;\n            break;\n\n          case 15:\n            res.status(500).json({\n              message: \"Error : Datos incompletos\",\n              Status: 500\n            });\n\n          case 16:\n            _context5.next = 21;\n            break;\n\n          case 18:\n            _context5.prev = 18;\n            _context5.t0 = _context5[\"catch\"](0);\n            console.log(_context5.t0);\n\n          case 21:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    }, _callee5, null, [[0, 18]]);\n  }));\n\n  return function (_x13, _x14) {\n    return _ref5.apply(this, arguments);\n  };\n}());\napp.post('/create/provider', /*#__PURE__*/function () {\n  var _ref6 = _asyncToGenerator( /*#__PURE__*/regenerator_runtime__WEBPACK_IMPORTED_MODULE_13___default.a.mark(function _callee6(req, res) {\n    var code, nuevoProovedor, responce, errorMessage;\n    return regenerator_runtime__WEBPACK_IMPORTED_MODULE_13___default.a.wrap(function _callee6$(_context6) {\n      while (1) {\n        switch (_context6.prev = _context6.next) {\n          case 0:\n            _context6.prev = 0;\n            code = validateToken(req);\n\n            if (!(code.code == 401)) {\n              _context6.next = 6;\n              break;\n            }\n\n            res.status(401).json({\n              code: '401',\n              message: code.message\n            });\n            _context6.next = 26;\n            break;\n\n          case 6:\n            if (!(code.code == 200)) {\n              _context6.next = 26;\n              break;\n            }\n\n            _context6.prev = 7;\n            _context6.next = 10;\n            return schemaProvider.validate({\n              dependencia: req.body.dependencia,\n              sistemas: req.body.sistemas,\n              estatus: true,\n              fechaAlta: req.body.fechaAlta\n            });\n\n          case 10:\n            req.body[\"estatus\"] = true;\n            nuevoProovedor = new _schemas_model_proovedor__WEBPACK_IMPORTED_MODULE_9___default.a(req.body);\n            _context6.next = 14;\n            return nuevoProovedor.save();\n\n          case 14:\n            responce = _context6.sent;\n            res.status(200).json(responce);\n            _context6.next = 26;\n            break;\n\n          case 18:\n            _context6.prev = 18;\n            _context6.t0 = _context6[\"catch\"](7);\n            errorMessage = {};\n            errorMessage[\"errores\"] = _context6.t0.errors;\n            errorMessage[\"campo\"] = _context6.t0.path;\n            errorMessage[\"tipoError\"] = _context6.t0.type;\n            errorMessage[\"mensaje\"] = _context6.t0.message;\n            res.status(400).json(errorMessage);\n\n          case 26:\n            _context6.next = 31;\n            break;\n\n          case 28:\n            _context6.prev = 28;\n            _context6.t1 = _context6[\"catch\"](0);\n            console.log(_context6.t1);\n\n          case 31:\n          case \"end\":\n            return _context6.stop();\n        }\n      }\n    }, _callee6, null, [[0, 28], [7, 18]]);\n  }));\n\n  return function (_x15, _x16) {\n    return _ref6.apply(this, arguments);\n  };\n}());\napp.put('/edit/provider', /*#__PURE__*/function () {\n  var _ref7 = _asyncToGenerator( /*#__PURE__*/regenerator_runtime__WEBPACK_IMPORTED_MODULE_13___default.a.mark(function _callee7(req, res) {\n    var code, nuevoProovedor, responce, errorMessage;\n    return regenerator_runtime__WEBPACK_IMPORTED_MODULE_13___default.a.wrap(function _callee7$(_context7) {\n      while (1) {\n        switch (_context7.prev = _context7.next) {\n          case 0:\n            _context7.prev = 0;\n            code = validateToken(req);\n\n            if (!(code.code == 401)) {\n              _context7.next = 6;\n              break;\n            }\n\n            res.status(401).json({\n              code: '401',\n              message: code.message\n            });\n            _context7.next = 29;\n            break;\n\n          case 6:\n            if (!(code.code == 200)) {\n              _context7.next = 29;\n              break;\n            }\n\n            _context7.prev = 7;\n            _context7.next = 10;\n            return yup__WEBPACK_IMPORTED_MODULE_4__[\"object\"]().shape({\n              fechaActualizacion: yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().required()\n            }).concat(schemaProvider).validate({\n              dependencia: req.body.dependencia,\n              sistemas: req.body.sistemas,\n              estatus: req.body.estatus,\n              fechaAlta: req.body.fechaAlta,\n              fechaActualizacion: req.body.fechaActualizacion\n            });\n\n          case 10:\n            nuevoProovedor = new _schemas_model_proovedor__WEBPACK_IMPORTED_MODULE_9___default.a(req.body);\n\n            if (!req.body._id) {\n              _context7.next = 18;\n              break;\n            }\n\n            _context7.next = 14;\n            return _schemas_model_proovedor__WEBPACK_IMPORTED_MODULE_9___default.a.findByIdAndUpdate(req.body._id, nuevoProovedor).exec();\n\n          case 14:\n            responce = _context7.sent;\n            res.status(200).json(responce);\n            _context7.next = 19;\n            break;\n\n          case 18:\n            res.status(500).json({\n              message: \"Error : Datos incompletos\",\n              Status: 500\n            });\n\n          case 19:\n            _context7.next = 29;\n            break;\n\n          case 21:\n            _context7.prev = 21;\n            _context7.t0 = _context7[\"catch\"](7);\n            errorMessage = {};\n            errorMessage[\"errores\"] = _context7.t0.errors;\n            errorMessage[\"campo\"] = _context7.t0.path;\n            errorMessage[\"tipoError\"] = _context7.t0.type;\n            errorMessage[\"mensaje\"] = _context7.t0.message;\n            res.status(400).json(errorMessage);\n\n          case 29:\n            _context7.next = 34;\n            break;\n\n          case 31:\n            _context7.prev = 31;\n            _context7.t1 = _context7[\"catch\"](0);\n            console.log(_context7.t1);\n\n          case 34:\n          case \"end\":\n            return _context7.stop();\n        }\n      }\n    }, _callee7, null, [[0, 31], [7, 21]]);\n  }));\n\n  return function (_x17, _x18) {\n    return _ref7.apply(this, arguments);\n  };\n}());\napp.post('/create/user', /*#__PURE__*/function () {\n  var _ref8 = _asyncToGenerator( /*#__PURE__*/regenerator_runtime__WEBPACK_IMPORTED_MODULE_13___default.a.mark(function _callee8(req, res) {\n    var code, fechaActual, newBody, generator, password, client, message, nuevoUsuario, response, errorMessage;\n    return regenerator_runtime__WEBPACK_IMPORTED_MODULE_13___default.a.wrap(function _callee8$(_context8) {\n      while (1) {\n        switch (_context8.prev = _context8.next) {\n          case 0:\n            _context8.prev = 0;\n            code = validateToken(req);\n\n            if (!(code.code == 401)) {\n              _context8.next = 6;\n              break;\n            }\n\n            res.status(401).json({\n              code: '401',\n              message: code.message\n            });\n            _context8.next = 37;\n            break;\n\n          case 6:\n            if (!(code.code == 200)) {\n              _context8.next = 37;\n              break;\n            }\n\n            _context8.prev = 7;\n            fechaActual = moment__WEBPACK_IMPORTED_MODULE_12___default()();\n            newBody = _objectSpread(_objectSpread({}, req.body), {}, {\n              fechaAlta: fechaActual.format(),\n              vigenciaContrasena: fechaActual.add(3, 'months').format().toString(),\n              estatus: true\n            });\n            generator = __webpack_require__(/*! generate-password */ \"generate-password\");\n            password = generator.generate({\n              length: 8,\n              numbers: true,\n              symbols: true,\n              lowercase: true,\n              uppercase: true,\n              strict: true\n            });\n            _context8.next = 14;\n            return schemaUserCreate.concat(schemaUser).validate({\n              nombre: newBody.nombre,\n              apellidoUno: newBody.apellidoUno,\n              apellidoDos: newBody.apellidoDos,\n              cargo: newBody.cargo,\n              correoElectronico: newBody.correoElectronico,\n              telefono: newBody.telefono,\n              extension: newBody.extension,\n              usuario: newBody.usuario,\n              constrasena: password,\n              sistemas: newBody.sistemas,\n              proveedorDatos: newBody.proveedorDatos,\n              estatus: newBody.estatus,\n              fechaAlta: newBody.fechaAlta,\n              vigenciaContrasena: newBody.vigenciaContrasena,\n              rol: \"2\"\n            });\n\n          case 14:\n            if (newBody.passwordConfirmation) {\n              delete newBody.passwordConfirmation;\n            }\n\n            delete newBody.constrasena;\n            newBody[\"constrasena\"] = password;\n            newBody[\"contrasenaNueva\"] = true;\n            newBody[\"rol\"] = 2;\n            client = new emailjs__WEBPACK_IMPORTED_MODULE_15__[\"SMTPClient\"]({\n              user: 'soporteportalpdn@gmail.com',\n              password: 'pdndigital-2021',\n              host: 'smtp.gmail.com',\n              ssl: true\n            });\n            message = {\n              text: 'Enviamos tu nueva contraseña del portal PDN',\n              from: 'soporteportalpdn@gmail.com',\n              to: newBody.correoElectronico,\n              subject: 'Enviamos tu nueva contraseña del portal PDN',\n              attachment: [{\n                data: '<html>Buen día anexamos tu contraseña nueva para acceder al portal de la PDN. Contraseña:  <br><i><b><h3>' + password + '</h3></b></i></html>',\n                alternative: true\n              }]\n            };\n            client.send(message, function (err, message) {\n              if (err != null) {\n                res.status(200).json({\n                  message: \"Hay errores al enviar tu nueva contraseña.Ponte en contacto con el administrador.\",\n                  Status: 500\n                });\n              }\n            });\n            nuevoUsuario = new _schemas_model_user__WEBPACK_IMPORTED_MODULE_5___default.a(newBody);\n            _context8.next = 25;\n            return nuevoUsuario.save();\n\n          case 25:\n            response = _context8.sent;\n            res.status(200).json(response);\n            _context8.next = 37;\n            break;\n\n          case 29:\n            _context8.prev = 29;\n            _context8.t0 = _context8[\"catch\"](7);\n            errorMessage = {};\n            errorMessage[\"errores\"] = _context8.t0.errors;\n            errorMessage[\"campo\"] = _context8.t0.path;\n            errorMessage[\"tipoError\"] = _context8.t0.type;\n            errorMessage[\"mensaje\"] = _context8.t0.message;\n            res.status(400).json(errorMessage);\n\n          case 37:\n            _context8.next = 42;\n            break;\n\n          case 39:\n            _context8.prev = 39;\n            _context8.t1 = _context8[\"catch\"](0);\n            console.log(_context8.t1);\n\n          case 42:\n          case \"end\":\n            return _context8.stop();\n        }\n      }\n    }, _callee8, null, [[0, 39], [7, 29]]);\n  }));\n\n  return function (_x19, _x20) {\n    return _ref8.apply(this, arguments);\n  };\n}());\napp.put('/edit/user', /*#__PURE__*/function () {\n  var _ref9 = _asyncToGenerator( /*#__PURE__*/regenerator_runtime__WEBPACK_IMPORTED_MODULE_13___default.a.mark(function _callee9(req, res) {\n    var code, nuevoUsuario, response, errorMessage;\n    return regenerator_runtime__WEBPACK_IMPORTED_MODULE_13___default.a.wrap(function _callee9$(_context9) {\n      while (1) {\n        switch (_context9.prev = _context9.next) {\n          case 0:\n            _context9.prev = 0;\n            code = validateToken(req);\n\n            if (!(code.code == 401)) {\n              _context9.next = 6;\n              break;\n            }\n\n            res.status(401).json({\n              code: '401',\n              message: code.message\n            });\n            _context9.next = 29;\n            break;\n\n          case 6:\n            if (!(code.code == 200)) {\n              _context9.next = 29;\n              break;\n            }\n\n            _context9.prev = 7;\n            _context9.next = 10;\n            return schemaUser.validate({\n              nombre: req.body.nombre,\n              apellidoUno: req.body.apellidoUno,\n              apellidoDos: req.body.apellidoDos,\n              cargo: req.body.cargo,\n              correoElectronico: req.body.correoElectronico,\n              telefono: req.body.telefono,\n              extension: req.body.extension,\n              usuario: req.body.usuario,\n              constrasena: req.body.constrasena,\n              sistemas: req.body.sistemas,\n              proveedorDatos: req.body.proveedorDatos,\n              estatus: req.body.estatus\n            });\n\n          case 10:\n            nuevoUsuario = new _schemas_model_user__WEBPACK_IMPORTED_MODULE_5___default.a(req.body);\n\n            if (!req.body._id) {\n              _context9.next = 18;\n              break;\n            }\n\n            _context9.next = 14;\n            return _schemas_model_user__WEBPACK_IMPORTED_MODULE_5___default.a.findByIdAndUpdate(req.body._id, nuevoUsuario).exec();\n\n          case 14:\n            response = _context9.sent;\n            res.status(200).json(response);\n            _context9.next = 19;\n            break;\n\n          case 18:\n            res.status(500).json({\n              message: \"Error : Datos incompletos\",\n              Status: 500\n            });\n\n          case 19:\n            _context9.next = 29;\n            break;\n\n          case 21:\n            _context9.prev = 21;\n            _context9.t0 = _context9[\"catch\"](7);\n            errorMessage = {};\n            errorMessage[\"errores\"] = _context9.t0.errors;\n            errorMessage[\"campo\"] = _context9.t0.path;\n            errorMessage[\"tipoError\"] = _context9.t0.type;\n            errorMessage[\"mensaje\"] = _context9.t0.message;\n            res.status(400).json(errorMessage);\n\n          case 29:\n            _context9.next = 34;\n            break;\n\n          case 31:\n            _context9.prev = 31;\n            _context9.t1 = _context9[\"catch\"](0);\n            console.log(_context9.t1);\n\n          case 34:\n          case \"end\":\n            return _context9.stop();\n        }\n      }\n    }, _callee9, null, [[0, 31], [7, 21]]);\n  }));\n\n  return function (_x21, _x22) {\n    return _ref9.apply(this, arguments);\n  };\n}());\napp.post('/getUsers', /*#__PURE__*/function () {\n  var _ref10 = _asyncToGenerator( /*#__PURE__*/regenerator_runtime__WEBPACK_IMPORTED_MODULE_13___default.a.mark(function _callee10(req, res) {\n    var code, sortObj, page, pageSize, query, paginationResult, objpagination, objresults, objResponse;\n    return regenerator_runtime__WEBPACK_IMPORTED_MODULE_13___default.a.wrap(function _callee10$(_context10) {\n      while (1) {\n        switch (_context10.prev = _context10.next) {\n          case 0:\n            _context10.prev = 0;\n            code = validateToken(req);\n\n            if (!(code.code == 401)) {\n              _context10.next = 6;\n              break;\n            }\n\n            res.status(401).json({\n              code: '401',\n              message: code.message\n            });\n            _context10.next = 20;\n            break;\n\n          case 6:\n            if (!(code.code == 200)) {\n              _context10.next = 20;\n              break;\n            }\n\n            sortObj = req.body.sort === undefined ? {} : req.body.sort;\n            page = req.body.page === undefined ? 1 : req.body.page; //numero de pagina a mostrar\n\n            pageSize = req.body.pageSize === undefined ? 10 : req.body.pageSize;\n            query = req.body.query === undefined ? {} : req.body.query;\n            _context10.next = 13;\n            return _schemas_model_user__WEBPACK_IMPORTED_MODULE_5___default.a.paginate(query, {\n              page: page,\n              limit: pageSize,\n              sort: sortObj,\n              rol: \"2\"\n            }).then();\n\n          case 13:\n            paginationResult = _context10.sent;\n            objpagination = {\n              hasNextPage: paginationResult.hasNextPage,\n              page: paginationResult.page,\n              pageSize: paginationResult.limit,\n              totalRows: paginationResult.totalDocs\n            };\n            objresults = paginationResult.docs;\n            objResponse = {};\n            objResponse[\"pagination\"] = objpagination;\n            objResponse[\"results\"] = objresults;\n            res.status(200).json(objResponse);\n\n          case 20:\n            _context10.next = 25;\n            break;\n\n          case 22:\n            _context10.prev = 22;\n            _context10.t0 = _context10[\"catch\"](0);\n            console.log(_context10.t0);\n\n          case 25:\n          case \"end\":\n            return _context10.stop();\n        }\n      }\n    }, _callee10, null, [[0, 22]]);\n  }));\n\n  return function (_x23, _x24) {\n    return _ref10.apply(this, arguments);\n  };\n}());\napp.post('/getUsersFull', /*#__PURE__*/function () {\n  var _ref11 = _asyncToGenerator( /*#__PURE__*/regenerator_runtime__WEBPACK_IMPORTED_MODULE_13___default.a.mark(function _callee11(req, res) {\n    var code, result, objResponse;\n    return regenerator_runtime__WEBPACK_IMPORTED_MODULE_13___default.a.wrap(function _callee11$(_context11) {\n      while (1) {\n        switch (_context11.prev = _context11.next) {\n          case 0:\n            _context11.prev = 0;\n            code = validateToken(req);\n\n            if (!(code.code == 401)) {\n              _context11.next = 6;\n              break;\n            }\n\n            res.status(401).json({\n              code: '401',\n              message: code.message\n            });\n            _context11.next = 13;\n            break;\n\n          case 6:\n            if (!(code.code == 200)) {\n              _context11.next = 13;\n              break;\n            }\n\n            _context11.next = 9;\n            return _schemas_model_user__WEBPACK_IMPORTED_MODULE_5___default.a.find({\n              fechaBaja: null,\n              rol: \"2\"\n            }).then();\n\n          case 9:\n            result = _context11.sent;\n            objResponse = {};\n            objResponse[\"results\"] = result;\n            res.status(200).json(objResponse);\n\n          case 13:\n            _context11.next = 18;\n            break;\n\n          case 15:\n            _context11.prev = 15;\n            _context11.t0 = _context11[\"catch\"](0);\n            console.log(_context11.t0);\n\n          case 18:\n          case \"end\":\n            return _context11.stop();\n        }\n      }\n    }, _callee11, null, [[0, 15]]);\n  }));\n\n  return function (_x25, _x26) {\n    return _ref11.apply(this, arguments);\n  };\n}()); /////////////////////////////////////////////////////////SHEMA S2///////////////////////////////////////////\n\napp.post('/insertS2Schema', /*#__PURE__*/function () {\n  var _ref12 = _asyncToGenerator( /*#__PURE__*/regenerator_runtime__WEBPACK_IMPORTED_MODULE_13___default.a.mark(function _callee12(req, res) {\n    var code, usuario, fileContents, data, schemaS2, validacion, newdocument, respuesta, Spic, esquema, result, objResponse, bitacora;\n    return regenerator_runtime__WEBPACK_IMPORTED_MODULE_13___default.a.wrap(function _callee12$(_context12) {\n      while (1) {\n        switch (_context12.prev = _context12.next) {\n          case 0:\n            _context12.prev = 0;\n            code = validateToken(req);\n            usuario = req.body.usuario;\n            delete req.body.usuario;\n\n            if (!(code.code == 401)) {\n              _context12.next = 8;\n              break;\n            }\n\n            res.status(401).json({\n              code: '401',\n              message: code.message\n            });\n            _context12.next = 45;\n            break;\n\n          case 8:\n            if (!(code.code == 200)) {\n              _context12.next = 45;\n              break;\n            }\n\n            fileContents = fs.readFileSync(path__WEBPACK_IMPORTED_MODULE_3___default.a.resolve(__dirname, '../src/resource/openapis2.yaml'), 'utf8');\n            data = yaml.safeLoad(fileContents);\n            schemaS2 = data.components.schemas.respSpic;\n            validacion = new swaggerValidator.Handler();\n            newdocument = req.body;\n            newdocument[\"id\"] = \"FAKEID\";\n            newdocument[\"fechaCaptura\"] = moment__WEBPACK_IMPORTED_MODULE_12___default()().format();\n            _context12.next = 18;\n            return validateSchema([newdocument], schemaS2, validacion);\n\n          case 18:\n            respuesta = _context12.sent;\n\n            if (!respuesta.valid) {\n              _context12.next = 44;\n              break;\n            }\n\n            _context12.prev = 20;\n            Spic = S2.model('Spic', _schemas_model_s2__WEBPACK_IMPORTED_MODULE_6__[\"spicSchema\"], 'spic');\n            delete req.body.id;\n            esquema = new Spic(req.body);\n            _context12.next = 26;\n            return esquema.save();\n\n          case 26:\n            result = _context12.sent;\n            objResponse = {};\n            objResponse[\"results\"] = result;\n            bitacora = [];\n            bitacora[\"tipoOperacion\"] = \"CREATE\";\n            bitacora[\"fechaOperacion\"] = moment__WEBPACK_IMPORTED_MODULE_12___default()().format();\n            bitacora[\"usuario\"] = usuario;\n            bitacora[\"numeroRegistros\"] = 1;\n            bitacora[\"sistema\"] = \"S2\";\n            registroBitacora(bitacora);\n            res.status(200).json(objResponse);\n            _context12.next = 42;\n            break;\n\n          case 39:\n            _context12.prev = 39;\n            _context12.t0 = _context12[\"catch\"](20);\n            console.log(_context12.t0);\n\n          case 42:\n            _context12.next = 45;\n            break;\n\n          case 44:\n            res.status(400).json({\n              message: \"Error in validation\",\n              Status: 400,\n              response: respuesta\n            });\n\n          case 45:\n            _context12.next = 50;\n            break;\n\n          case 47:\n            _context12.prev = 47;\n            _context12.t1 = _context12[\"catch\"](0);\n            console.log(_context12.t1);\n\n          case 50:\n          case \"end\":\n            return _context12.stop();\n        }\n      }\n    }, _callee12, null, [[0, 47], [20, 39]]);\n  }));\n\n  return function (_x27, _x28) {\n    return _ref12.apply(this, arguments);\n  };\n}());\napp.post('/insertS3SSchema', /*#__PURE__*/function () {\n  var _ref13 = _asyncToGenerator( /*#__PURE__*/regenerator_runtime__WEBPACK_IMPORTED_MODULE_13___default.a.mark(function _callee13(req, res) {\n    var code, usuario, values, fileContents, data, schemaResults, schemaS3S, validacion, respuesta, sancionados, response, esquema, result, objResponse, bitacora;\n    return regenerator_runtime__WEBPACK_IMPORTED_MODULE_13___default.a.wrap(function _callee13$(_context13) {\n      while (1) {\n        switch (_context13.prev = _context13.next) {\n          case 0:\n            _context13.prev = 0;\n            code = validateToken(req);\n            usuario = req.body.usuario;\n            delete req.body.usuario;\n\n            if (!(code.code == 401)) {\n              _context13.next = 8;\n              break;\n            }\n\n            res.status(401).json({\n              code: '401',\n              message: code.message\n            });\n            _context13.next = 49;\n            break;\n\n          case 8:\n            if (!(code.code == 200)) {\n              _context13.next = 49;\n              break;\n            }\n\n            values = req.body;\n            values['fechaCaptura'] = moment__WEBPACK_IMPORTED_MODULE_12___default()().format();\n            values[\"id\"] = \"FAKEID\";\n            fileContents = fs.readFileSync(path__WEBPACK_IMPORTED_MODULE_3___default.a.resolve(__dirname, '../src/resource/openapis3s.yaml'), 'utf8');\n            data = yaml.safeLoad(fileContents);\n            schemaResults = data.components.schemas.ssancionados.properties.results;\n            schemaResults.items.properties.tipoFalta = data.components.schemas.tipoFalta;\n            schemaResults.items.properties.tipoSancion = data.components.schemas.tipoSancion;\n            schemaS3S = schemaResults;\n            validacion = new swaggerValidator.Handler();\n            _context13.next = 21;\n            return validateSchema([values], schemaS3S, validacion);\n\n          case 21:\n            respuesta = _context13.sent;\n\n            if (!respuesta.valid) {\n              _context13.next = 47;\n              break;\n            }\n\n            _context13.prev = 23;\n            sancionados = S3S.model('Ssancionados', _schemas_model_s3s__WEBPACK_IMPORTED_MODULE_7__[\"ssancionadosSchema\"], 'ssancionados');\n            delete values.id;\n            esquema = new sancionados(values);\n            _context13.next = 29;\n            return esquema.save();\n\n          case 29:\n            result = _context13.sent;\n            objResponse = {};\n            objResponse[\"results\"] = result;\n            bitacora = [];\n            bitacora[\"tipoOperacion\"] = \"CREATE\";\n            bitacora[\"fechaOperacion\"] = moment__WEBPACK_IMPORTED_MODULE_12___default()().format();\n            bitacora[\"usuario\"] = usuario;\n            bitacora[\"numeroRegistros\"] = 1;\n            bitacora[\"sistema\"] = \"S3S\";\n            registroBitacora(bitacora);\n            res.status(200).json({\n              message: \"Se realizarón las inserciones correctamente\",\n              Status: 200,\n              response: response,\n              detail: objResponse\n            });\n            _context13.next = 45;\n            break;\n\n          case 42:\n            _context13.prev = 42;\n            _context13.t0 = _context13[\"catch\"](23);\n            console.log(_context13.t0);\n\n          case 45:\n            _context13.next = 49;\n            break;\n\n          case 47:\n            console.log(respuesta);\n            res.status(400).json({\n              message: \"Error in validation openApi\",\n              Status: 400,\n              response: respuesta\n            });\n\n          case 49:\n            _context13.next = 54;\n            break;\n\n          case 51:\n            _context13.prev = 51;\n            _context13.t1 = _context13[\"catch\"](0);\n            console.log(_context13.t1);\n\n          case 54:\n          case \"end\":\n            return _context13.stop();\n        }\n      }\n    }, _callee13, null, [[0, 51], [23, 42]]);\n  }));\n\n  return function (_x29, _x30) {\n    return _ref13.apply(this, arguments);\n  };\n}()); /////////////////////////////////////////////////////////SHEMA S2///////////////////////////////////////////\n\napp.post('/insertS3PSchema', /*#__PURE__*/function () {\n  var _ref14 = _asyncToGenerator( /*#__PURE__*/regenerator_runtime__WEBPACK_IMPORTED_MODULE_13___default.a.mark(function _callee14(req, res) {\n    var code, usuario, values, fileContents, data, schemaResults, schemaS3P, validacion, respuesta, psancionados, response, esquema, result, objResponse, bitacora;\n    return regenerator_runtime__WEBPACK_IMPORTED_MODULE_13___default.a.wrap(function _callee14$(_context14) {\n      while (1) {\n        switch (_context14.prev = _context14.next) {\n          case 0:\n            _context14.prev = 0;\n            code = validateToken(req);\n            usuario = req.body.usuario;\n            delete req.body.usuario;\n\n            if (!(code.code == 401)) {\n              _context14.next = 8;\n              break;\n            }\n\n            res.status(401).json({\n              code: '401',\n              message: code.message\n            });\n            _context14.next = 50;\n            break;\n\n          case 8:\n            if (!(code.code == 200)) {\n              _context14.next = 50;\n              break;\n            }\n\n            values = req.body;\n            values['fechaCaptura'] = moment__WEBPACK_IMPORTED_MODULE_12___default()().format();\n            values[\"id\"] = \"FAKEID\";\n            fileContents = fs.readFileSync(path__WEBPACK_IMPORTED_MODULE_3___default.a.resolve(__dirname, '../src/resource/openapis3p.yaml'), 'utf8');\n            data = yaml.safeLoad(fileContents);\n            schemaResults = data.components.schemas.resParticularesSancionados.properties.results;\n            schemaResults.items.properties.particularSancionado.properties.domicilioExtranjero.properties.pais = data.components.schemas.pais;\n            schemaResults.items.properties.tipoSancion = data.components.schemas.tipoSancion;\n            schemaS3P = schemaResults;\n            validacion = new swaggerValidator.Handler();\n            _context14.next = 21;\n            return validateSchema([values], schemaS3P, validacion);\n\n          case 21:\n            respuesta = _context14.sent;\n\n            if (!respuesta.valid) {\n              _context14.next = 48;\n              break;\n            }\n\n            _context14.prev = 23;\n            psancionados = S3P.model('Psancionados', _schemas_model_s3p__WEBPACK_IMPORTED_MODULE_8__[\"psancionadosSchema\"], 'psancionados');\n            delete values.id;\n            console.log(values);\n            esquema = new psancionados(values);\n            _context14.next = 30;\n            return esquema.save();\n\n          case 30:\n            result = _context14.sent;\n            objResponse = {};\n            objResponse[\"results\"] = result;\n            bitacora = [];\n            bitacora[\"tipoOperacion\"] = \"CREATE\";\n            bitacora[\"fechaOperacion\"] = moment__WEBPACK_IMPORTED_MODULE_12___default()().format();\n            bitacora[\"usuario\"] = usuario;\n            bitacora[\"numeroRegistros\"] = 1;\n            bitacora[\"sistema\"] = \"S3P\";\n            registroBitacora(bitacora);\n            res.status(200).json({\n              message: \"Se realizarón las inserciones correctamente\",\n              Status: 200,\n              response: response,\n              detail: objResponse\n            });\n            _context14.next = 46;\n            break;\n\n          case 43:\n            _context14.prev = 43;\n            _context14.t0 = _context14[\"catch\"](23);\n            console.log(_context14.t0);\n\n          case 46:\n            _context14.next = 50;\n            break;\n\n          case 48:\n            console.log(respuesta);\n            res.status(400).json({\n              message: \"Error in validation openApi\",\n              Status: 400,\n              response: respuesta\n            });\n\n          case 50:\n            _context14.next = 55;\n            break;\n\n          case 52:\n            _context14.prev = 52;\n            _context14.t1 = _context14[\"catch\"](0);\n            console.log(_context14.t1);\n\n          case 55:\n          case \"end\":\n            return _context14.stop();\n        }\n      }\n    }, _callee14, null, [[0, 52], [23, 43]]);\n  }));\n\n  return function (_x31, _x32) {\n    return _ref14.apply(this, arguments);\n  };\n}());\napp.post('/listSchemaS3S', /*#__PURE__*/function () {\n  var _ref15 = _asyncToGenerator( /*#__PURE__*/regenerator_runtime__WEBPACK_IMPORTED_MODULE_13___default.a.mark(function _callee15(req, res) {\n    var code, sancionados, sortObj, page, pageSize, query, paginationResult, objpagination, objresults, objResponse;\n    return regenerator_runtime__WEBPACK_IMPORTED_MODULE_13___default.a.wrap(function _callee15$(_context15) {\n      while (1) {\n        switch (_context15.prev = _context15.next) {\n          case 0:\n            _context15.prev = 0;\n            code = validateToken(req);\n\n            if (!(code.code == 401)) {\n              _context15.next = 6;\n              break;\n            }\n\n            res.status(401).json({\n              code: '401',\n              message: code.message\n            });\n            _context15.next = 22;\n            break;\n\n          case 6:\n            if (!(code.code == 200)) {\n              _context15.next = 22;\n              break;\n            }\n\n            sancionados = S3S.model('Ssancionados', _schemas_model_s3s__WEBPACK_IMPORTED_MODULE_7__[\"ssancionadosSchema\"], 'ssancionados');\n            sortObj = req.body.sort === undefined ? {} : req.body.sort;\n            page = req.body.page === undefined ? 1 : req.body.page; //numero de pagina a mostrar\n\n            pageSize = req.body.pageSize === undefined ? 10 : req.body.pageSize;\n            query = req.body.query === undefined ? {} : req.body.query;\n            console.log({\n              page: page,\n              limit: pageSize,\n              sort: sortObj,\n              query: query\n            });\n            _context15.next = 15;\n            return sancionados.paginate(query, {\n              page: page,\n              limit: pageSize,\n              sort: sortObj\n            }).then();\n\n          case 15:\n            paginationResult = _context15.sent;\n            objpagination = {\n              hasNextPage: paginationResult.hasNextPage,\n              page: paginationResult.page,\n              pageSize: paginationResult.limit,\n              totalRows: paginationResult.totalDocs\n            };\n            objresults = paginationResult.docs;\n            objResponse = {};\n            objResponse[\"pagination\"] = objpagination;\n            objResponse[\"results\"] = objresults;\n            res.status(200).json(objResponse);\n\n          case 22:\n            _context15.next = 27;\n            break;\n\n          case 24:\n            _context15.prev = 24;\n            _context15.t0 = _context15[\"catch\"](0);\n            console.log(_context15.t0);\n\n          case 27:\n          case \"end\":\n            return _context15.stop();\n        }\n      }\n    }, _callee15, null, [[0, 24]]);\n  }));\n\n  return function (_x33, _x34) {\n    return _ref15.apply(this, arguments);\n  };\n}());\napp.post('/listSchemaS2', /*#__PURE__*/function () {\n  var _ref16 = _asyncToGenerator( /*#__PURE__*/regenerator_runtime__WEBPACK_IMPORTED_MODULE_13___default.a.mark(function _callee16(req, res) {\n    var code, Spic, sortObj, page, pageSize, query, paginationResult, objpagination, objresults, objResponse;\n    return regenerator_runtime__WEBPACK_IMPORTED_MODULE_13___default.a.wrap(function _callee16$(_context16) {\n      while (1) {\n        switch (_context16.prev = _context16.next) {\n          case 0:\n            _context16.prev = 0;\n            code = validateToken(req);\n\n            if (!(code.code == 401)) {\n              _context16.next = 6;\n              break;\n            }\n\n            res.status(401).json({\n              code: '401',\n              message: code.message\n            });\n            _context16.next = 22;\n            break;\n\n          case 6:\n            if (!(code.code == 200)) {\n              _context16.next = 22;\n              break;\n            }\n\n            Spic = S2.model('Spic', _schemas_model_s2__WEBPACK_IMPORTED_MODULE_6__[\"spicSchema\"], 'spic');\n            sortObj = req.body.sort === undefined ? {} : req.body.sort;\n            page = req.body.page === undefined ? 1 : req.body.page; //numero de pagina a mostrar\n\n            pageSize = req.body.pageSize === undefined ? 10 : req.body.pageSize;\n            query = req.body.query === undefined ? {} : req.body.query;\n            console.log({\n              page: page,\n              limit: pageSize,\n              sort: sortObj,\n              query: query\n            });\n            _context16.next = 15;\n            return Spic.paginate(query, {\n              page: page,\n              limit: pageSize,\n              sort: sortObj\n            }).then();\n\n          case 15:\n            paginationResult = _context16.sent;\n            objpagination = {\n              hasNextPage: paginationResult.hasNextPage,\n              page: paginationResult.page,\n              pageSize: paginationResult.limit,\n              totalRows: paginationResult.totalDocs\n            };\n            objresults = paginationResult.docs;\n            objResponse = {};\n            objResponse[\"pagination\"] = objpagination;\n            objResponse[\"results\"] = objresults;\n            res.status(200).json(objResponse);\n\n          case 22:\n            _context16.next = 26;\n            break;\n\n          case 24:\n            _context16.prev = 24;\n            _context16.t0 = _context16[\"catch\"](0);\n\n          case 26:\n          case \"end\":\n            return _context16.stop();\n        }\n      }\n    }, _callee16, null, [[0, 24]]);\n  }));\n\n  return function (_x35, _x36) {\n    return _ref16.apply(this, arguments);\n  };\n}());\napp.post('/listSchemaS3P', /*#__PURE__*/function () {\n  var _ref17 = _asyncToGenerator( /*#__PURE__*/regenerator_runtime__WEBPACK_IMPORTED_MODULE_13___default.a.mark(function _callee17(req, res) {\n    var code, sancionados, sortObj, page, pageSize, query, paginationResult, objpagination, objresults, objResponse;\n    return regenerator_runtime__WEBPACK_IMPORTED_MODULE_13___default.a.wrap(function _callee17$(_context17) {\n      while (1) {\n        switch (_context17.prev = _context17.next) {\n          case 0:\n            _context17.prev = 0;\n            code = validateToken(req);\n\n            if (!(code.code == 401)) {\n              _context17.next = 6;\n              break;\n            }\n\n            res.status(401).json({\n              code: '401',\n              message: code.message\n            });\n            _context17.next = 21;\n            break;\n\n          case 6:\n            if (!(code.code == 200)) {\n              _context17.next = 21;\n              break;\n            }\n\n            sancionados = S3P.model('Psancionados', _schemas_model_s3p__WEBPACK_IMPORTED_MODULE_8__[\"psancionadosSchema\"], 'psancionados');\n            sortObj = req.body.sort === undefined ? {} : req.body.sort;\n            page = req.body.page === undefined ? 1 : req.body.page; //numero de pagina a mostrar\n\n            pageSize = req.body.pageSize === undefined ? 10 : req.body.pageSize;\n            query = req.body.query === undefined ? {} : req.body.query;\n            _context17.next = 14;\n            return sancionados.paginate(query, {\n              page: page,\n              limit: pageSize,\n              sort: sortObj\n            }).then();\n\n          case 14:\n            paginationResult = _context17.sent;\n            objpagination = {\n              hasNextPage: paginationResult.hasNextPage,\n              page: paginationResult.page,\n              pageSize: paginationResult.limit,\n              totalRows: paginationResult.totalDocs\n            };\n            objresults = paginationResult.docs;\n            objResponse = {};\n            objResponse[\"pagination\"] = objpagination;\n            objResponse[\"results\"] = objresults;\n            res.status(200).json(objResponse);\n\n          case 21:\n            _context17.next = 26;\n            break;\n\n          case 23:\n            _context17.prev = 23;\n            _context17.t0 = _context17[\"catch\"](0);\n            console.log(_context17.t0);\n\n          case 26:\n          case \"end\":\n            return _context17.stop();\n        }\n      }\n    }, _callee17, null, [[0, 23]]);\n  }));\n\n  return function (_x37, _x38) {\n    return _ref17.apply(this, arguments);\n  };\n}());\napp.delete('/deleteRecordS2', /*#__PURE__*/function () {\n  var _ref18 = _asyncToGenerator( /*#__PURE__*/regenerator_runtime__WEBPACK_IMPORTED_MODULE_13___default.a.mark(function _callee18(req, res) {\n    var code, bitacora, Spic, deletedRecord, numRecords;\n    return regenerator_runtime__WEBPACK_IMPORTED_MODULE_13___default.a.wrap(function _callee18$(_context18) {\n      while (1) {\n        switch (_context18.prev = _context18.next) {\n          case 0:\n            _context18.prev = 0;\n            code = validateToken(req);\n            bitacora = [];\n\n            if (!(code.code == 401)) {\n              _context18.next = 7;\n              break;\n            }\n\n            res.status(401).json({\n              code: '401',\n              message: code.message\n            });\n            _context18.next = 32;\n            break;\n\n          case 7:\n            if (!(code.code == 200)) {\n              _context18.next = 32;\n              break;\n            }\n\n            if (!req.body.request._id) {\n              _context18.next = 31;\n              break;\n            }\n\n            Spic = S2.model('Spic', _schemas_model_s2__WEBPACK_IMPORTED_MODULE_6__[\"spicSchema\"], 'spic');\n            numRecords = 0;\n\n            if (!Array.isArray(req.body.request._id)) {\n              _context18.next = 18;\n              break;\n            }\n\n            numRecords = req.body.request._id.length;\n            _context18.next = 15;\n            return Spic.deleteMany({\n              _id: {\n                $in: req.body.request._id\n              }\n            }).catch(function (err) {\n              return res.status(400).json({\n                message: err.message,\n                code: '400'\n              });\n            }).then();\n\n          case 15:\n            deletedRecord = _context18.sent;\n            _context18.next = 22;\n            break;\n\n          case 18:\n            numRecords = 1;\n            _context18.next = 21;\n            return Spic.findByIdAndDelete(req.body.request._id).catch(function (err) {\n              return res.status(400).json({\n                message: err.message,\n                code: '400'\n              });\n            }).then();\n\n          case 21:\n            deletedRecord = _context18.sent;\n\n          case 22:\n            bitacora[\"tipoOperacion\"] = \"DELETE\";\n            bitacora[\"fechaOperacion\"] = moment__WEBPACK_IMPORTED_MODULE_12___default()().format();\n            bitacora[\"usuario\"] = req.body.request.usuario;\n            bitacora[\"numeroRegistros\"] = numRecords;\n            bitacora[\"sistema\"] = \"S2\";\n            registroBitacora(bitacora);\n            res.status(200).json({\n              message: \"OK\",\n              Status: 200,\n              response: deletedRecord,\n              messageFront: \"Se eliminaron \" + numRecords + \" registros correctamente \"\n            });\n            _context18.next = 32;\n            break;\n\n          case 31:\n            res.status(500).json({\n              message: \"Datos incompletos\",\n              code: '500'\n            });\n\n          case 32:\n            _context18.next = 37;\n            break;\n\n          case 34:\n            _context18.prev = 34;\n            _context18.t0 = _context18[\"catch\"](0);\n            console.log(_context18.t0);\n\n          case 37:\n          case \"end\":\n            return _context18.stop();\n        }\n      }\n    }, _callee18, null, [[0, 34]]);\n  }));\n\n  return function (_x39, _x40) {\n    return _ref18.apply(this, arguments);\n  };\n}());\napp.delete('/deleteRecordS3S', /*#__PURE__*/function () {\n  var _ref19 = _asyncToGenerator( /*#__PURE__*/regenerator_runtime__WEBPACK_IMPORTED_MODULE_13___default.a.mark(function _callee19(req, res) {\n    var code, bitacora, sancionados, deletedRecord, numRecords;\n    return regenerator_runtime__WEBPACK_IMPORTED_MODULE_13___default.a.wrap(function _callee19$(_context19) {\n      while (1) {\n        switch (_context19.prev = _context19.next) {\n          case 0:\n            _context19.prev = 0;\n            code = validateToken(req);\n            bitacora = [];\n\n            if (!(code.code == 401)) {\n              _context19.next = 7;\n              break;\n            }\n\n            res.status(401).json({\n              code: '401',\n              message: code.message\n            });\n            _context19.next = 32;\n            break;\n\n          case 7:\n            if (!(code.code == 200)) {\n              _context19.next = 32;\n              break;\n            }\n\n            if (!req.body.request._id) {\n              _context19.next = 31;\n              break;\n            }\n\n            sancionados = S3S.model('Ssancionados', _schemas_model_s3s__WEBPACK_IMPORTED_MODULE_7__[\"ssancionadosSchema\"], 'ssancionados');\n            numRecords = 0;\n\n            if (!Array.isArray(req.body.request._id)) {\n              _context19.next = 18;\n              break;\n            }\n\n            numRecords = req.body.request._id.length;\n            _context19.next = 15;\n            return sancionados.deleteMany({\n              _id: {\n                $in: req.body.request._id\n              }\n            }).catch(function (err) {\n              return res.status(400).json({\n                message: err.message,\n                code: '400'\n              });\n            }).then();\n\n          case 15:\n            deletedRecord = _context19.sent;\n            _context19.next = 22;\n            break;\n\n          case 18:\n            numRecords = 1;\n            _context19.next = 21;\n            return sancionados.findByIdAndDelete(req.body.request._id).catch(function (err) {\n              return res.status(400).json({\n                message: err.message,\n                code: '400'\n              });\n            }).then();\n\n          case 21:\n            deletedRecord = _context19.sent;\n\n          case 22:\n            bitacora[\"tipoOperacion\"] = \"DELETE\";\n            bitacora[\"fechaOperacion\"] = moment__WEBPACK_IMPORTED_MODULE_12___default()().format();\n            bitacora[\"usuario\"] = req.body.request.usuario;\n            bitacora[\"numeroRegistros\"] = numRecords;\n            bitacora[\"sistema\"] = \"S3S\";\n            registroBitacora(bitacora);\n            res.status(200).json({\n              message: \"OK\",\n              Status: 200,\n              response: deletedRecord,\n              messageFront: \"Se eliminaron \" + numRecords + \" registros correctamente \"\n            });\n            _context19.next = 32;\n            break;\n\n          case 31:\n            res.status(500).json({\n              message: \"Datos incompletos\",\n              code: '500'\n            });\n\n          case 32:\n            _context19.next = 37;\n            break;\n\n          case 34:\n            _context19.prev = 34;\n            _context19.t0 = _context19[\"catch\"](0);\n            console.log(_context19.t0);\n\n          case 37:\n          case \"end\":\n            return _context19.stop();\n        }\n      }\n    }, _callee19, null, [[0, 34]]);\n  }));\n\n  return function (_x41, _x42) {\n    return _ref19.apply(this, arguments);\n  };\n}());\napp.delete('/deleteRecordS3P', /*#__PURE__*/function () {\n  var _ref20 = _asyncToGenerator( /*#__PURE__*/regenerator_runtime__WEBPACK_IMPORTED_MODULE_13___default.a.mark(function _callee20(req, res) {\n    var code, bitacora, sancionados, deletedRecord, numRecords;\n    return regenerator_runtime__WEBPACK_IMPORTED_MODULE_13___default.a.wrap(function _callee20$(_context20) {\n      while (1) {\n        switch (_context20.prev = _context20.next) {\n          case 0:\n            _context20.prev = 0;\n            code = validateToken(req);\n            bitacora = [];\n\n            if (!(code.code == 401)) {\n              _context20.next = 7;\n              break;\n            }\n\n            res.status(401).json({\n              code: '401',\n              message: code.message\n            });\n            _context20.next = 32;\n            break;\n\n          case 7:\n            if (!(code.code == 200)) {\n              _context20.next = 32;\n              break;\n            }\n\n            if (!req.body.request._id) {\n              _context20.next = 31;\n              break;\n            }\n\n            sancionados = S3P.model('Psancionados', _schemas_model_s3p__WEBPACK_IMPORTED_MODULE_8__[\"psancionadosSchema\"], 'psancionados');\n            numRecords = 0;\n\n            if (!Array.isArray(req.body.request._id)) {\n              _context20.next = 18;\n              break;\n            }\n\n            numRecords = req.body.request._id.length;\n            _context20.next = 15;\n            return sancionados.deleteMany({\n              _id: {\n                $in: req.body.request._id\n              }\n            }).catch(function (err) {\n              return res.status(400).json({\n                message: err.message,\n                code: '400'\n              });\n            }).then();\n\n          case 15:\n            deletedRecord = _context20.sent;\n            _context20.next = 22;\n            break;\n\n          case 18:\n            numRecords = 1;\n            _context20.next = 21;\n            return sancionados.findByIdAndDelete(req.body.request._id).catch(function (err) {\n              return res.status(400).json({\n                message: err.message,\n                code: '400'\n              });\n            }).then();\n\n          case 21:\n            deletedRecord = _context20.sent;\n\n          case 22:\n            bitacora[\"tipoOperacion\"] = \"DELETE\";\n            bitacora[\"fechaOperacion\"] = moment__WEBPACK_IMPORTED_MODULE_12___default()().format();\n            bitacora[\"usuario\"] = req.body.request.usuario;\n            bitacora[\"numeroRegistros\"] = numRecords;\n            bitacora[\"sistema\"] = \"S3P\";\n            registroBitacora(bitacora);\n            res.status(200).json({\n              message: \"OK\",\n              Status: 200,\n              response: deletedRecord,\n              messageFront: \"Se eliminaron \" + numRecords + \" registros correctamente \"\n            });\n            _context20.next = 32;\n            break;\n\n          case 31:\n            res.status(500).json({\n              message: \"Datos incompletos\",\n              code: '500'\n            });\n\n          case 32:\n            _context20.next = 37;\n            break;\n\n          case 34:\n            _context20.prev = 34;\n            _context20.t0 = _context20[\"catch\"](0);\n            console.log(_context20.t0);\n\n          case 37:\n          case \"end\":\n            return _context20.stop();\n        }\n      }\n    }, _callee20, null, [[0, 34]]);\n  }));\n\n  return function (_x43, _x44) {\n    return _ref20.apply(this, arguments);\n  };\n}());\napp.post('/updateS3SSchema', /*#__PURE__*/function () {\n  var _ref21 = _asyncToGenerator( /*#__PURE__*/regenerator_runtime__WEBPACK_IMPORTED_MODULE_13___default.a.mark(function _callee21(req, res) {\n    var code, usuario, id, values, fileContents, data, schemaResults, schemaS3S, validacion, respuesta, sancionados, esquema, response, objResponse, bitacora;\n    return regenerator_runtime__WEBPACK_IMPORTED_MODULE_13___default.a.wrap(function _callee21$(_context21) {\n      while (1) {\n        switch (_context21.prev = _context21.next) {\n          case 0:\n            _context21.prev = 0;\n            code = validateToken(req);\n            usuario = req.body.usuario;\n            delete req.body.usuario;\n\n            if (!(code.code == 401)) {\n              _context21.next = 8;\n              break;\n            }\n\n            res.status(401).json({\n              code: '401',\n              message: code.message\n            });\n            _context21.next = 58;\n            break;\n\n          case 8:\n            if (!(code.code == 200)) {\n              _context21.next = 58;\n              break;\n            }\n\n            id = req.body._id;\n            delete req.body._id;\n            values = req.body;\n            values['fechaCaptura'] = moment__WEBPACK_IMPORTED_MODULE_12___default()().format();\n            values[\"id\"] = \"FAKEID\";\n            fileContents = fs.readFileSync(path__WEBPACK_IMPORTED_MODULE_3___default.a.resolve(__dirname, '../src/resource/openapis3s.yaml'), 'utf8');\n            data = yaml.safeLoad(fileContents);\n            schemaResults = data.components.schemas.ssancionados.properties.results;\n            schemaResults.items.properties.tipoFalta = data.components.schemas.tipoFalta;\n            schemaResults.items.properties.tipoSancion = data.components.schemas.tipoSancion;\n            schemaS3S = schemaResults;\n            validacion = new swaggerValidator.Handler();\n            _context21.next = 23;\n            return validateSchema([values], schemaS3S, validacion);\n\n          case 23:\n            respuesta = _context21.sent;\n\n            if (!respuesta.valid) {\n              _context21.next = 56;\n              break;\n            }\n\n            _context21.prev = 25;\n            values[\"_id\"] = id;\n            sancionados = S3S.model('Ssancionados', _schemas_model_s3s__WEBPACK_IMPORTED_MODULE_7__[\"ssancionadosSchema\"], 'ssancionados');\n            esquema = new sancionados(values);\n            console.log(\"IDDD\" + esquema);\n\n            if (!values._id) {\n              _context21.next = 48;\n              break;\n            }\n\n            _context21.next = 33;\n            return sancionados.findByIdAndDelete(values._id);\n\n          case 33:\n            _context21.next = 35;\n            return sancionados.findByIdAndUpdate(values._id, esquema, {\n              upsert: true,\n              new: true\n            }).exec();\n\n          case 35:\n            response = _context21.sent;\n            objResponse = {};\n            objResponse[\"results\"] = response;\n            bitacora = [];\n            bitacora[\"tipoOperacion\"] = \"UPDATE\";\n            bitacora[\"fechaOperacion\"] = moment__WEBPACK_IMPORTED_MODULE_12___default()().format();\n            bitacora[\"usuario\"] = usuario;\n            bitacora[\"numeroRegistros\"] = 1;\n            bitacora[\"sistema\"] = \"S3S\";\n            registroBitacora(bitacora);\n            res.status(200).json(response);\n            _context21.next = 49;\n            break;\n\n          case 48:\n            res.status(500).json({\n              message: \"Error : Datos incompletos\",\n              Status: 500\n            });\n\n          case 49:\n            _context21.next = 54;\n            break;\n\n          case 51:\n            _context21.prev = 51;\n            _context21.t0 = _context21[\"catch\"](25);\n            console.log(_context21.t0);\n\n          case 54:\n            _context21.next = 58;\n            break;\n\n          case 56:\n            console.log(respuesta);\n            res.status(400).json({\n              message: \"Error in validation openApi\",\n              Status: 400,\n              response: respuesta\n            });\n\n          case 58:\n            _context21.next = 63;\n            break;\n\n          case 60:\n            _context21.prev = 60;\n            _context21.t1 = _context21[\"catch\"](0);\n            console.log(_context21.t1);\n\n          case 63:\n          case \"end\":\n            return _context21.stop();\n        }\n      }\n    }, _callee21, null, [[0, 60], [25, 51]]);\n  }));\n\n  return function (_x45, _x46) {\n    return _ref21.apply(this, arguments);\n  };\n}());\napp.post('/updateS2Schema', /*#__PURE__*/function () {\n  var _ref22 = _asyncToGenerator( /*#__PURE__*/regenerator_runtime__WEBPACK_IMPORTED_MODULE_13___default.a.mark(function _callee22(req, res) {\n    var code, docSend, values, errorMessage, ramoObj, ObjInstitucionDepe, objPuesto, ObjTipoProcedimiento, objSuperiorInmediato, puestoObj, fileContents, data, schemaS2, validacion, newdocument, respuesta, Spic, esquema, response, bitacora;\n    return regenerator_runtime__WEBPACK_IMPORTED_MODULE_13___default.a.wrap(function _callee22$(_context22) {\n      while (1) {\n        switch (_context22.prev = _context22.next) {\n          case 0:\n            _context22.prev = 0;\n            code = validateToken(req);\n\n            if (!(code.code == 401)) {\n              _context22.next = 6;\n              break;\n            }\n\n            res.status(401).json({\n              code: '401',\n              validateSchmessage: code.message\n            });\n            _context22.next = 93;\n            break;\n\n          case 6:\n            if (!(code.code == 200)) {\n              _context22.next = 93;\n              break;\n            }\n\n            docSend = {};\n            values = req.body; //validaciones\n\n            console.log(\"estamos en las validaciones \");\n            _context22.prev = 10;\n            _context22.next = 13;\n            return esquemaS2.validate(values);\n\n          case 13:\n            _context22.next = 23;\n            break;\n\n          case 15:\n            _context22.prev = 15;\n            _context22.t0 = _context22[\"catch\"](10);\n            errorMessage = {};\n            errorMessage[\"errores\"] = _context22.t0.errors;\n            errorMessage[\"campo\"] = _context22.t0.path;\n            errorMessage[\"tipoError\"] = _context22.t0.type;\n            errorMessage[\"mensaje\"] = _context22.t0.message;\n            res.status(400).json(errorMessage);\n\n          case 23:\n            docSend[\"id\"] = values._id;\n            docSend['fechaCaptura'] = moment__WEBPACK_IMPORTED_MODULE_12___default()().format();\n\n            if (values.ejercicioFiscal) {\n              docSend[\"ejercicioFiscal\"] = values.ejercicioFiscal;\n            }\n\n            if (values.ramo) {\n              ramoObj = JSON.parse(values.ramo);\n              docSend[\"ramo\"] = {\n                clave: parseInt(ramoObj.clave),\n                valor: ramoObj.valor\n              };\n            }\n\n            if (values.nombres) {\n              docSend[\"nombres\"] = values.nombres;\n            }\n\n            if (values.primerApellido) {\n              docSend[\"primerApellido\"] = values.primerApellido;\n            }\n\n            if (values.segundoApellido) {\n              docSend[\"segundoApellido\"] = values.segundoApellido;\n            }\n\n            if (values.genero) {\n              docSend[\"genero\"] = JSON.parse(values.genero);\n            }\n\n            ObjInstitucionDepe = {};\n\n            if (values.idnombre) {\n              ObjInstitucionDepe = _objectSpread(_objectSpread({}, ObjInstitucionDepe), {}, {\n                nombre: values.idnombre\n              });\n            }\n\n            if (values.idclave) {\n              ObjInstitucionDepe = _objectSpread(_objectSpread({}, ObjInstitucionDepe), {}, {\n                clave: values.idclave\n              });\n            }\n\n            if (values.idsiglas) {\n              ObjInstitucionDepe = _objectSpread(_objectSpread({}, ObjInstitucionDepe), {}, {\n                siglas: values.idsiglas\n              });\n            }\n\n            docSend[\"institucionDependencia\"] = ObjInstitucionDepe;\n            objPuesto = {};\n\n            if (values.puestoNombre) {\n              objPuesto = _objectSpread(_objectSpread({}, objPuesto), {}, {\n                nombre: values.puestoNombre\n              });\n            }\n\n            if (values.puestoNivel) {\n              objPuesto = _objectSpread(_objectSpread({}, objPuesto), {}, {\n                nivel: values.puestoNivel\n              });\n            }\n\n            docSend[\"puesto\"] = objPuesto;\n\n            if (values.tipoArea && values.tipoArea.length > 0) {\n              docSend[\"tipoArea\"] = JSON.parse(\"[\" + values.tipoArea + \"]\");\n            }\n\n            if (values.tipoProcedimiento && values.tipoProcedimiento.length > 0) {\n              ObjTipoProcedimiento = JSON.parse(\"[\" + values.tipoProcedimiento + \"]\");\n              docSend[\"tipoProcedimiento\"] = getArrayFormatTipoProcedimiento(ObjTipoProcedimiento);\n            }\n\n            if (values.nivelResponsabilidad && values.nivelResponsabilidad.length > 0) {\n              docSend[\"nivelResponsabilidad\"] = JSON.parse(\"[\" + values.nivelResponsabilidad + \"]\");\n            }\n\n            objSuperiorInmediato = {};\n\n            if (values.sinombres) {\n              objSuperiorInmediato = _objectSpread(_objectSpread({}, objSuperiorInmediato), {}, {\n                nombres: values.sinombres\n              });\n            }\n\n            if (values.siPrimerApellido) {\n              objSuperiorInmediato = _objectSpread(_objectSpread({}, objSuperiorInmediato), {}, {\n                primerApellido: values.siPrimerApellido\n              });\n            }\n\n            if (values.siSegundoApellido) {\n              objSuperiorInmediato = _objectSpread(_objectSpread({}, objSuperiorInmediato), {}, {\n                segundoApellido: values.siSegundoApellido\n              });\n            }\n\n            puestoObj = {};\n\n            if (values.siPuestoNombre) {\n              puestoObj = _objectSpread(_objectSpread({}, puestoObj), {}, {\n                nombre: values.siPuestoNombre\n              });\n            }\n\n            if (values.siPuestoNivel) {\n              puestoObj = _objectSpread(_objectSpread({}, puestoObj), {}, {\n                nivel: values.siPuestoNivel\n              });\n            }\n\n            if (values.siPuestoNombre || values.siPuestoNivel) {\n              objSuperiorInmediato = _objectSpread(_objectSpread({}, objSuperiorInmediato), {}, {\n                puesto: puestoObj\n              });\n            }\n\n            docSend[\"superiorInmediato\"] = objSuperiorInmediato;\n            console.log(\"ya paso la validacion  \" + JSON.stringify(docSend));\n            fileContents = fs.readFileSync(path__WEBPACK_IMPORTED_MODULE_3___default.a.resolve(__dirname, '../src/resource/openapis2.yaml'), 'utf8');\n            data = yaml.safeLoad(fileContents);\n            schemaS2 = data.components.schemas.respSpic;\n            validacion = new swaggerValidator.Handler();\n            newdocument = docSend;\n            _context22.next = 60;\n            return validateSchema([newdocument], schemaS2, validacion);\n\n          case 60:\n            respuesta = _context22.sent;\n\n            if (!respuesta.valid) {\n              _context22.next = 91;\n              break;\n            }\n\n            _context22.prev = 62;\n            docSend[\"_id\"] = values._id;\n            Spic = S2.model('Spic', _schemas_model_s2__WEBPACK_IMPORTED_MODULE_6__[\"spicSchema\"], 'spic');\n            esquema = new Spic(docSend);\n            console.log(\"IDDD\" + esquema);\n\n            if (!req.body._id) {\n              _context22.next = 83;\n              break;\n            }\n\n            _context22.next = 70;\n            return Spic.findByIdAndDelete(values._id);\n\n          case 70:\n            _context22.next = 72;\n            return Spic.findByIdAndUpdate(values._id, esquema, {\n              upsert: true,\n              new: true\n            }).exec();\n\n          case 72:\n            response = _context22.sent;\n            bitacora = [];\n            bitacora[\"tipoOperacion\"] = \"UPDATE\";\n            bitacora[\"fechaOperacion\"] = moment__WEBPACK_IMPORTED_MODULE_12___default()().format();\n            bitacora[\"usuario\"] = req.body.usuario;\n            bitacora[\"numeroRegistros\"] = 1;\n            bitacora[\"sistema\"] = \"S2\";\n            registroBitacora(bitacora);\n            res.status(200).json(response);\n            _context22.next = 84;\n            break;\n\n          case 83:\n            res.status(500).json({\n              message: \"Error : Datos incompletos\",\n              Status: 500\n            });\n\n          case 84:\n            _context22.next = 89;\n            break;\n\n          case 86:\n            _context22.prev = 86;\n            _context22.t1 = _context22[\"catch\"](62);\n            console.log(_context22.t1);\n\n          case 89:\n            _context22.next = 93;\n            break;\n\n          case 91:\n            console.log(respuesta);\n            res.status(400).json({\n              message: \"Error in validation openApi\",\n              Status: 400,\n              response: respuesta\n            });\n\n          case 93:\n            _context22.next = 98;\n            break;\n\n          case 95:\n            _context22.prev = 95;\n            _context22.t2 = _context22[\"catch\"](0);\n            console.log(_context22.t2);\n\n          case 98:\n          case \"end\":\n            return _context22.stop();\n        }\n      }\n    }, _callee22, null, [[0, 95], [10, 15], [62, 86]]);\n  }));\n\n  return function (_x47, _x48) {\n    return _ref22.apply(this, arguments);\n  };\n}());\napp.post('/getProviders', /*#__PURE__*/function () {\n  var _ref23 = _asyncToGenerator( /*#__PURE__*/regenerator_runtime__WEBPACK_IMPORTED_MODULE_13___default.a.mark(function _callee23(req, res) {\n    var code, sortObj, page, pageSize, query, paginationResult, objpagination, objresults, objResponse;\n    return regenerator_runtime__WEBPACK_IMPORTED_MODULE_13___default.a.wrap(function _callee23$(_context23) {\n      while (1) {\n        switch (_context23.prev = _context23.next) {\n          case 0:\n            _context23.prev = 0;\n            code = validateToken(req);\n\n            if (!(code.code == 401)) {\n              _context23.next = 6;\n              break;\n            }\n\n            res.status(401).json({\n              code: '401',\n              message: code.message\n            });\n            _context23.next = 21;\n            break;\n\n          case 6:\n            if (!(code.code == 200)) {\n              _context23.next = 21;\n              break;\n            }\n\n            sortObj = req.body.sort === undefined ? {} : req.body.sort;\n            page = req.body.page === undefined ? 1 : req.body.page; //numero de pagina a mostrar\n\n            pageSize = req.body.pageSize === undefined ? 10 : req.body.pageSize;\n            query = req.body.query === undefined ? {} : req.body.query;\n            console.log({\n              page: page,\n              limit: pageSize,\n              sort: sortObj\n            });\n            _context23.next = 14;\n            return _schemas_model_proovedor__WEBPACK_IMPORTED_MODULE_9___default.a.paginate(query, {\n              page: page,\n              limit: pageSize,\n              sort: sortObj\n            }).then();\n\n          case 14:\n            paginationResult = _context23.sent;\n            objpagination = {\n              hasNextPage: paginationResult.hasNextPage,\n              page: paginationResult.page,\n              pageSize: paginationResult.limit,\n              totalRows: paginationResult.totalDocs\n            };\n            objresults = paginationResult.docs;\n            objResponse = {};\n            objResponse[\"pagination\"] = objpagination;\n            objResponse[\"results\"] = objresults;\n            res.status(200).json(objResponse);\n\n          case 21:\n            _context23.next = 26;\n            break;\n\n          case 23:\n            _context23.prev = 23;\n            _context23.t0 = _context23[\"catch\"](0);\n            console.log(_context23.t0);\n\n          case 26:\n          case \"end\":\n            return _context23.stop();\n        }\n      }\n    }, _callee23, null, [[0, 23]]);\n  }));\n\n  return function (_x49, _x50) {\n    return _ref23.apply(this, arguments);\n  };\n}());\napp.post('/getProvidersFull', /*#__PURE__*/function () {\n  var _ref24 = _asyncToGenerator( /*#__PURE__*/regenerator_runtime__WEBPACK_IMPORTED_MODULE_13___default.a.mark(function _callee24(req, res) {\n    var code, result, objResponse, strippedRows;\n    return regenerator_runtime__WEBPACK_IMPORTED_MODULE_13___default.a.wrap(function _callee24$(_context24) {\n      while (1) {\n        switch (_context24.prev = _context24.next) {\n          case 0:\n            _context24.prev = 0;\n            code = validateToken(req);\n\n            if (!(code.code == 401)) {\n              _context24.next = 6;\n              break;\n            }\n\n            res.status(401).json({\n              code: '401',\n              message: code.message\n            });\n            _context24.next = 15;\n            break;\n\n          case 6:\n            if (!(code.code == 200)) {\n              _context24.next = 15;\n              break;\n            }\n\n            _context24.next = 9;\n            return _schemas_model_proovedor__WEBPACK_IMPORTED_MODULE_9___default.a.find({\n              fechaBaja: null\n            }).then();\n\n          case 9:\n            result = _context24.sent;\n            objResponse = {};\n\n            try {\n              strippedRows = _.map(result, function (row) {\n                var rowExtend = _.extend({\n                  label: row.dependencia,\n                  value: row._id\n                }, row.toObject());\n\n                return rowExtend;\n              });\n            } catch (e) {\n              console.log(e);\n            }\n\n            console.log({\n              page: \"pages\",\n              limit: \"pageSize\",\n              sort: \"sortObj\"\n            });\n            objResponse[\"results\"] = strippedRows;\n            res.status(200).json(objResponse);\n\n          case 15:\n            _context24.next = 20;\n            break;\n\n          case 17:\n            _context24.prev = 17;\n            _context24.t0 = _context24[\"catch\"](0);\n            console.log(_context24.t0);\n\n          case 20:\n          case \"end\":\n            return _context24.stop();\n        }\n      }\n    }, _callee24, null, [[0, 17]]);\n  }));\n\n  return function (_x51, _x52) {\n    return _ref24.apply(this, arguments);\n  };\n}());\napp.post('/getUsersAll', /*#__PURE__*/function () {\n  var _ref25 = _asyncToGenerator( /*#__PURE__*/regenerator_runtime__WEBPACK_IMPORTED_MODULE_13___default.a.mark(function _callee25(req, res) {\n    var code, result, objResponse, strippedRows;\n    return regenerator_runtime__WEBPACK_IMPORTED_MODULE_13___default.a.wrap(function _callee25$(_context25) {\n      while (1) {\n        switch (_context25.prev = _context25.next) {\n          case 0:\n            _context25.prev = 0;\n            code = validateToken(req);\n\n            if (!(code.code == 401)) {\n              _context25.next = 6;\n              break;\n            }\n\n            res.status(401).json({\n              code: '401',\n              message: code.message\n            });\n            _context25.next = 14;\n            break;\n\n          case 6:\n            if (!(code.code == 200)) {\n              _context25.next = 14;\n              break;\n            }\n\n            _context25.next = 9;\n            return _schemas_model_user__WEBPACK_IMPORTED_MODULE_5___default.a.find({\n              rol: \"2\"\n            });\n\n          case 9:\n            result = _context25.sent;\n            objResponse = {};\n\n            try {\n              strippedRows = _.map(result, function (row) {\n                var rowExtend = _.extend({\n                  label: row.nombre + \" \" + row.apellidoUno + \" \" + row.apellidoDos,\n                  value: row._id\n                }, row.toObject());\n\n                return rowExtend;\n              });\n            } catch (e) {\n              console.log(e);\n            }\n\n            objResponse[\"results\"] = strippedRows;\n            res.status(200).json(objResponse);\n\n          case 14:\n            _context25.next = 19;\n            break;\n\n          case 16:\n            _context25.prev = 16;\n            _context25.t0 = _context25[\"catch\"](0);\n            console.log(_context25.t0);\n\n          case 19:\n          case \"end\":\n            return _context25.stop();\n        }\n      }\n    }, _callee25, null, [[0, 16]]);\n  }));\n\n  return function (_x53, _x54) {\n    return _ref25.apply(this, arguments);\n  };\n}());\napp.post('/getCatalogs', /*#__PURE__*/function () {\n  var _ref26 = _asyncToGenerator( /*#__PURE__*/regenerator_runtime__WEBPACK_IMPORTED_MODULE_13___default.a.mark(function _callee26(req, res) {\n    var code, docType, result, objResponse, strippedRows;\n    return regenerator_runtime__WEBPACK_IMPORTED_MODULE_13___default.a.wrap(function _callee26$(_context26) {\n      while (1) {\n        switch (_context26.prev = _context26.next) {\n          case 0:\n            _context26.prev = 0;\n            code = validateToken(req);\n            docType = req.body.docType;\n\n            if (!(code.code == 401)) {\n              _context26.next = 7;\n              break;\n            }\n\n            res.status(401).json({\n              code: '401',\n              message: code.message\n            });\n            _context26.next = 15;\n            break;\n\n          case 7:\n            if (!(code.code == 200)) {\n              _context26.next = 15;\n              break;\n            }\n\n            _context26.next = 10;\n            return _schemas_model_catalog__WEBPACK_IMPORTED_MODULE_10___default.a.find({\n              docType: docType\n            }).then();\n\n          case 10:\n            result = _context26.sent;\n            objResponse = {};\n\n            if (docType === \"genero\" || docType === \"ramo\" || docType === \"tipoArea\" || docType === \"nivelResponsabilidad\" || docType === \"tipoProcedimiento\" || docType === \"tipoFalta\" || docType === \"tipoSancion\" || docType === \"moneda\" || docType === \"tipoDocumento\" || docType === \"tipoPersona\" || docType === \"pais\" || docType === \"estado\" || docType === \"municipio\" || docType === \"vialidad\") {\n              try {\n                strippedRows = _.map(result, function (row) {\n                  var rowExtend = _.extend({\n                    label: row.valor,\n                    value: JSON.stringify({\n                      clave: row.clave,\n                      valor: row.valor\n                    })\n                  }, row.toObject());\n\n                  return rowExtend;\n                });\n              } catch (e) {\n                console.log(e);\n              }\n            } else if (docType === \"puesto\") {\n              try {\n                strippedRows = _.map(result, function (row) {\n                  var rowExtend = _.extend({\n                    label: row.nombre,\n                    value: row.nivel\n                  }, row.toObject());\n\n                  return rowExtend;\n                });\n              } catch (e) {\n                console.log(e);\n              }\n            }\n\n            objResponse[\"results\"] = strippedRows;\n            res.status(200).json(objResponse);\n\n          case 15:\n            _context26.next = 20;\n            break;\n\n          case 17:\n            _context26.prev = 17;\n            _context26.t0 = _context26[\"catch\"](0);\n            console.log(_context26.t0);\n\n          case 20:\n          case \"end\":\n            return _context26.stop();\n        }\n      }\n    }, _callee26, null, [[0, 17]]);\n  }));\n\n  return function (_x55, _x56) {\n    return _ref26.apply(this, arguments);\n  };\n}());\napp.post('/getBitacora', /*#__PURE__*/function () {\n  var _ref27 = _asyncToGenerator( /*#__PURE__*/regenerator_runtime__WEBPACK_IMPORTED_MODULE_13___default.a.mark(function _callee27(req, res) {\n    var horaActual, fechaInicial, fechaFinal, objResponse, strippedRows, code, formato, sortObj, page, pageSize, query, paginationResult, objpagination, objresults, _objResponse;\n\n    return regenerator_runtime__WEBPACK_IMPORTED_MODULE_13___default.a.wrap(function _callee27$(_context27) {\n      while (1) {\n        switch (_context27.prev = _context27.next) {\n          case 0:\n            _context27.prev = 0;\n\n            horaActual = function horaActual(horaAct) {\n              var zona = new Date().getTimezoneOffset() * 60000; //offset in milliseconds\n\n              var hora = new Date(horaAct - zona).toISOString().slice(0, -5);\n              return hora;\n            };\n\n            fechaInicial = horaActual(new Date(req.body.fechaInicial));\n            fechaFinal = horaActual(new Date(req.body.fechaFinal));\n            objResponse = {};\n\n            if (fechaInicial == \"\" || fechaFinal == \"\") {\n              res.status(500).json({\n                message: \"Error : Datos incompletos\",\n                Status: 500\n              });\n            }\n\n            code = validateToken(req);\n\n            if (!(code.code == 401)) {\n              _context27.next = 11;\n              break;\n            }\n\n            res.status(401).json({\n              code: '401',\n              message: code.message\n            });\n            _context27.next = 50;\n            break;\n\n          case 11:\n            if (!(code.code == 200)) {\n              _context27.next = 50;\n              break;\n            }\n\n            formato = function formato(paginationResult) {\n              moment__WEBPACK_IMPORTED_MODULE_12___default.a.locale('es');\n              strippedRows = _.map(paginationResult, function (row) {\n                var fecha = moment__WEBPACK_IMPORTED_MODULE_12___default()(row.fechaOperacion).format('LLLL');\n                var sistema = row.sistema;\n                var sistema_label = \"\";\n                var tipoOperacion = row.tipoOperacion;\n                var tipo = \"\";\n\n                if (sistema == \"S2\") {\n                  sistema_label = \"Sistema de Servidores Públicos que Intervienen en Procedimientos de Contratación.\";\n                }\n\n                if (sistema == \"S3S\") {\n                  sistema_label = \"Sistema de los Servidores Públicos Sancionados.\";\n                }\n\n                if (sistema == \"S3P\") {\n                  sistema_label = \"Sistema de los Particulares Sancionados.\";\n                }\n\n                if (tipoOperacion == \"CREATE\") {\n                  tipo = \"Alta\";\n                }\n\n                if (tipoOperacion == \"DELETE\") {\n                  tipo = \"Eliminación\";\n                }\n\n                if (tipoOperacion == \"UPDATE\") {\n                  tipo = \"Actualización\";\n                }\n\n                if (tipoOperacion == \"READ\") {\n                  tipo = \"Consulta\";\n                }\n\n                var nombre_usuario = \"\";\n\n                _.map(row.Data, function (item) {\n                  nombre_usuario = item.nombre + \" \" + item.apellidoUno + \" \" + item.apellidoDos;\n                });\n\n                var rowExtend = _.extend({\n                  fecha: fecha,\n                  tipo: tipo,\n                  sistema_label: sistema_label,\n                  numeroRegistros: row.numeroRegistros,\n                  nombre: nombre_usuario\n                });\n\n                return rowExtend;\n              });\n              paginationResult[\"resultado\"] = strippedRows;\n            };\n\n            sortObj = req.body.sort === undefined ? {} : req.body.sort;\n            page = req.body.page === undefined ? 1 : req.body.page; //numero de pagina a mostrar\n\n            pageSize = req.body.pageSize === undefined ? 10 : req.body.pageSize;\n            query = req.body.query === undefined ? {} : req.body.query;\n\n            if (!(typeof req.body.sistema != \"undefined\" && typeof req.body.usuarioBitacora != \"undefined\")) {\n              _context27.next = 24;\n              break;\n            }\n\n            _context27.next = 20;\n            return _schemas_model_bitacora__WEBPACK_IMPORTED_MODULE_11___default.a.aggregate([{\n              $lookup: {\n                from: \"usuarios\",\n                localField: \"usuario\",\n                foreignField: \"_id\",\n                as: \"Data\"\n              }\n            }, {\n              $match: {\n                \"fechaOperacion\": {\n                  $gte: fechaInicial,\n                  $lte: fechaFinal\n                },\n                \"usuario\": {\n                  $eq: req.body.usuarioBitacora\n                },\n                \"sistema\": {\n                  $in: req.body.sistema\n                }\n              }\n            }]);\n\n          case 20:\n            paginationResult = _context27.sent;\n            console.log(\"Por fechas, POR USUARIO, POR SISTEMAS\"); //formato(paginationResult);\n\n            _context27.next = 44;\n            break;\n\n          case 24:\n            if (!(typeof req.body.sistema != \"undefined\")) {\n              _context27.next = 31;\n              break;\n            }\n\n            _context27.next = 27;\n            return _schemas_model_bitacora__WEBPACK_IMPORTED_MODULE_11___default.a.aggregate([{\n              $lookup: {\n                from: \"usuarios\",\n                localField: \"usuario\",\n                foreignField: \"_id\",\n                as: \"Data\"\n              }\n            }, {\n              $match: {\n                \"fechaOperacion\": {\n                  $gte: fechaInicial,\n                  $lte: fechaFinal\n                },\n                \"sistema\": {\n                  $in: req.body.sistema\n                }\n              }\n            }]);\n\n          case 27:\n            paginationResult = _context27.sent;\n            console.log(\"Por SISTEMAS\"); //formato(paginationResult);\n\n            _context27.next = 44;\n            break;\n\n          case 31:\n            if (!(typeof req.body.usuarioBitacora != \"undefined\")) {\n              _context27.next = 40;\n              break;\n            }\n\n            _context27.next = 34;\n            return _schemas_model_bitacora__WEBPACK_IMPORTED_MODULE_11___default.a.aggregate([{\n              usuario: {\n                $eq: {\n                  $toObjectId: \"602d90e709936454e6e516b8\"\n                }\n              }\n            }, {\n              $lookup: {\n                from: \"usuarios\",\n                localField: \"usuario\",\n                foreignField: \"_id\",\n                as: \"Data\"\n              }\n            }]);\n\n          case 34:\n            paginationResult = _context27.sent;\n            //formato(paginationResult);\n            console.log(req.body.usuarioBitacora);\n            console.log(paginationResult);\n            console.log(\"En el susuario \");\n            _context27.next = 44;\n            break;\n\n          case 40:\n            _context27.next = 42;\n            return _schemas_model_bitacora__WEBPACK_IMPORTED_MODULE_11___default.a.aggregate([{\n              $lookup: {\n                from: \"usuarios\",\n                localField: \"usuario\",\n                foreignField: \"_id\",\n                as: \"Data\"\n              }\n            }, {\n              $match: {\n                \"fechaOperacion\": {\n                  $gte: fechaInicial,\n                  $lte: fechaFinal\n                }\n              }\n            }]);\n\n          case 42:\n            paginationResult = _context27.sent;\n            console.log(\"Por fechas\");\n\n          case 44:\n            formato(paginationResult);\n            objpagination = {\n              hasNextPage: paginationResult.hasNextPage,\n              page: paginationResult.page,\n              pageSize: paginationResult.limit,\n              totalRows: paginationResult.totalDocs\n            };\n            objresults = paginationResult;\n            _objResponse = {}; //objResponse[\"pagination\"] = objpagination;\n\n            _objResponse[\"results\"] = paginationResult[\"resultado\"];\n            res.status(200).json(_objResponse);\n\n          case 50:\n            _context27.next = 55;\n            break;\n\n          case 52:\n            _context27.prev = 52;\n            _context27.t0 = _context27[\"catch\"](0);\n            console.log(_context27.t0);\n\n          case 55:\n          case \"end\":\n            return _context27.stop();\n        }\n      }\n    }, _callee27, null, [[0, 52]]);\n  }));\n\n  return function (_x57, _x58) {\n    return _ref27.apply(this, arguments);\n  };\n}());\napp.post('/resetpassword', /*#__PURE__*/function () {\n  var _ref28 = _asyncToGenerator( /*#__PURE__*/regenerator_runtime__WEBPACK_IMPORTED_MODULE_13___default.a.mark(function _callee28(req, res) {\n    var correo, correoValidar, validacion, estatus, result, generator, password, client, message, fechaActual, respuesta;\n    return regenerator_runtime__WEBPACK_IMPORTED_MODULE_13___default.a.wrap(function _callee28$(_context28) {\n      while (1) {\n        switch (_context28.prev = _context28.next) {\n          case 0:\n            _context28.prev = 0;\n            correo = req.body.correo;\n            correoValidar = yup__WEBPACK_IMPORTED_MODULE_4__[\"string\"]().email().required();\n            _context28.next = 5;\n            return correoValidar.isValid(correo);\n\n          case 5:\n            validacion = _context28.sent;\n\n            if (!(validacion == false)) {\n              _context28.next = 9;\n              break;\n            }\n\n            res.status(200).json({\n              message: \"Correo electrónico inválido.\",\n              Status: 500\n            });\n            return _context28.abrupt(\"return\", false);\n\n          case 9:\n            _context28.next = 11;\n            return _schemas_model_user__WEBPACK_IMPORTED_MODULE_5___default.a.find({\n              correoElectronico: correo,\n              estatus: false\n            }).then();\n\n          case 11:\n            estatus = _context28.sent;\n\n            if (!(estatus.length > 0)) {\n              _context28.next = 15;\n              break;\n            }\n\n            res.status(200).json({\n              message: \"El usuario está dado de baja en el sistema.\",\n              Status: 500\n            });\n            return _context28.abrupt(\"return\", false);\n\n          case 15:\n            _context28.next = 17;\n            return _schemas_model_user__WEBPACK_IMPORTED_MODULE_5___default.a.find({\n              correoElectronico: correo\n            }).then();\n\n          case 17:\n            result = _context28.sent;\n\n            if (!(result.length == 0)) {\n              _context28.next = 21;\n              break;\n            }\n\n            res.status(200).json({\n              message: \"El Correo electrónico que ingresaste no existe.\",\n              Status: 500\n            });\n            return _context28.abrupt(\"return\", false);\n\n          case 21:\n            generator = __webpack_require__(/*! generate-password */ \"generate-password\");\n            password = generator.generate({\n              length: 8,\n              numbers: true,\n              symbols: true,\n              lowercase: true,\n              uppercase: true,\n              strict: true\n            });\n            client = new emailjs__WEBPACK_IMPORTED_MODULE_15__[\"SMTPClient\"]({\n              user: 'soporteportalpdn@gmail.com',\n              password: 'pdndigital-2021',\n              host: 'smtp.gmail.com',\n              ssl: true\n            });\n            message = {\n              text: 'Enviamos tu nueva contraseña del portal PDN',\n              from: 'soporteportalpdn@gmail.com',\n              to: correo,\n              subject: 'Enviamos tu nueva contraseña del portal PDN',\n              attachment: [{\n                data: '<html>Buen día anexamos tu contraseña nueva para acceder al portal de la PDN. Contraseña:  <br><i><b><h3>' + password + '</h3></b></i></html>',\n                alternative: true\n              }]\n            }; // send the message and get a callback with an error or details of the message that was sent\n\n            client.send(message, function (err, message) {\n              if (err != null) {\n                res.status(200).json({\n                  message: \"Hay errores al enviar tu nueva contraseña.Ponte en contacto con el administrador.\",\n                  Status: 500\n                });\n              }\n            });\n            fechaActual = moment__WEBPACK_IMPORTED_MODULE_12___default()();\n            _context28.next = 29;\n            return _schemas_model_user__WEBPACK_IMPORTED_MODULE_5___default.a.updateOne({\n              correoElectronico: correo\n            }, {\n              constrasena: password,\n              contrasenaNueva: true,\n              vigenciaContrasena: fechaActual.add(3, 'months').format().toString()\n            });\n\n          case 29:\n            respuesta = _context28.sent;\n            res.status(200).json({\n              message: \"Se ha enviado tu nueva contraseña al correo electrónico proporcionado.\",\n              Status: 200\n            });\n            _context28.next = 36;\n            break;\n\n          case 33:\n            _context28.prev = 33;\n            _context28.t0 = _context28[\"catch\"](0);\n            console.log(_context28.t0);\n\n          case 36:\n          case \"end\":\n            return _context28.stop();\n        }\n      }\n    }, _callee28, null, [[0, 33]]);\n  }));\n\n  return function (_x59, _x60) {\n    return _ref28.apply(this, arguments);\n  };\n}());\napp.post('/changepassword', /*#__PURE__*/function () {\n  var _ref29 = _asyncToGenerator( /*#__PURE__*/regenerator_runtime__WEBPACK_IMPORTED_MODULE_13___default.a.mark(function _callee29(req, res) {\n    var constrasena, passwordConfirmation, id, fechaActual, result;\n    return regenerator_runtime__WEBPACK_IMPORTED_MODULE_13___default.a.wrap(function _callee29$(_context29) {\n      while (1) {\n        switch (_context29.prev = _context29.next) {\n          case 0:\n            _context29.prev = 0;\n            constrasena = req.body.constrasena;\n            passwordConfirmation = req.body.passwordConfirmation;\n            id = req.body.user;\n\n            if (!(constrasena != passwordConfirmation)) {\n              _context29.next = 7;\n              break;\n            }\n\n            res.status(200).json({\n              message: \"Las contraseñas no coinciden.\",\n              Status: 500\n            });\n            return _context29.abrupt(\"return\", false);\n\n          case 7:\n            fechaActual = moment__WEBPACK_IMPORTED_MODULE_12___default()();\n            _context29.next = 10;\n            return _schemas_model_user__WEBPACK_IMPORTED_MODULE_5___default.a.update({\n              _id: id\n            }, {\n              constrasena: constrasena,\n              contrasenaNueva: false,\n              vigenciaContrasena: fechaActual.add(3, 'months').format().toString()\n            }).then();\n\n          case 10:\n            result = _context29.sent;\n            res.status(200).json({\n              message: \"¡Se ha actualizado tu contraseña!.Favor de cerrar la sesión e iniciar nuevamente.\",\n              Status: 200\n            });\n            _context29.next = 17;\n            break;\n\n          case 14:\n            _context29.prev = 14;\n            _context29.t0 = _context29[\"catch\"](0);\n            console.log(_context29.t0);\n\n          case 17:\n          case \"end\":\n            return _context29.stop();\n        }\n      }\n    }, _callee29, null, [[0, 14]]);\n  }));\n\n  return function (_x61, _x62) {\n    return _ref29.apply(this, arguments);\n  };\n}());\napp.post('/validationpassword', /*#__PURE__*/function () {\n  var _ref30 = _asyncToGenerator( /*#__PURE__*/regenerator_runtime__WEBPACK_IMPORTED_MODULE_13___default.a.mark(function _callee30(req, res) {\n    var code, id_usuario, result;\n    return regenerator_runtime__WEBPACK_IMPORTED_MODULE_13___default.a.wrap(function _callee30$(_context30) {\n      while (1) {\n        switch (_context30.prev = _context30.next) {\n          case 0:\n            code = validateToken(req);\n\n            if (!(code.code == 401)) {\n              _context30.next = 5;\n              break;\n            }\n\n            res.status(401).json({\n              code: '401',\n              message: code.message\n            });\n            _context30.next = 20;\n            break;\n\n          case 5:\n            if (!(code.code == 200)) {\n              _context30.next = 20;\n              break;\n            }\n\n            _context30.prev = 6;\n            id_usuario = req.body.id_usuario;\n\n            if (!(id_usuario == \"\")) {\n              _context30.next = 11;\n              break;\n            }\n\n            res.status(200).json({\n              message: \"Id Usuario requerido.\",\n              Status: 500\n            });\n            return _context30.abrupt(\"return\", false);\n\n          case 11:\n            _context30.next = 13;\n            return _schemas_model_user__WEBPACK_IMPORTED_MODULE_5___default.a.findById(id_usuario).exec();\n\n          case 13:\n            result = _context30.sent;\n\n            if (result.contrasenaNueva === true) {\n              res.status(200).json({\n                message: \"Necesitas cambiar tu contraseña\",\n                Status: 500,\n                contrasenaNueva: true,\n                rol: result.rol,\n                sistemas: result.sistemas\n              });\n            } else {\n              res.status(200).json({\n                message: \"Tu contraseña está al día.\",\n                Status: 200,\n                contrasenaNueva: false,\n                rol: result.rol,\n                sistemas: result.sistemas\n              });\n            }\n\n            _context30.next = 20;\n            break;\n\n          case 17:\n            _context30.prev = 17;\n            _context30.t0 = _context30[\"catch\"](6);\n            console.log(_context30.t0);\n\n          case 20:\n          case \"end\":\n            return _context30.stop();\n        }\n      }\n    }, _callee30, null, [[6, 17]]);\n  }));\n\n  return function (_x63, _x64) {\n    return _ref30.apply(this, arguments);\n  };\n}());\n\n//# sourceURL=webpack:///./src/server/server.js?");
>>>>>>> Stashed changes

/***/ }),

/***/ "body-parser":
/*!******************************!*\
  !*** external "body-parser" ***!
  \******************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"body-parser\");\n\n//# sourceURL=webpack:///external_%22body-parser%22?");

/***/ }),

/***/ "console":
/*!**************************!*\
  !*** external "console" ***!
  \**************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"console\");\n\n//# sourceURL=webpack:///external_%22console%22?");

/***/ }),

/***/ "cors":
/*!***********************!*\
  !*** external "cors" ***!
  \***********************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"cors\");\n\n//# sourceURL=webpack:///external_%22cors%22?");

/***/ }),

/***/ "express":
/*!**************************!*\
  !*** external "express" ***!
  \**************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"express\");\n\n//# sourceURL=webpack:///external_%22express%22?");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"fs\");\n\n//# sourceURL=webpack:///external_%22fs%22?");

/***/ }),

/***/ "js-yaml":
/*!**************************!*\
  !*** external "js-yaml" ***!
  \**************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"js-yaml\");\n\n//# sourceURL=webpack:///external_%22js-yaml%22?");

/***/ }),

/***/ "jsonwebtoken":
/*!*******************************!*\
  !*** external "jsonwebtoken" ***!
  \*******************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"jsonwebtoken\");\n\n//# sourceURL=webpack:///external_%22jsonwebtoken%22?");

/***/ }),

/***/ "moment":
/*!*************************!*\
  !*** external "moment" ***!
  \*************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"moment\");\n\n//# sourceURL=webpack:///external_%22moment%22?");

/***/ }),

/***/ "mongoose":
/*!***************************!*\
  !*** external "mongoose" ***!
  \***************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"mongoose\");\n\n//# sourceURL=webpack:///external_%22mongoose%22?");

/***/ }),

/***/ "mongoose-paginate-v2":
/*!***************************************!*\
  !*** external "mongoose-paginate-v2" ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"mongoose-paginate-v2\");\n\n//# sourceURL=webpack:///external_%22mongoose-paginate-v2%22?");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"path\");\n\n//# sourceURL=webpack:///external_%22path%22?");

/***/ }),

/***/ "regenerator-runtime":
/*!**************************************!*\
  !*** external "regenerator-runtime" ***!
  \**************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"regenerator-runtime\");\n\n//# sourceURL=webpack:///external_%22regenerator-runtime%22?");

/***/ }),

/***/ "swagger-client":
/*!*********************************!*\
  !*** external "swagger-client" ***!
  \*********************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"swagger-client\");\n\n//# sourceURL=webpack:///external_%22swagger-client%22?");

/***/ }),

/***/ "swagger-model-validator":
/*!******************************************!*\
  !*** external "swagger-model-validator" ***!
  \******************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"swagger-model-validator\");\n\n//# sourceURL=webpack:///external_%22swagger-model-validator%22?");

/***/ }),

/***/ "swagger-object-validator":
/*!*******************************************!*\
  !*** external "swagger-object-validator" ***!
  \*******************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"swagger-object-validator\");\n\n//# sourceURL=webpack:///external_%22swagger-object-validator%22?");

/***/ }),

/***/ "underscore":
/*!*****************************!*\
  !*** external "underscore" ***!
  \*****************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"underscore\");\n\n//# sourceURL=webpack:///external_%22underscore%22?");

/***/ }),

/***/ "yup":
/*!**********************!*\
  !*** external "yup" ***!
  \**********************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = require(\"yup\");\n\n//# sourceURL=webpack:///external_%22yup%22?");

/***/ })

/******/ });
